var Wy=Object.create;var Zs=Object.defineProperty,Vy=Object.defineProperties,zy=Object.getOwnPropertyDescriptor,Gy=Object.getOwnPropertyDescriptors,Hy=Object.getOwnPropertyNames,jc=Object.getOwnPropertySymbols,Ky=Object.getPrototypeOf,Wc=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable;var qc=(s,e,t)=>e in s?Zs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,k=(s,e)=>{for(var t in e||(e={}))Wc.call(e,t)&&qc(s,t,e[t]);if(jc)for(var t of jc(e))Xy.call(e,t)&&qc(s,t,e[t]);return s},Se=(s,e)=>Vy(s,Gy(e));var Jy=(s,e)=>()=>(s&&(e=s(s=0)),e);var E=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Yy=(s,e)=>{for(var t in e)Zs(s,t,{get:e[t],enumerable:!0})},Vc=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Hy(e))!Wc.call(s,i)&&i!==t&&Zs(s,i,{get:()=>e[i],enumerable:!(r=zy(e,i))||r.enumerable});return s};var ne=(s,e,t)=>(t=s!=null?Wy(Ky(s)):{},Vc(e||!s||!s.__esModule?Zs(t,"default",{value:s,enumerable:!0}):t,s)),Qy=s=>Vc(Zs({},"__esModule",{value:!0}),s);var d=Jy(()=>{});var nr=E((Vv,xl)=>{d();var Mg="2.0.0",Fg=Number.MAX_SAFE_INTEGER||9007199254740991,Rg=16;xl.exports={SEMVER_SPEC_VERSION:Mg,MAX_LENGTH:256,MAX_SAFE_INTEGER:Fg,MAX_SAFE_COMPONENT_LENGTH:Rg}});var ar=E((zv,Pl)=>{d();var Bg=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...s)=>console.error("SEMVER",...s):()=>{};Pl.exports=Bg});var zt=E((Ct,Tl)=>{d();var{MAX_SAFE_COMPONENT_LENGTH:ha}=nr(),$g=ar();Ct=Tl.exports={};var Ug=Ct.re=[],N=Ct.src=[],I=Ct.t={},jg=0,$=(s,e,t)=>{let r=jg++;$g(s,r,e),I[s]=r,N[r]=e,Ug[r]=new RegExp(e,t?"g":void 0)};$("NUMERICIDENTIFIER","0|[1-9]\\d*");$("NUMERICIDENTIFIERLOOSE","[0-9]+");$("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");$("MAINVERSION",`(${N[I.NUMERICIDENTIFIER]})\\.(${N[I.NUMERICIDENTIFIER]})\\.(${N[I.NUMERICIDENTIFIER]})`);$("MAINVERSIONLOOSE",`(${N[I.NUMERICIDENTIFIERLOOSE]})\\.(${N[I.NUMERICIDENTIFIERLOOSE]})\\.(${N[I.NUMERICIDENTIFIERLOOSE]})`);$("PRERELEASEIDENTIFIER",`(?:${N[I.NUMERICIDENTIFIER]}|${N[I.NONNUMERICIDENTIFIER]})`);$("PRERELEASEIDENTIFIERLOOSE",`(?:${N[I.NUMERICIDENTIFIERLOOSE]}|${N[I.NONNUMERICIDENTIFIER]})`);$("PRERELEASE",`(?:-(${N[I.PRERELEASEIDENTIFIER]}(?:\\.${N[I.PRERELEASEIDENTIFIER]})*))`);$("PRERELEASELOOSE",`(?:-?(${N[I.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${N[I.PRERELEASEIDENTIFIERLOOSE]})*))`);$("BUILDIDENTIFIER","[0-9A-Za-z-]+");$("BUILD",`(?:\\+(${N[I.BUILDIDENTIFIER]}(?:\\.${N[I.BUILDIDENTIFIER]})*))`);$("FULLPLAIN",`v?${N[I.MAINVERSION]}${N[I.PRERELEASE]}?${N[I.BUILD]}?`);$("FULL",`^${N[I.FULLPLAIN]}$`);$("LOOSEPLAIN",`[v=\\s]*${N[I.MAINVERSIONLOOSE]}${N[I.PRERELEASELOOSE]}?${N[I.BUILD]}?`);$("LOOSE",`^${N[I.LOOSEPLAIN]}$`);$("GTLT","((?:<|>)?=?)");$("XRANGEIDENTIFIERLOOSE",`${N[I.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);$("XRANGEIDENTIFIER",`${N[I.NUMERICIDENTIFIER]}|x|X|\\*`);$("XRANGEPLAIN",`[v=\\s]*(${N[I.XRANGEIDENTIFIER]})(?:\\.(${N[I.XRANGEIDENTIFIER]})(?:\\.(${N[I.XRANGEIDENTIFIER]})(?:${N[I.PRERELEASE]})?${N[I.BUILD]}?)?)?`);$("XRANGEPLAINLOOSE",`[v=\\s]*(${N[I.XRANGEIDENTIFIERLOOSE]})(?:\\.(${N[I.XRANGEIDENTIFIERLOOSE]})(?:\\.(${N[I.XRANGEIDENTIFIERLOOSE]})(?:${N[I.PRERELEASELOOSE]})?${N[I.BUILD]}?)?)?`);$("XRANGE",`^${N[I.GTLT]}\\s*${N[I.XRANGEPLAIN]}$`);$("XRANGELOOSE",`^${N[I.GTLT]}\\s*${N[I.XRANGEPLAINLOOSE]}$`);$("COERCE",`(^|[^\\d])(\\d{1,${ha}})(?:\\.(\\d{1,${ha}}))?(?:\\.(\\d{1,${ha}}))?(?:$|[^\\d])`);$("COERCERTL",N[I.COERCE],!0);$("LONETILDE","(?:~>?)");$("TILDETRIM",`(\\s*)${N[I.LONETILDE]}\\s+`,!0);Ct.tildeTrimReplace="$1~";$("TILDE",`^${N[I.LONETILDE]}${N[I.XRANGEPLAIN]}$`);$("TILDELOOSE",`^${N[I.LONETILDE]}${N[I.XRANGEPLAINLOOSE]}$`);$("LONECARET","(?:\\^)");$("CARETTRIM",`(\\s*)${N[I.LONECARET]}\\s+`,!0);Ct.caretTrimReplace="$1^";$("CARET",`^${N[I.LONECARET]}${N[I.XRANGEPLAIN]}$`);$("CARETLOOSE",`^${N[I.LONECARET]}${N[I.XRANGEPLAINLOOSE]}$`);$("COMPARATORLOOSE",`^${N[I.GTLT]}\\s*(${N[I.LOOSEPLAIN]})$|^$`);$("COMPARATOR",`^${N[I.GTLT]}\\s*(${N[I.FULLPLAIN]})$|^$`);$("COMPARATORTRIM",`(\\s*)${N[I.GTLT]}\\s*(${N[I.LOOSEPLAIN]}|${N[I.XRANGEPLAIN]})`,!0);Ct.comparatorTrimReplace="$1$2$3";$("HYPHENRANGE",`^\\s*(${N[I.XRANGEPLAIN]})\\s+-\\s+(${N[I.XRANGEPLAIN]})\\s*$`);$("HYPHENRANGELOOSE",`^\\s*(${N[I.XRANGEPLAINLOOSE]})\\s+-\\s+(${N[I.XRANGEPLAINLOOSE]})\\s*$`);$("STAR","(<|>)?=?\\s*\\*");$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var or=E((Gv,bl)=>{d();var qg=["includePrerelease","loose","rtl"],Wg=s=>s?typeof s!="object"?{loose:!0}:qg.filter(e=>s[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};bl.exports=Wg});var fi=E((Hv,Sl)=>{d();var El=/^[0-9]+$/,wl=(s,e)=>{let t=El.test(s),r=El.test(e);return t&&r&&(s=+s,e=+e),s===e?0:t&&!r?-1:r&&!t?1:s<e?-1:1},Vg=(s,e)=>wl(e,s);Sl.exports={compareIdentifiers:wl,rcompareIdentifiers:Vg}});var xe=E((Kv,Nl)=>{d();var di=ar(),{MAX_LENGTH:vl,MAX_SAFE_INTEGER:mi}=nr(),{re:Al,t:Cl}=zt(),zg=or(),{compareIdentifiers:Ss}=fi(),$e=class{constructor(e,t){if(t=zg(t),e instanceof $e){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>vl)throw new TypeError(`version is longer than ${vl} characters`);di("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Al[Cl.LOOSE]:Al[Cl.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>mi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mi||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let n=+i;if(n>=0&&n<mi)return n}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(di("SemVer.compare",this.version,this.options,e),!(e instanceof $e)){if(typeof e=="string"&&e===this.version)return 0;e=new $e(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof $e||(e=new $e(e,this.options)),Ss(this.major,e.major)||Ss(this.minor,e.minor)||Ss(this.patch,e.patch)}comparePre(e){if(e instanceof $e||(e=new $e(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(di("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ss(r,i)}while(++t)}compareBuild(e){e instanceof $e||(e=new $e(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(di("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ss(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(Ss(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Nl.exports=$e});var Gt=E((Xv,Ol)=>{d();var{MAX_LENGTH:Gg}=nr(),{re:Il,t:kl}=zt(),Ll=xe(),Hg=or(),Kg=(s,e)=>{if(e=Hg(e),s instanceof Ll)return s;if(typeof s!="string"||s.length>Gg||!(e.loose?Il[kl.LOOSE]:Il[kl.FULL]).test(s))return null;try{return new Ll(s,e)}catch{return null}};Ol.exports=Kg});var Dl=E((Jv,_l)=>{d();var Xg=Gt(),Jg=(s,e)=>{let t=Xg(s,e);return t?t.version:null};_l.exports=Jg});var Fl=E((Yv,Ml)=>{d();var Yg=Gt(),Qg=(s,e)=>{let t=Yg(s.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Ml.exports=Qg});var $l=E((Qv,Bl)=>{d();var Rl=xe(),Zg=(s,e,t,r)=>{typeof t=="string"&&(r=t,t=void 0);try{return new Rl(s instanceof Rl?s.version:s,t).inc(e,r).version}catch{return null}};Bl.exports=Zg});var We=E((Zv,jl)=>{d();var Ul=xe(),ex=(s,e,t)=>new Ul(s,t).compare(new Ul(e,t));jl.exports=ex});var yi=E((e1,ql)=>{d();var tx=We(),sx=(s,e,t)=>tx(s,e,t)===0;ql.exports=sx});var zl=E((t1,Vl)=>{d();var Wl=Gt(),rx=yi(),ix=(s,e)=>{if(rx(s,e))return null;{let t=Wl(s),r=Wl(e),i=t.prerelease.length||r.prerelease.length,n=i?"pre":"",a=i?"prerelease":"";for(let o in t)if((o==="major"||o==="minor"||o==="patch")&&t[o]!==r[o])return n+o;return a}};Vl.exports=ix});var Hl=E((s1,Gl)=>{d();var nx=xe(),ax=(s,e)=>new nx(s,e).major;Gl.exports=ax});var Xl=E((r1,Kl)=>{d();var ox=xe(),cx=(s,e)=>new ox(s,e).minor;Kl.exports=cx});var Yl=E((i1,Jl)=>{d();var lx=xe(),ux=(s,e)=>new lx(s,e).patch;Jl.exports=ux});var Zl=E((n1,Ql)=>{d();var hx=Gt(),px=(s,e)=>{let t=hx(s,e);return t&&t.prerelease.length?t.prerelease:null};Ql.exports=px});var tu=E((a1,eu)=>{d();var fx=We(),dx=(s,e,t)=>fx(e,s,t);eu.exports=dx});var ru=E((o1,su)=>{d();var mx=We(),yx=(s,e)=>mx(s,e,!0);su.exports=yx});var gi=E((c1,nu)=>{d();var iu=xe(),gx=(s,e,t)=>{let r=new iu(s,t),i=new iu(e,t);return r.compare(i)||r.compareBuild(i)};nu.exports=gx});var ou=E((l1,au)=>{d();var xx=gi(),Px=(s,e)=>s.sort((t,r)=>xx(t,r,e));au.exports=Px});var lu=E((u1,cu)=>{d();var Tx=gi(),bx=(s,e)=>s.sort((t,r)=>Tx(r,t,e));cu.exports=bx});var cr=E((h1,uu)=>{d();var Ex=We(),wx=(s,e,t)=>Ex(s,e,t)>0;uu.exports=wx});var xi=E((p1,hu)=>{d();var Sx=We(),vx=(s,e,t)=>Sx(s,e,t)<0;hu.exports=vx});var pa=E((f1,pu)=>{d();var Ax=We(),Cx=(s,e,t)=>Ax(s,e,t)!==0;pu.exports=Cx});var Pi=E((d1,fu)=>{d();var Nx=We(),Ix=(s,e,t)=>Nx(s,e,t)>=0;fu.exports=Ix});var Ti=E((m1,du)=>{d();var kx=We(),Lx=(s,e,t)=>kx(s,e,t)<=0;du.exports=Lx});var fa=E((y1,mu)=>{d();var Ox=yi(),_x=pa(),Dx=cr(),Mx=Pi(),Fx=xi(),Rx=Ti(),Bx=(s,e,t,r)=>{switch(e){case"===":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s===t;case"!==":return typeof s=="object"&&(s=s.version),typeof t=="object"&&(t=t.version),s!==t;case"":case"=":case"==":return Ox(s,t,r);case"!=":return _x(s,t,r);case">":return Dx(s,t,r);case">=":return Mx(s,t,r);case"<":return Fx(s,t,r);case"<=":return Rx(s,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};mu.exports=Bx});var gu=E((g1,yu)=>{d();var $x=xe(),Ux=Gt(),{re:bi,t:Ei}=zt(),jx=(s,e)=>{if(s instanceof $x)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;e=e||{};let t=null;if(!e.rtl)t=s.match(bi[Ei.COERCE]);else{let r;for(;(r=bi[Ei.COERCERTL].exec(s))&&(!t||t.index+t[0].length!==s.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&&(t=r),bi[Ei.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;bi[Ei.COERCERTL].lastIndex=-1}return t===null?null:Ux(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};yu.exports=jx});var Pu=E((x1,xu)=>{"use strict";d();xu.exports=function(s){s.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var bu=E((P1,Tu)=>{"use strict";d();Tu.exports=H;H.Node=Ht;H.create=H;function H(s){var e=this;if(e instanceof H||(e=new H),e.tail=null,e.head=null,e.length=0,s&&typeof s.forEach=="function")s.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}H.prototype.removeNode=function(s){if(s.list!==this)throw new Error("removing node which does not belong to this list");var e=s.next,t=s.prev;return e&&(e.prev=t),t&&(t.next=e),s===this.head&&(this.head=e),s===this.tail&&(this.tail=t),s.list.length--,s.next=null,s.prev=null,s.list=null,e};H.prototype.unshiftNode=function(s){if(s!==this.head){s.list&&s.list.removeNode(s);var e=this.head;s.list=this,s.next=e,e&&(e.prev=s),this.head=s,this.tail||(this.tail=s),this.length++}};H.prototype.pushNode=function(s){if(s!==this.tail){s.list&&s.list.removeNode(s);var e=this.tail;s.list=this,s.prev=e,e&&(e.next=s),this.tail=s,this.head||(this.head=s),this.length++}};H.prototype.push=function(){for(var s=0,e=arguments.length;s<e;s++)Wx(this,arguments[s]);return this.length};H.prototype.unshift=function(){for(var s=0,e=arguments.length;s<e;s++)Vx(this,arguments[s]);return this.length};H.prototype.pop=function(){if(!!this.tail){var s=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,s}};H.prototype.shift=function(){if(!!this.head){var s=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,s}};H.prototype.forEach=function(s,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)s.call(e,t.value,r,this),t=t.next};H.prototype.forEachReverse=function(s,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)s.call(e,t.value,r,this),t=t.prev};H.prototype.get=function(s){for(var e=0,t=this.head;t!==null&&e<s;e++)t=t.next;if(e===s&&t!==null)return t.value};H.prototype.getReverse=function(s){for(var e=0,t=this.tail;t!==null&&e<s;e++)t=t.prev;if(e===s&&t!==null)return t.value};H.prototype.map=function(s,e){e=e||this;for(var t=new H,r=this.head;r!==null;)t.push(s.call(e,r.value,this)),r=r.next;return t};H.prototype.mapReverse=function(s,e){e=e||this;for(var t=new H,r=this.tail;r!==null;)t.push(s.call(e,r.value,this)),r=r.prev;return t};H.prototype.reduce=function(s,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)t=s(t,r.value,i),r=r.next;return t};H.prototype.reduceReverse=function(s,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)t=s(t,r.value,i),r=r.prev;return t};H.prototype.toArray=function(){for(var s=new Array(this.length),e=0,t=this.head;t!==null;e++)s[e]=t.value,t=t.next;return s};H.prototype.toArrayReverse=function(){for(var s=new Array(this.length),e=0,t=this.tail;t!==null;e++)s[e]=t.value,t=t.prev;return s};H.prototype.slice=function(s,e){e=e||this.length,e<0&&(e+=this.length),s=s||0,s<0&&(s+=this.length);var t=new H;if(e<s||e<0)return t;s<0&&(s=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<s;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)t.push(i.value);return t};H.prototype.sliceReverse=function(s,e){e=e||this.length,e<0&&(e+=this.length),s=s||0,s<0&&(s+=this.length);var t=new H;if(e<s||e<0)return t;s<0&&(s=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>s;r--,i=i.prev)t.push(i.value);return t};H.prototype.splice=function(s,e,...t){s>this.length&&(s=this.length-1),s<0&&(s=this.length+s);for(var r=0,i=this.head;i!==null&&r<s;r++)i=i.next;for(var n=[],r=0;i&&r<e;r++)n.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<t.length;r++)i=qx(this,i,t[r]);return n};H.prototype.reverse=function(){for(var s=this.head,e=this.tail,t=s;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=s,this};function qx(s,e,t){var r=e===s.head?new Ht(t,null,e,s):new Ht(t,e,e.next,s);return r.next===null&&(s.tail=r),r.prev===null&&(s.head=r),s.length++,r}function Wx(s,e){s.tail=new Ht(e,s.tail,null,s),s.head||(s.head=s.tail),s.length++}function Vx(s,e){s.head=new Ht(e,null,s.head,s),s.tail||(s.tail=s.head),s.length++}function Ht(s,e,t,r){if(!(this instanceof Ht))return new Ht(s,e,t,r);this.list=r,this.value=s,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Pu()(H)}catch{}});var Au=E((T1,vu)=>{"use strict";d();var zx=bu(),Kt=Symbol("max"),it=Symbol("length"),vs=Symbol("lengthCalculator"),ur=Symbol("allowStale"),Xt=Symbol("maxAge"),rt=Symbol("dispose"),Eu=Symbol("noDisposeOnSet"),fe=Symbol("lruList"),He=Symbol("cache"),Su=Symbol("updateAgeOnGet"),da=()=>1,ya=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[Kt]=e.max||1/0,r=e.length||da;if(this[vs]=typeof r!="function"?da:r,this[ur]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Xt]=e.maxAge||0,this[rt]=e.dispose,this[Eu]=e.noDisposeOnSet||!1,this[Su]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Kt]=e||1/0,lr(this)}get max(){return this[Kt]}set allowStale(e){this[ur]=!!e}get allowStale(){return this[ur]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Xt]=e,lr(this)}get maxAge(){return this[Xt]}set lengthCalculator(e){typeof e!="function"&&(e=da),e!==this[vs]&&(this[vs]=e,this[it]=0,this[fe].forEach(t=>{t.length=this[vs](t.value,t.key),this[it]+=t.length})),lr(this)}get lengthCalculator(){return this[vs]}get length(){return this[it]}get itemCount(){return this[fe].length}rforEach(e,t){t=t||this;for(let r=this[fe].tail;r!==null;){let i=r.prev;wu(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[fe].head;r!==null;){let i=r.next;wu(this,e,r,t),r=i}}keys(){return this[fe].toArray().map(e=>e.key)}values(){return this[fe].toArray().map(e=>e.value)}reset(){this[rt]&&this[fe]&&this[fe].length&&this[fe].forEach(e=>this[rt](e.key,e.value)),this[He]=new Map,this[fe]=new zx,this[it]=0}dump(){return this[fe].map(e=>wi(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[fe]}set(e,t,r){if(r=r||this[Xt],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,n=this[vs](t,e);if(this[He].has(e)){if(n>this[Kt])return As(this,this[He].get(e)),!1;let c=this[He].get(e).value;return this[rt]&&(this[Eu]||this[rt](e,c.value)),c.now=i,c.maxAge=r,c.value=t,this[it]+=n-c.length,c.length=n,this.get(e),lr(this),!0}let a=new ga(e,t,n,i,r);return a.length>this[Kt]?(this[rt]&&this[rt](e,t),!1):(this[it]+=a.length,this[fe].unshift(a),this[He].set(e,this[fe].head),lr(this),!0)}has(e){if(!this[He].has(e))return!1;let t=this[He].get(e).value;return!wi(this,t)}get(e){return ma(this,e,!0)}peek(e){return ma(this,e,!1)}pop(){let e=this[fe].tail;return e?(As(this,e),e.value):null}del(e){As(this,this[He].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],n=i.e||0;if(n===0)this.set(i.k,i.v);else{let a=n-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[He].forEach((e,t)=>ma(this,t,!1))}},ma=(s,e,t)=>{let r=s[He].get(e);if(r){let i=r.value;if(wi(s,i)){if(As(s,r),!s[ur])return}else t&&(s[Su]&&(r.value.now=Date.now()),s[fe].unshiftNode(r));return i.value}},wi=(s,e)=>{if(!e||!e.maxAge&&!s[Xt])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:s[Xt]&&t>s[Xt]},lr=s=>{if(s[it]>s[Kt])for(let e=s[fe].tail;s[it]>s[Kt]&&e!==null;){let t=e.prev;As(s,e),e=t}},As=(s,e)=>{if(e){let t=e.value;s[rt]&&s[rt](t.key,t.value),s[it]-=t.length,s[He].delete(t.key),s[fe].removeNode(e)}},ga=class{constructor(e,t,r,i,n){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=n||0}},wu=(s,e,t,r)=>{let i=t.value;wi(s,i)&&(As(s,t),s[ur]||(i=void 0)),i&&e.call(r,i.value,i.key,s)};vu.exports=ya});var Ve=E((b1,ku)=>{d();var Jt=class{constructor(e,t){if(t=Hx(t),e instanceof Jt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Jt(e.raw,t);if(e instanceof xa)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Nu(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Qx(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Cu.get(r);if(i)return i;let n=this.options.loose,a=n?Oe[Ae.HYPHENRANGELOOSE]:Oe[Ae.HYPHENRANGE];e=e.replace(a,c0(this.options.includePrerelease)),ae("hyphen replace",e),e=e.replace(Oe[Ae.COMPARATORTRIM],Xx),ae("comparator trim",e),e=e.replace(Oe[Ae.TILDETRIM],Jx),e=e.replace(Oe[Ae.CARETTRIM],Yx),e=e.split(/\s+/).join(" ");let o=e.split(" ").map(h=>Zx(h,this.options)).join(" ").split(/\s+/).map(h=>o0(h,this.options));n&&(o=o.filter(h=>(ae("loose invalid filter",h,this.options),!!h.match(Oe[Ae.COMPARATORLOOSE])))),ae("range list",o);let c=new Map,l=o.map(h=>new xa(h,this.options));for(let h of l){if(Nu(h))return[h];c.set(h.value,h)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return Cu.set(r,u),u}intersects(e,t){if(!(e instanceof Jt))throw new TypeError("a Range is required");return this.set.some(r=>Iu(r,t)&&e.set.some(i=>Iu(i,t)&&r.every(n=>i.every(a=>n.intersects(a,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Kx(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(l0(this.set[t],e,this.options))return!0;return!1}};ku.exports=Jt;var Gx=Au(),Cu=new Gx({max:1e3}),Hx=or(),xa=hr(),ae=ar(),Kx=xe(),{re:Oe,t:Ae,comparatorTrimReplace:Xx,tildeTrimReplace:Jx,caretTrimReplace:Yx}=zt(),Nu=s=>s.value==="<0.0.0-0",Qx=s=>s.value==="",Iu=(s,e)=>{let t=!0,r=s.slice(),i=r.pop();for(;t&&r.length;)t=r.every(n=>i.intersects(n,e)),i=r.pop();return t},Zx=(s,e)=>(ae("comp",s,e),s=s0(s,e),ae("caret",s),s=e0(s,e),ae("tildes",s),s=i0(s,e),ae("xrange",s),s=a0(s,e),ae("stars",s),s),Ce=s=>!s||s.toLowerCase()==="x"||s==="*",e0=(s,e)=>s.trim().split(/\s+/).map(t=>t0(t,e)).join(" "),t0=(s,e)=>{let t=e.loose?Oe[Ae.TILDELOOSE]:Oe[Ae.TILDE];return s.replace(t,(r,i,n,a,o)=>{ae("tilde",s,r,i,n,a,o);let c;return Ce(i)?c="":Ce(n)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Ce(a)?c=`>=${i}.${n}.0 <${i}.${+n+1}.0-0`:o?(ae("replaceTilde pr",o),c=`>=${i}.${n}.${a}-${o} <${i}.${+n+1}.0-0`):c=`>=${i}.${n}.${a} <${i}.${+n+1}.0-0`,ae("tilde return",c),c})},s0=(s,e)=>s.trim().split(/\s+/).map(t=>r0(t,e)).join(" "),r0=(s,e)=>{ae("caret",s,e);let t=e.loose?Oe[Ae.CARETLOOSE]:Oe[Ae.CARET],r=e.includePrerelease?"-0":"";return s.replace(t,(i,n,a,o,c)=>{ae("caret",s,i,n,a,o,c);let l;return Ce(n)?l="":Ce(a)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:Ce(o)?n==="0"?l=`>=${n}.${a}.0${r} <${n}.${+a+1}.0-0`:l=`>=${n}.${a}.0${r} <${+n+1}.0.0-0`:c?(ae("replaceCaret pr",c),n==="0"?a==="0"?l=`>=${n}.${a}.${o}-${c} <${n}.${a}.${+o+1}-0`:l=`>=${n}.${a}.${o}-${c} <${n}.${+a+1}.0-0`:l=`>=${n}.${a}.${o}-${c} <${+n+1}.0.0-0`):(ae("no pr"),n==="0"?a==="0"?l=`>=${n}.${a}.${o}${r} <${n}.${a}.${+o+1}-0`:l=`>=${n}.${a}.${o}${r} <${n}.${+a+1}.0-0`:l=`>=${n}.${a}.${o} <${+n+1}.0.0-0`),ae("caret return",l),l})},i0=(s,e)=>(ae("replaceXRanges",s,e),s.split(/\s+/).map(t=>n0(t,e)).join(" ")),n0=(s,e)=>{s=s.trim();let t=e.loose?Oe[Ae.XRANGELOOSE]:Oe[Ae.XRANGE];return s.replace(t,(r,i,n,a,o,c)=>{ae("xRange",s,r,i,n,a,o,c);let l=Ce(n),u=l||Ce(a),h=u||Ce(o),p=h;return i==="="&&p&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(u&&(a=0),o=0,i===">"?(i=">=",u?(n=+n+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",u?n=+n+1:a=+a+1),i==="<"&&(c="-0"),r=`${i+n}.${a}.${o}${c}`):u?r=`>=${n}.0.0${c} <${+n+1}.0.0-0`:h&&(r=`>=${n}.${a}.0${c} <${n}.${+a+1}.0-0`),ae("xRange return",r),r})},a0=(s,e)=>(ae("replaceStars",s,e),s.trim().replace(Oe[Ae.STAR],"")),o0=(s,e)=>(ae("replaceGTE0",s,e),s.trim().replace(Oe[e.includePrerelease?Ae.GTE0PRE:Ae.GTE0],"")),c0=s=>(e,t,r,i,n,a,o,c,l,u,h,p,f)=>(Ce(r)?t="":Ce(i)?t=`>=${r}.0.0${s?"-0":""}`:Ce(n)?t=`>=${r}.${i}.0${s?"-0":""}`:a?t=`>=${t}`:t=`>=${t}${s?"-0":""}`,Ce(l)?c="":Ce(u)?c=`<${+l+1}.0.0-0`:Ce(h)?c=`<${l}.${+u+1}.0-0`:p?c=`<=${l}.${u}.${h}-${p}`:s?c=`<${l}.${u}.${+h+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),l0=(s,e,t)=>{for(let r=0;r<s.length;r++)if(!s[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<s.length;r++)if(ae(s[r].semver),s[r].semver!==xa.ANY&&s[r].semver.prerelease.length>0){let i=s[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var hr=E((E1,Mu)=>{d();var pr=Symbol("SemVer ANY"),Cs=class{static get ANY(){return pr}constructor(e,t){if(t=u0(t),e instanceof Cs){if(e.loose===!!t.loose)return e;e=e.value}Ta("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===pr?this.value="":this.value=this.operator+this.semver.version,Ta("comp",this)}parse(e){let t=this.options.loose?Lu[Ou.COMPARATORLOOSE]:Lu[Ou.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new _u(r[2],this.options.loose):this.semver=pr}toString(){return this.value}test(e){if(Ta("Comparator.test",e,this.options.loose),this.semver===pr||e===pr)return!0;if(typeof e=="string")try{e=new _u(e,this.options)}catch{return!1}return Pa(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Cs))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Du(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new Du(this.value,t).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),n=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),o=Pa(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Pa(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||n&&a||o||c}};Mu.exports=Cs;var u0=or(),{re:Lu,t:Ou}=zt(),Pa=fa(),Ta=ar(),_u=xe(),Du=Ve()});var fr=E((w1,Fu)=>{d();var h0=Ve(),p0=(s,e,t)=>{try{e=new h0(e,t)}catch{return!1}return e.test(s)};Fu.exports=p0});var Bu=E((S1,Ru)=>{d();var f0=Ve(),d0=(s,e)=>new f0(s,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));Ru.exports=d0});var Uu=E((v1,$u)=>{d();var m0=xe(),y0=Ve(),g0=(s,e,t)=>{let r=null,i=null,n=null;try{n=new y0(e,t)}catch{return null}return s.forEach(a=>{n.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new m0(r,t))}),r};$u.exports=g0});var qu=E((A1,ju)=>{d();var x0=xe(),P0=Ve(),T0=(s,e,t)=>{let r=null,i=null,n=null;try{n=new P0(e,t)}catch{return null}return s.forEach(a=>{n.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new x0(r,t))}),r};ju.exports=T0});var zu=E((C1,Vu)=>{d();var ba=xe(),b0=Ve(),Wu=cr(),E0=(s,e)=>{s=new b0(s,e);let t=new ba("0.0.0");if(s.test(t)||(t=new ba("0.0.0-0"),s.test(t)))return t;t=null;for(let r=0;r<s.set.length;++r){let i=s.set[r],n=null;i.forEach(a=>{let o=new ba(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!n||Wu(o,n))&&(n=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),n&&(!t||Wu(t,n))&&(t=n)}return t&&s.test(t)?t:null};Vu.exports=E0});var Hu=E((N1,Gu)=>{d();var w0=Ve(),S0=(s,e)=>{try{return new w0(s,e).range||"*"}catch{return null}};Gu.exports=S0});var Si=E((I1,Yu)=>{d();var v0=xe(),Ju=hr(),{ANY:A0}=Ju,C0=Ve(),N0=fr(),Ku=cr(),Xu=xi(),I0=Ti(),k0=Pi(),L0=(s,e,t,r)=>{s=new v0(s,r),e=new C0(e,r);let i,n,a,o,c;switch(t){case">":i=Ku,n=I0,a=Xu,o=">",c=">=";break;case"<":i=Xu,n=k0,a=Ku,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(N0(s,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],h=null,p=null;if(u.forEach(f=>{f.semver===A0&&(f=new Ju(">=0.0.0")),h=h||f,p=p||f,i(f.semver,h.semver,r)?h=f:a(f.semver,p.semver,r)&&(p=f)}),h.operator===o||h.operator===c||(!p.operator||p.operator===o)&&n(s,p.semver))return!1;if(p.operator===c&&a(s,p.semver))return!1}return!0};Yu.exports=L0});var Zu=E((k1,Qu)=>{d();var O0=Si(),_0=(s,e,t)=>O0(s,e,">",t);Qu.exports=_0});var th=E((L1,eh)=>{d();var D0=Si(),M0=(s,e,t)=>D0(s,e,"<",t);eh.exports=M0});var ih=E((O1,rh)=>{d();var sh=Ve(),F0=(s,e,t)=>(s=new sh(s,t),e=new sh(e,t),s.intersects(e));rh.exports=F0});var ah=E((_1,nh)=>{d();var R0=fr(),B0=We();nh.exports=(s,e,t)=>{let r=[],i=null,n=null,a=s.sort((u,h)=>B0(u,h,t));for(let u of a)R0(u,e,t)?(n=u,i||(i=u)):(n&&r.push([i,n]),n=null,i=null);i&&r.push([i,null]);let o=[];for(let[u,h]of r)u===h?o.push(u):!h&&u===a[0]?o.push("*"):h?u===a[0]?o.push(`<=${h}`):o.push(`${u} - ${h}`):o.push(`>=${u}`);let c=o.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var hh=E((D1,uh)=>{d();var oh=Ve(),vi=hr(),{ANY:Ea}=vi,dr=fr(),wa=We(),$0=(s,e,t={})=>{if(s===e)return!0;s=new oh(s,t),e=new oh(e,t);let r=!1;e:for(let i of s.set){for(let n of e.set){let a=U0(i,n,t);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},U0=(s,e,t)=>{if(s===e)return!0;if(s.length===1&&s[0].semver===Ea){if(e.length===1&&e[0].semver===Ea)return!0;t.includePrerelease?s=[new vi(">=0.0.0-0")]:s=[new vi(">=0.0.0")]}if(e.length===1&&e[0].semver===Ea){if(t.includePrerelease)return!0;e=[new vi(">=0.0.0")]}let r=new Set,i,n;for(let f of s)f.operator===">"||f.operator===">="?i=ch(i,f,t):f.operator==="<"||f.operator==="<="?n=lh(n,f,t):r.add(f.semver);if(r.size>1)return null;let a;if(i&&n){if(a=wa(i.semver,n.semver,t),a>0)return null;if(a===0&&(i.operator!==">="||n.operator!=="<="))return null}for(let f of r){if(i&&!dr(f,String(i),t)||n&&!dr(f,String(n),t))return null;for(let y of e)if(!dr(f,String(y),t))return!1;return!0}let o,c,l,u,h=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&n.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let f of e){if(u=u||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(o=ch(i,f,t),o===f&&o!==i)return!1}else if(i.operator===">="&&!dr(i.semver,String(f),t))return!1}if(n){if(h&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===h.major&&f.semver.minor===h.minor&&f.semver.patch===h.patch&&(h=!1),f.operator==="<"||f.operator==="<="){if(c=lh(n,f,t),c===f&&c!==n)return!1}else if(n.operator==="<="&&!dr(n.semver,String(f),t))return!1}if(!f.operator&&(n||i)&&a!==0)return!1}return!(i&&l&&!n&&a!==0||n&&u&&!i&&a!==0||p||h)},ch=(s,e,t)=>{if(!s)return e;let r=wa(s.semver,e.semver,t);return r>0?s:r<0||e.operator===">"&&s.operator===">="?e:s},lh=(s,e,t)=>{if(!s)return e;let r=wa(s.semver,e.semver,t);return r<0?s:r>0||e.operator==="<"&&s.operator==="<="?e:s};uh.exports=$0});var fh=E((M1,ph)=>{d();var Sa=zt();ph.exports={re:Sa.re,src:Sa.src,tokens:Sa.t,SEMVER_SPEC_VERSION:nr().SEMVER_SPEC_VERSION,SemVer:xe(),compareIdentifiers:fi().compareIdentifiers,rcompareIdentifiers:fi().rcompareIdentifiers,parse:Gt(),valid:Dl(),clean:Fl(),inc:$l(),diff:zl(),major:Hl(),minor:Xl(),patch:Yl(),prerelease:Zl(),compare:We(),rcompare:tu(),compareLoose:ru(),compareBuild:gi(),sort:ou(),rsort:lu(),gt:cr(),lt:xi(),eq:yi(),neq:pa(),gte:Pi(),lte:Ti(),cmp:fa(),coerce:gu(),Comparator:hr(),Range:Ve(),satisfies:fr(),toComparators:Bu(),maxSatisfying:Uu(),minSatisfying:qu(),minVersion:zu(),validRange:Hu(),outside:Si(),gtr:Zu(),ltr:th(),intersects:ih(),simplifyRange:ah(),subset:hh()}});var _e=E(va=>{"use strict";d();va.fromCallback=function(s){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")s.apply(this,e);else return new Promise((t,r)=>{s.call(this,...e,(i,n)=>i!=null?r(i):t(n))})},"name",{value:s.name})};va.fromPromise=function(s){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return s.apply(this,e);s.apply(this,e.slice(0,-1)).then(r=>t(null,r),t)},"name",{value:s.name})}});var mh=E((R1,dh)=>{d();var Nt=require("constants"),j0=process.cwd,Ai=null,q0=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ai||(Ai=j0.call(process)),Ai};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Aa=process.chdir,process.chdir=function(s){Ai=null,Aa.call(process,s)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Aa));var Aa;dh.exports=W0;function W0(s){Nt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(s),s.lutimes||t(s),s.chown=n(s.chown),s.fchown=n(s.fchown),s.lchown=n(s.lchown),s.chmod=r(s.chmod),s.fchmod=r(s.fchmod),s.lchmod=r(s.lchmod),s.chownSync=a(s.chownSync),s.fchownSync=a(s.fchownSync),s.lchownSync=a(s.lchownSync),s.chmodSync=i(s.chmodSync),s.fchmodSync=i(s.fchmodSync),s.lchmodSync=i(s.lchmodSync),s.stat=o(s.stat),s.fstat=o(s.fstat),s.lstat=o(s.lstat),s.statSync=c(s.statSync),s.fstatSync=c(s.fstatSync),s.lstatSync=c(s.lstatSync),s.chmod&&!s.lchmod&&(s.lchmod=function(u,h,p){p&&process.nextTick(p)},s.lchmodSync=function(){}),s.chown&&!s.lchown&&(s.lchown=function(u,h,p,f){f&&process.nextTick(f)},s.lchownSync=function(){}),q0==="win32"&&(s.rename=typeof s.rename!="function"?s.rename:function(u){function h(p,f,y){var g=Date.now(),b=0;u(p,f,function T(x){if(x&&(x.code==="EACCES"||x.code==="EPERM")&&Date.now()-g<6e4){setTimeout(function(){s.stat(f,function(S,A){S&&S.code==="ENOENT"?u(p,f,T):y(x)})},b),b<100&&(b+=10);return}y&&y(x)})}return Object.setPrototypeOf&&Object.setPrototypeOf(h,u),h}(s.rename)),s.read=typeof s.read!="function"?s.read:function(u){function h(p,f,y,g,b,T){var x;if(T&&typeof T=="function"){var S=0;x=function(A,C,j){if(A&&A.code==="EAGAIN"&&S<10)return S++,u.call(s,p,f,y,g,b,x);T.apply(this,arguments)}}return u.call(s,p,f,y,g,b,x)}return Object.setPrototypeOf&&Object.setPrototypeOf(h,u),h}(s.read),s.readSync=typeof s.readSync!="function"?s.readSync:function(u){return function(h,p,f,y,g){for(var b=0;;)try{return u.call(s,h,p,f,y,g)}catch(T){if(T.code==="EAGAIN"&&b<10){b++;continue}throw T}}}(s.readSync);function e(u){u.lchmod=function(h,p,f){u.open(h,Nt.O_WRONLY|Nt.O_SYMLINK,p,function(y,g){if(y){f&&f(y);return}u.fchmod(g,p,function(b){u.close(g,function(T){f&&f(b||T)})})})},u.lchmodSync=function(h,p){var f=u.openSync(h,Nt.O_WRONLY|Nt.O_SYMLINK,p),y=!0,g;try{g=u.fchmodSync(f,p),y=!1}finally{if(y)try{u.closeSync(f)}catch{}else u.closeSync(f)}return g}}function t(u){Nt.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(h,p,f,y){u.open(h,Nt.O_SYMLINK,function(g,b){if(g){y&&y(g);return}u.futimes(b,p,f,function(T){u.close(b,function(x){y&&y(T||x)})})})},u.lutimesSync=function(h,p,f){var y=u.openSync(h,Nt.O_SYMLINK),g,b=!0;try{g=u.futimesSync(y,p,f),b=!1}finally{if(b)try{u.closeSync(y)}catch{}else u.closeSync(y)}return g}):u.futimes&&(u.lutimes=function(h,p,f,y){y&&process.nextTick(y)},u.lutimesSync=function(){})}function r(u){return u&&function(h,p,f){return u.call(s,h,p,function(y){l(y)&&(y=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(h,p){try{return u.call(s,h,p)}catch(f){if(!l(f))throw f}}}function n(u){return u&&function(h,p,f,y){return u.call(s,h,p,f,function(g){l(g)&&(g=null),y&&y.apply(this,arguments)})}}function a(u){return u&&function(h,p,f){try{return u.call(s,h,p,f)}catch(y){if(!l(y))throw y}}}function o(u){return u&&function(h,p,f){typeof p=="function"&&(f=p,p=null);function y(g,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),f&&f.apply(this,arguments)}return p?u.call(s,h,p,y):u.call(s,h,y)}}function c(u){return u&&function(h,p){var f=p?u.call(s,h,p):u.call(s,h);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function l(u){if(!u||u.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var xh=E((B1,gh)=>{d();var yh=require("stream").Stream;gh.exports=V0;function V0(s){return{ReadStream:e,WriteStream:t};function e(r,i){if(!(this instanceof e))return new e(r,i);yh.call(this);var n=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),o=0,c=a.length;o<c;o++){var l=a[o];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){n._read()});return}s.open(this.path,this.flags,this.mode,function(u,h){if(u){n.emit("error",u),n.readable=!1;return}n.fd=h,n.emit("open",h),n._read()})}function t(r,i){if(!(this instanceof t))return new t(r,i);yh.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var n=Object.keys(i),a=0,o=n.length;a<o;a++){var c=n[a];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=s.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Th=E(($1,Ph)=>{"use strict";d();Ph.exports=G0;var z0=Object.getPrototypeOf||function(s){return s.__proto__};function G0(s){if(s===null||typeof s!="object")return s;if(s instanceof Object)var e={__proto__:z0(s)};else var e=Object.create(null);return Object.getOwnPropertyNames(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}),e}});var Ne=E((U1,Ia)=>{d();var oe=require("fs"),H0=mh(),K0=xh(),X0=Th(),Ci=require("util"),ye,Ii;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ye=Symbol.for("graceful-fs.queue"),Ii=Symbol.for("graceful-fs.previous")):(ye="___graceful-fs.queue",Ii="___graceful-fs.previous");function J0(){}function wh(s,e){Object.defineProperty(s,ye,{get:function(){return e}})}var Yt=J0;Ci.debuglog?Yt=Ci.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Yt=function(){var s=Ci.format.apply(Ci,arguments);s="GFS4: "+s.split(/\n/).join(`
GFS4: `),console.error(s)});oe[ye]||(bh=global[ye]||[],wh(oe,bh),oe.close=function(s){function e(t,r){return s.call(oe,t,function(i){i||Eh(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(e,Ii,{value:s}),e}(oe.close),oe.closeSync=function(s){function e(t){s.apply(oe,arguments),Eh()}return Object.defineProperty(e,Ii,{value:s}),e}(oe.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Yt(oe[ye]),require("assert").equal(oe[ye].length,0)}));var bh;global[ye]||wh(global,oe[ye]);Ia.exports=Ca(X0(oe));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!oe.__patched&&(Ia.exports=Ca(oe),oe.__patched=!0);function Ca(s){H0(s),s.gracefulify=Ca,s.createReadStream=C,s.createWriteStream=j;var e=s.readFile;s.readFile=t;function t(w,F,B){return typeof F=="function"&&(B=F,F=null),J(w,F,B);function J(se,V,G,Q){return e(se,V,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?Ns([J,[se,V,G],Z,Q||Date.now(),Date.now()]):typeof G=="function"&&G.apply(this,arguments)})}}var r=s.writeFile;s.writeFile=i;function i(w,F,B,J){return typeof B=="function"&&(J=B,B=null),se(w,F,B,J);function se(V,G,Q,Z,ue){return r(V,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Ns([se,[V,G,Q,Z],ee,ue||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var n=s.appendFile;n&&(s.appendFile=a);function a(w,F,B,J){return typeof B=="function"&&(J=B,B=null),se(w,F,B,J);function se(V,G,Q,Z,ue){return n(V,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Ns([se,[V,G,Q,Z],ee,ue||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var o=s.copyFile;o&&(s.copyFile=c);function c(w,F,B,J){return typeof B=="function"&&(J=B,B=0),se(w,F,B,J);function se(V,G,Q,Z,ue){return o(V,G,Q,function(ee){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Ns([se,[V,G,Q,Z],ee,ue||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var l=s.readdir;s.readdir=h;var u=/^v[0-5]\./;function h(w,F,B){typeof F=="function"&&(B=F,F=null);var J=u.test(process.version)?function(G,Q,Z,ue){return l(G,se(G,Q,Z,ue))}:function(G,Q,Z,ue){return l(G,Q,se(G,Q,Z,ue))};return J(w,F,B);function se(V,G,Q,Z){return function(ue,ee){ue&&(ue.code==="EMFILE"||ue.code==="ENFILE")?Ns([J,[V,G,Q],ue,Z||Date.now(),Date.now()]):(ee&&ee.sort&&ee.sort(),typeof Q=="function"&&Q.call(this,ue,ee))}}}if(process.version.substr(0,4)==="v0.8"){var p=K0(s);T=p.ReadStream,S=p.WriteStream}var f=s.ReadStream;f&&(T.prototype=Object.create(f.prototype),T.prototype.open=x);var y=s.WriteStream;y&&(S.prototype=Object.create(y.prototype),S.prototype.open=A),Object.defineProperty(s,"ReadStream",{get:function(){return T},set:function(w){T=w},enumerable:!0,configurable:!0}),Object.defineProperty(s,"WriteStream",{get:function(){return S},set:function(w){S=w},enumerable:!0,configurable:!0});var g=T;Object.defineProperty(s,"FileReadStream",{get:function(){return g},set:function(w){g=w},enumerable:!0,configurable:!0});var b=S;Object.defineProperty(s,"FileWriteStream",{get:function(){return b},set:function(w){b=w},enumerable:!0,configurable:!0});function T(w,F){return this instanceof T?(f.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function x(){var w=this;X(w.path,w.flags,w.mode,function(F,B){F?(w.autoClose&&w.destroy(),w.emit("error",F)):(w.fd=B,w.emit("open",B),w.read())})}function S(w,F){return this instanceof S?(y.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function A(){var w=this;X(w.path,w.flags,w.mode,function(F,B){F?(w.destroy(),w.emit("error",F)):(w.fd=B,w.emit("open",B))})}function C(w,F){return new s.ReadStream(w,F)}function j(w,F){return new s.WriteStream(w,F)}var z=s.open;s.open=X;function X(w,F,B,J){return typeof B=="function"&&(J=B,B=null),se(w,F,B,J);function se(V,G,Q,Z,ue){return z(V,G,Q,function(ee,Hn){ee&&(ee.code==="EMFILE"||ee.code==="ENFILE")?Ns([se,[V,G,Q,Z],ee,ue||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}return s}function Ns(s){Yt("ENQUEUE",s[0].name,s[1]),oe[ye].push(s),Na()}var Ni;function Eh(){for(var s=Date.now(),e=0;e<oe[ye].length;++e)oe[ye][e].length>2&&(oe[ye][e][3]=s,oe[ye][e][4]=s);Na()}function Na(){if(clearTimeout(Ni),Ni=void 0,oe[ye].length!==0){var s=oe[ye].shift(),e=s[0],t=s[1],r=s[2],i=s[3],n=s[4];if(i===void 0)Yt("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){Yt("TIMEOUT",e.name,t);var a=t.pop();typeof a=="function"&&a.call(null,r)}else{var o=Date.now()-n,c=Math.max(n-i,1),l=Math.min(c*1.2,100);o>=l?(Yt("RETRY",e.name,t),e.apply(null,t.concat([i]))):oe[ye].push(s)}Ni===void 0&&(Ni=setTimeout(Na,0))}}});var Qt=E(It=>{"use strict";d();var Sh=_e().fromCallback,De=Ne(),Y0=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(s=>typeof De[s]=="function");Object.assign(It,De);Y0.forEach(s=>{It[s]=Sh(De[s])});It.exists=function(s,e){return typeof e=="function"?De.exists(s,e):new Promise(t=>De.exists(s,t))};It.read=function(s,e,t,r,i,n){return typeof n=="function"?De.read(s,e,t,r,i,n):new Promise((a,o)=>{De.read(s,e,t,r,i,(c,l,u)=>{if(c)return o(c);a({bytesRead:l,buffer:u})})})};It.write=function(s,e,...t){return typeof t[t.length-1]=="function"?De.write(s,e,...t):new Promise((r,i)=>{De.write(s,e,...t,(n,a,o)=>{if(n)return i(n);r({bytesWritten:a,buffer:o})})})};typeof De.writev=="function"&&(It.writev=function(s,e,...t){return typeof t[t.length-1]=="function"?De.writev(s,e,...t):new Promise((r,i)=>{De.writev(s,e,...t,(n,a,o)=>{if(n)return i(n);r({bytesWritten:a,buffers:o})})})});typeof De.realpath.native=="function"?It.realpath.native=Sh(De.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Ah=E((q1,vh)=>{"use strict";d();var Q0=require("path");vh.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Q0.parse(e).root,""))){let r=new Error(`Path contains invalid characters: ${e}`);throw r.code="EINVAL",r}}});var kh=E((W1,ka)=>{"use strict";d();var Ch=Qt(),{checkPath:Nh}=Ah(),Ih=s=>{let e={mode:511};return typeof s=="number"?s:k(k({},e),s).mode};ka.exports.makeDir=async(s,e)=>(Nh(s),Ch.mkdir(s,{mode:Ih(e),recursive:!0}));ka.exports.makeDirSync=(s,e)=>(Nh(s),Ch.mkdirSync(s,{mode:Ih(e),recursive:!0}))});var Ke=E((V1,Lh)=>{"use strict";d();var Z0=_e().fromPromise,{makeDir:eP,makeDirSync:La}=kh(),Oa=Z0(eP);Lh.exports={mkdirs:Oa,mkdirsSync:La,mkdirp:Oa,mkdirpSync:La,ensureDir:Oa,ensureDirSync:La}});var kt=E((z1,_h)=>{"use strict";d();var tP=_e().fromPromise,Oh=Qt();function sP(s){return Oh.access(s).then(()=>!0).catch(()=>!1)}_h.exports={pathExists:tP(sP),pathExistsSync:Oh.existsSync}});var _a=E((G1,Dh)=>{"use strict";d();var Is=Ne();function rP(s,e,t,r){Is.open(s,"r+",(i,n)=>{if(i)return r(i);Is.futimes(n,e,t,a=>{Is.close(n,o=>{r&&r(a||o)})})})}function iP(s,e,t){let r=Is.openSync(s,"r+");return Is.futimesSync(r,e,t),Is.closeSync(r)}Dh.exports={utimesMillis:rP,utimesMillisSync:iP}});var Zt=E((H1,Rh)=>{"use strict";d();var ks=Qt(),de=require("path"),nP=require("util");function aP(s,e,t){let r=t.dereference?i=>ks.stat(i,{bigint:!0}):i=>ks.lstat(i,{bigint:!0});return Promise.all([r(s),r(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,n])=>({srcStat:i,destStat:n}))}function oP(s,e,t){let r,i=t.dereference?a=>ks.statSync(a,{bigint:!0}):a=>ks.lstatSync(a,{bigint:!0}),n=i(s);try{r=i(e)}catch(a){if(a.code==="ENOENT")return{srcStat:n,destStat:null};throw a}return{srcStat:n,destStat:r}}function cP(s,e,t,r,i){nP.callbackify(aP)(s,e,r,(n,a)=>{if(n)return i(n);let{srcStat:o,destStat:c}=a;if(c){if(mr(o,c)){let l=de.basename(s),u=de.basename(e);return t==="move"&&l!==u&&l.toLowerCase()===u.toLowerCase()?i(null,{srcStat:o,destStat:c,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(o.isDirectory()&&!c.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${s}'.`));if(!o.isDirectory()&&c.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${s}'.`))}return o.isDirectory()&&Da(s,e)?i(new Error(ki(s,e,t))):i(null,{srcStat:o,destStat:c})})}function lP(s,e,t,r){let{srcStat:i,destStat:n}=oP(s,e,r);if(n){if(mr(i,n)){let a=de.basename(s),o=de.basename(e);if(t==="move"&&a!==o&&a.toLowerCase()===o.toLowerCase())return{srcStat:i,destStat:n,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!n.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${s}'.`);if(!i.isDirectory()&&n.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${s}'.`)}if(i.isDirectory()&&Da(s,e))throw new Error(ki(s,e,t));return{srcStat:i,destStat:n}}function Mh(s,e,t,r,i){let n=de.resolve(de.dirname(s)),a=de.resolve(de.dirname(t));if(a===n||a===de.parse(a).root)return i();ks.stat(a,{bigint:!0},(o,c)=>o?o.code==="ENOENT"?i():i(o):mr(e,c)?i(new Error(ki(s,t,r))):Mh(s,e,a,r,i))}function Fh(s,e,t,r){let i=de.resolve(de.dirname(s)),n=de.resolve(de.dirname(t));if(n===i||n===de.parse(n).root)return;let a;try{a=ks.statSync(n,{bigint:!0})}catch(o){if(o.code==="ENOENT")return;throw o}if(mr(e,a))throw new Error(ki(s,t,r));return Fh(s,e,n,r)}function mr(s,e){return e.ino&&e.dev&&e.ino===s.ino&&e.dev===s.dev}function Da(s,e){let t=de.resolve(s).split(de.sep).filter(i=>i),r=de.resolve(e).split(de.sep).filter(i=>i);return t.reduce((i,n,a)=>i&&r[a]===n,!0)}function ki(s,e,t){return`Cannot ${t} '${s}' to a subdirectory of itself, '${e}'.`}Rh.exports={checkPaths:cP,checkPathsSync:lP,checkParentPaths:Mh,checkParentPathsSync:Fh,isSrcSubdir:Da,areIdentical:mr}});var zh=E((K1,Vh)=>{"use strict";d();var Me=Ne(),yr=require("path"),uP=Ke().mkdirs,hP=kt().pathExists,pP=_a().utimesMillis,gr=Zt();function fP(s,e,t,r){typeof t=="function"&&!r?(r=t,t={}):typeof t=="function"&&(t={filter:t}),r=r||function(){},t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),gr.checkPaths(s,e,"copy",t,(i,n)=>{if(i)return r(i);let{srcStat:a,destStat:o}=n;gr.checkParentPaths(s,a,e,"copy",c=>c?r(c):t.filter?Uh(Bh,o,s,e,t,r):Bh(o,s,e,t,r))})}function Bh(s,e,t,r,i){let n=yr.dirname(t);hP(n,(a,o)=>{if(a)return i(a);if(o)return Li(s,e,t,r,i);uP(n,c=>c?i(c):Li(s,e,t,r,i))})}function Uh(s,e,t,r,i,n){Promise.resolve(i.filter(t,r)).then(a=>a?s(e,t,r,i,n):n(),a=>n(a))}function dP(s,e,t,r,i){return r.filter?Uh(Li,s,e,t,r,i):Li(s,e,t,r,i)}function Li(s,e,t,r,i){(r.dereference?Me.stat:Me.lstat)(e,(a,o)=>a?i(a):o.isDirectory()?bP(o,s,e,t,r,i):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?mP(o,s,e,t,r,i):o.isSymbolicLink()?SP(s,e,t,r,i):o.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):o.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function mP(s,e,t,r,i,n){return e?yP(s,t,r,i,n):jh(s,t,r,i,n)}function yP(s,e,t,r,i){if(r.overwrite)Me.unlink(t,n=>n?i(n):jh(s,e,t,r,i));else return r.errorOnExist?i(new Error(`'${t}' already exists`)):i()}function jh(s,e,t,r,i){Me.copyFile(e,t,n=>n?i(n):r.preserveTimestamps?gP(s.mode,e,t,i):Oi(t,s.mode,i))}function gP(s,e,t,r){return xP(s)?PP(t,s,i=>i?r(i):$h(s,e,t,r)):$h(s,e,t,r)}function xP(s){return(s&128)===0}function PP(s,e,t){return Oi(s,e|128,t)}function $h(s,e,t,r){TP(e,t,i=>i?r(i):Oi(t,s,r))}function Oi(s,e,t){return Me.chmod(s,e,t)}function TP(s,e,t){Me.stat(s,(r,i)=>r?t(r):pP(e,i.atime,i.mtime,t))}function bP(s,e,t,r,i,n){return e?qh(t,r,i,n):EP(s.mode,t,r,i,n)}function EP(s,e,t,r,i){Me.mkdir(t,n=>{if(n)return i(n);qh(e,t,r,a=>a?i(a):Oi(t,s,i))})}function qh(s,e,t,r){Me.readdir(s,(i,n)=>i?r(i):Wh(n,s,e,t,r))}function Wh(s,e,t,r,i){let n=s.pop();return n?wP(s,n,e,t,r,i):i()}function wP(s,e,t,r,i,n){let a=yr.join(t,e),o=yr.join(r,e);gr.checkPaths(a,o,"copy",i,(c,l)=>{if(c)return n(c);let{destStat:u}=l;dP(u,a,o,i,h=>h?n(h):Wh(s,t,r,i,n))})}function SP(s,e,t,r,i){Me.readlink(e,(n,a)=>{if(n)return i(n);if(r.dereference&&(a=yr.resolve(process.cwd(),a)),s)Me.readlink(t,(o,c)=>o?o.code==="EINVAL"||o.code==="UNKNOWN"?Me.symlink(a,t,i):i(o):(r.dereference&&(c=yr.resolve(process.cwd(),c)),gr.isSrcSubdir(a,c)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`)):s.isDirectory()&&gr.isSrcSubdir(c,a)?i(new Error(`Cannot overwrite '${c}' with '${a}'.`)):vP(a,t,i)));else return Me.symlink(a,t,i)})}function vP(s,e,t){Me.unlink(e,r=>r?t(r):Me.symlink(s,e,t))}Vh.exports=fP});var Jh=E((X1,Xh)=>{"use strict";d();var Pe=Ne(),xr=require("path"),AP=Ke().mkdirsSync,CP=_a().utimesMillisSync,Pr=Zt();function NP(s,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:r,destStat:i}=Pr.checkPathsSync(s,e,"copy",t);return Pr.checkParentPathsSync(s,r,e,"copy"),IP(i,s,e,t)}function IP(s,e,t,r){if(r.filter&&!r.filter(e,t))return;let i=xr.dirname(t);return Pe.existsSync(i)||AP(i),Gh(s,e,t,r)}function kP(s,e,t,r){if(!(r.filter&&!r.filter(e,t)))return Gh(s,e,t,r)}function Gh(s,e,t,r){let n=(r.dereference?Pe.statSync:Pe.lstatSync)(e);if(n.isDirectory())return RP(n,s,e,t,r);if(n.isFile()||n.isCharacterDevice()||n.isBlockDevice())return LP(n,s,e,t,r);if(n.isSymbolicLink())return UP(s,e,t,r);throw n.isSocket()?new Error(`Cannot copy a socket file: ${e}`):n.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function LP(s,e,t,r,i){return e?OP(s,t,r,i):Hh(s,t,r,i)}function OP(s,e,t,r){if(r.overwrite)return Pe.unlinkSync(t),Hh(s,e,t,r);if(r.errorOnExist)throw new Error(`'${t}' already exists`)}function Hh(s,e,t,r){return Pe.copyFileSync(e,t),r.preserveTimestamps&&_P(s.mode,e,t),Ma(t,s.mode)}function _P(s,e,t){return DP(s)&&MP(t,s),FP(e,t)}function DP(s){return(s&128)===0}function MP(s,e){return Ma(s,e|128)}function Ma(s,e){return Pe.chmodSync(s,e)}function FP(s,e){let t=Pe.statSync(s);return CP(e,t.atime,t.mtime)}function RP(s,e,t,r,i){return e?Kh(t,r,i):BP(s.mode,t,r,i)}function BP(s,e,t,r){return Pe.mkdirSync(t),Kh(e,t,r),Ma(t,s)}function Kh(s,e,t){Pe.readdirSync(s).forEach(r=>$P(r,s,e,t))}function $P(s,e,t,r){let i=xr.join(e,s),n=xr.join(t,s),{destStat:a}=Pr.checkPathsSync(i,n,"copy",r);return kP(a,i,n,r)}function UP(s,e,t,r){let i=Pe.readlinkSync(e);if(r.dereference&&(i=xr.resolve(process.cwd(),i)),s){let n;try{n=Pe.readlinkSync(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Pe.symlinkSync(i,t);throw a}if(r.dereference&&(n=xr.resolve(process.cwd(),n)),Pr.isSrcSubdir(i,n))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${n}'.`);if(Pe.statSync(t).isDirectory()&&Pr.isSrcSubdir(n,i))throw new Error(`Cannot overwrite '${n}' with '${i}'.`);return jP(i,t)}else return Pe.symlinkSync(i,t)}function jP(s,e){return Pe.unlinkSync(e),Pe.symlinkSync(s,e)}Xh.exports=NP});var _i=E((J1,Yh)=>{"use strict";d();var qP=_e().fromCallback;Yh.exports={copy:qP(zh()),copySync:Jh()}});var ap=E((Y1,np)=>{"use strict";d();var Qh=Ne(),sp=require("path"),re=require("assert"),Tr=process.platform==="win32";function rp(s){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{s[t]=s[t]||Qh[t],t=t+"Sync",s[t]=s[t]||Qh[t]}),s.maxBusyTries=s.maxBusyTries||3}function Fa(s,e,t){let r=0;typeof e=="function"&&(t=e,e={}),re(s,"rimraf: missing path"),re.strictEqual(typeof s,"string","rimraf: path should be a string"),re.strictEqual(typeof t,"function","rimraf: callback function required"),re(e,"rimraf: invalid options argument provided"),re.strictEqual(typeof e,"object","rimraf: options should be object"),rp(e),Zh(s,e,function i(n){if(n){if((n.code==="EBUSY"||n.code==="ENOTEMPTY"||n.code==="EPERM")&&r<e.maxBusyTries){r++;let a=r*100;return setTimeout(()=>Zh(s,e,i),a)}n.code==="ENOENT"&&(n=null)}t(n)})}function Zh(s,e,t){re(s),re(e),re(typeof t=="function"),e.lstat(s,(r,i)=>{if(r&&r.code==="ENOENT")return t(null);if(r&&r.code==="EPERM"&&Tr)return ep(s,e,r,t);if(i&&i.isDirectory())return Di(s,e,r,t);e.unlink(s,n=>{if(n){if(n.code==="ENOENT")return t(null);if(n.code==="EPERM")return Tr?ep(s,e,n,t):Di(s,e,n,t);if(n.code==="EISDIR")return Di(s,e,n,t)}return t(n)})})}function ep(s,e,t,r){re(s),re(e),re(typeof r=="function"),e.chmod(s,438,i=>{i?r(i.code==="ENOENT"?null:t):e.stat(s,(n,a)=>{n?r(n.code==="ENOENT"?null:t):a.isDirectory()?Di(s,e,t,r):e.unlink(s,r)})})}function tp(s,e,t){let r;re(s),re(e);try{e.chmodSync(s,438)}catch(i){if(i.code==="ENOENT")return;throw t}try{r=e.statSync(s)}catch(i){if(i.code==="ENOENT")return;throw t}r.isDirectory()?Mi(s,e,t):e.unlinkSync(s)}function Di(s,e,t,r){re(s),re(e),re(typeof r=="function"),e.rmdir(s,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?WP(s,e,r):i&&i.code==="ENOTDIR"?r(t):r(i)})}function WP(s,e,t){re(s),re(e),re(typeof t=="function"),e.readdir(s,(r,i)=>{if(r)return t(r);let n=i.length,a;if(n===0)return e.rmdir(s,t);i.forEach(o=>{Fa(sp.join(s,o),e,c=>{if(!a){if(c)return t(a=c);--n===0&&e.rmdir(s,t)}})})})}function ip(s,e){let t;e=e||{},rp(e),re(s,"rimraf: missing path"),re.strictEqual(typeof s,"string","rimraf: path should be a string"),re(e,"rimraf: missing options"),re.strictEqual(typeof e,"object","rimraf: options should be object");try{t=e.lstatSync(s)}catch(r){if(r.code==="ENOENT")return;r.code==="EPERM"&&Tr&&tp(s,e,r)}try{t&&t.isDirectory()?Mi(s,e,null):e.unlinkSync(s)}catch(r){if(r.code==="ENOENT")return;if(r.code==="EPERM")return Tr?tp(s,e,r):Mi(s,e,r);if(r.code!=="EISDIR")throw r;Mi(s,e,r)}}function Mi(s,e,t){re(s),re(e);try{e.rmdirSync(s)}catch(r){if(r.code==="ENOTDIR")throw t;if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM")VP(s,e);else if(r.code!=="ENOENT")throw r}}function VP(s,e){if(re(s),re(e),e.readdirSync(s).forEach(t=>ip(sp.join(s,t),e)),Tr){let t=Date.now();do try{return e.rmdirSync(s,e)}catch{}while(Date.now()-t<500)}else return e.rmdirSync(s,e)}np.exports=Fa;Fa.sync=ip});var br=E((Q1,cp)=>{"use strict";d();var Fi=Ne(),zP=_e().fromCallback,op=ap();function GP(s,e){if(Fi.rm)return Fi.rm(s,{recursive:!0,force:!0},e);op(s,e)}function HP(s){if(Fi.rmSync)return Fi.rmSync(s,{recursive:!0,force:!0});op.sync(s)}cp.exports={remove:zP(GP),removeSync:HP}});var yp=E((Z1,mp)=>{"use strict";d();var KP=_e().fromPromise,hp=Qt(),pp=require("path"),fp=Ke(),dp=br(),lp=KP(async function(e){let t;try{t=await hp.readdir(e)}catch{return fp.mkdirs(e)}return Promise.all(t.map(r=>dp.remove(pp.join(e,r))))});function up(s){let e;try{e=hp.readdirSync(s)}catch{return fp.mkdirsSync(s)}e.forEach(t=>{t=pp.join(s,t),dp.removeSync(t)})}mp.exports={emptyDirSync:up,emptydirSync:up,emptyDir:lp,emptydir:lp}});var Tp=E((eA,Pp)=>{"use strict";d();var XP=_e().fromCallback,gp=require("path"),Lt=Ne(),xp=Ke();function JP(s,e){function t(){Lt.writeFile(s,"",r=>{if(r)return e(r);e()})}Lt.stat(s,(r,i)=>{if(!r&&i.isFile())return e();let n=gp.dirname(s);Lt.stat(n,(a,o)=>{if(a)return a.code==="ENOENT"?xp.mkdirs(n,c=>{if(c)return e(c);t()}):e(a);o.isDirectory()?t():Lt.readdir(n,c=>{if(c)return e(c)})})})}function YP(s){let e;try{e=Lt.statSync(s)}catch{}if(e&&e.isFile())return;let t=gp.dirname(s);try{Lt.statSync(t).isDirectory()||Lt.readdirSync(t)}catch(r){if(r&&r.code==="ENOENT")xp.mkdirsSync(t);else throw r}Lt.writeFileSync(s,"")}Pp.exports={createFile:XP(JP),createFileSync:YP}});var vp=E((tA,Sp)=>{"use strict";d();var QP=_e().fromCallback,bp=require("path"),Ot=Ne(),Ep=Ke(),ZP=kt().pathExists,{areIdentical:wp}=Zt();function eT(s,e,t){function r(i,n){Ot.link(i,n,a=>{if(a)return t(a);t(null)})}Ot.lstat(e,(i,n)=>{Ot.lstat(s,(a,o)=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),t(a);if(n&&wp(o,n))return t(null);let c=bp.dirname(e);ZP(c,(l,u)=>{if(l)return t(l);if(u)return r(s,e);Ep.mkdirs(c,h=>{if(h)return t(h);r(s,e)})})})})}function tT(s,e){let t;try{t=Ot.lstatSync(e)}catch{}try{let n=Ot.lstatSync(s);if(t&&wp(n,t))return}catch(n){throw n.message=n.message.replace("lstat","ensureLink"),n}let r=bp.dirname(e);return Ot.existsSync(r)||Ep.mkdirsSync(r),Ot.linkSync(s,e)}Sp.exports={createLink:QP(eT),createLinkSync:tT}});var Cp=E((sA,Ap)=>{"use strict";d();var _t=require("path"),Er=Ne(),sT=kt().pathExists;function rT(s,e,t){if(_t.isAbsolute(s))return Er.lstat(s,r=>r?(r.message=r.message.replace("lstat","ensureSymlink"),t(r)):t(null,{toCwd:s,toDst:s}));{let r=_t.dirname(e),i=_t.join(r,s);return sT(i,(n,a)=>n?t(n):a?t(null,{toCwd:i,toDst:s}):Er.lstat(s,o=>o?(o.message=o.message.replace("lstat","ensureSymlink"),t(o)):t(null,{toCwd:s,toDst:_t.relative(r,s)})))}}function iT(s,e){let t;if(_t.isAbsolute(s)){if(t=Er.existsSync(s),!t)throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}else{let r=_t.dirname(e),i=_t.join(r,s);if(t=Er.existsSync(i),t)return{toCwd:i,toDst:s};if(t=Er.existsSync(s),!t)throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:_t.relative(r,s)}}}Ap.exports={symlinkPaths:rT,symlinkPathsSync:iT}});var kp=E((rA,Ip)=>{"use strict";d();var Np=Ne();function nT(s,e,t){if(t=typeof e=="function"?e:t,e=typeof e=="function"?!1:e,e)return t(null,e);Np.lstat(s,(r,i)=>{if(r)return t(null,"file");e=i&&i.isDirectory()?"dir":"file",t(null,e)})}function aT(s,e){let t;if(e)return e;try{t=Np.lstatSync(s)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}Ip.exports={symlinkType:nT,symlinkTypeSync:aT}});var Bp=E((iA,Rp)=>{"use strict";d();var oT=_e().fromCallback,Op=require("path"),Xe=Qt(),_p=Ke(),cT=_p.mkdirs,lT=_p.mkdirsSync,Dp=Cp(),uT=Dp.symlinkPaths,hT=Dp.symlinkPathsSync,Mp=kp(),pT=Mp.symlinkType,fT=Mp.symlinkTypeSync,dT=kt().pathExists,{areIdentical:Fp}=Zt();function mT(s,e,t,r){r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,Xe.lstat(e,(i,n)=>{!i&&n.isSymbolicLink()?Promise.all([Xe.stat(s),Xe.stat(e)]).then(([a,o])=>{if(Fp(a,o))return r(null);Lp(s,e,t,r)}):Lp(s,e,t,r)})}function Lp(s,e,t,r){uT(s,e,(i,n)=>{if(i)return r(i);s=n.toDst,pT(n.toCwd,t,(a,o)=>{if(a)return r(a);let c=Op.dirname(e);dT(c,(l,u)=>{if(l)return r(l);if(u)return Xe.symlink(s,e,o,r);cT(c,h=>{if(h)return r(h);Xe.symlink(s,e,o,r)})})})})}function yT(s,e,t){let r;try{r=Xe.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){let o=Xe.statSync(s),c=Xe.statSync(e);if(Fp(o,c))return}let i=hT(s,e);s=i.toDst,t=fT(i.toCwd,t);let n=Op.dirname(e);return Xe.existsSync(n)||lT(n),Xe.symlinkSync(s,e,t)}Rp.exports={createSymlink:oT(mT),createSymlinkSync:yT}});var Gp=E((nA,zp)=>{"use strict";d();var{createFile:$p,createFileSync:Up}=Tp(),{createLink:jp,createLinkSync:qp}=vp(),{createSymlink:Wp,createSymlinkSync:Vp}=Bp();zp.exports={createFile:$p,createFileSync:Up,ensureFile:$p,ensureFileSync:Up,createLink:jp,createLinkSync:qp,ensureLink:jp,ensureLinkSync:qp,createSymlink:Wp,createSymlinkSync:Vp,ensureSymlink:Wp,ensureSymlinkSync:Vp}});var Ri=E((aA,Hp)=>{d();function gT(s,{EOL:e=`
`,finalEOL:t=!0,replacer:r=null,spaces:i}={}){let n=t?e:"";return JSON.stringify(s,r,i).replace(/\n/g,e)+n}function xT(s){return Buffer.isBuffer(s)&&(s=s.toString("utf8")),s.replace(/^\uFEFF/,"")}Hp.exports={stringify:gT,stripBom:xT}});var Yp=E((oA,Jp)=>{d();var Ls;try{Ls=Ne()}catch{Ls=require("fs")}var Bi=_e(),{stringify:Kp,stripBom:Xp}=Ri();async function PT(s,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Ls,r="throws"in e?e.throws:!0,i=await Bi.fromCallback(t.readFile)(s,e);i=Xp(i);let n;try{n=JSON.parse(i,e?e.reviver:null)}catch(a){if(r)throw a.message=`${s}: ${a.message}`,a;return null}return n}var TT=Bi.fromPromise(PT);function bT(s,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Ls,r="throws"in e?e.throws:!0;try{let i=t.readFileSync(s,e);return i=Xp(i),JSON.parse(i,e.reviver)}catch(i){if(r)throw i.message=`${s}: ${i.message}`,i;return null}}async function ET(s,e,t={}){let r=t.fs||Ls,i=Kp(e,t);await Bi.fromCallback(r.writeFile)(s,i,t)}var wT=Bi.fromPromise(ET);function ST(s,e,t={}){let r=t.fs||Ls,i=Kp(e,t);return r.writeFileSync(s,i,t)}var vT={readFile:TT,readFileSync:bT,writeFile:wT,writeFileSync:ST};Jp.exports=vT});var Zp=E((cA,Qp)=>{"use strict";d();var $i=Yp();Qp.exports={readJson:$i.readFile,readJsonSync:$i.readFileSync,writeJson:$i.writeFile,writeJsonSync:$i.writeFileSync}});var Ui=E((lA,sf)=>{"use strict";d();var AT=_e().fromCallback,wr=Ne(),ef=require("path"),tf=Ke(),CT=kt().pathExists;function NT(s,e,t,r){typeof t=="function"&&(r=t,t="utf8");let i=ef.dirname(s);CT(i,(n,a)=>{if(n)return r(n);if(a)return wr.writeFile(s,e,t,r);tf.mkdirs(i,o=>{if(o)return r(o);wr.writeFile(s,e,t,r)})})}function IT(s,...e){let t=ef.dirname(s);if(wr.existsSync(t))return wr.writeFileSync(s,...e);tf.mkdirsSync(t),wr.writeFileSync(s,...e)}sf.exports={outputFile:AT(NT),outputFileSync:IT}});var nf=E((uA,rf)=>{"use strict";d();var{stringify:kT}=Ri(),{outputFile:LT}=Ui();async function OT(s,e,t={}){let r=kT(e,t);await LT(s,r,t)}rf.exports=OT});var of=E((hA,af)=>{"use strict";d();var{stringify:_T}=Ri(),{outputFileSync:DT}=Ui();function MT(s,e,t){let r=_T(e,t);DT(s,r,t)}af.exports=MT});var lf=E((pA,cf)=>{"use strict";d();var FT=_e().fromPromise,Ie=Zp();Ie.outputJson=FT(nf());Ie.outputJsonSync=of();Ie.outputJSON=Ie.outputJson;Ie.outputJSONSync=Ie.outputJsonSync;Ie.writeJSON=Ie.writeJson;Ie.writeJSONSync=Ie.writeJsonSync;Ie.readJSON=Ie.readJson;Ie.readJSONSync=Ie.readJsonSync;cf.exports=Ie});var df=E((fA,ff)=>{"use strict";d();var RT=Ne(),Ba=require("path"),BT=_i().copy,pf=br().remove,$T=Ke().mkdirp,UT=kt().pathExists,uf=Zt();function jT(s,e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let i=t.overwrite||t.clobber||!1;uf.checkPaths(s,e,"move",t,(n,a)=>{if(n)return r(n);let{srcStat:o,isChangingCase:c=!1}=a;uf.checkParentPaths(s,o,e,"move",l=>{if(l)return r(l);if(qT(e))return hf(s,e,i,c,r);$T(Ba.dirname(e),u=>u?r(u):hf(s,e,i,c,r))})})}function qT(s){let e=Ba.dirname(s);return Ba.parse(e).root===e}function hf(s,e,t,r,i){if(r)return Ra(s,e,t,i);if(t)return pf(e,n=>n?i(n):Ra(s,e,t,i));UT(e,(n,a)=>n?i(n):a?i(new Error("dest already exists.")):Ra(s,e,t,i))}function Ra(s,e,t,r){RT.rename(s,e,i=>i?i.code!=="EXDEV"?r(i):WT(s,e,t,r):r())}function WT(s,e,t,r){BT(s,e,{overwrite:t,errorOnExist:!0},n=>n?r(n):pf(s,r))}ff.exports=jT});var Pf=E((dA,xf)=>{"use strict";d();var yf=Ne(),Ua=require("path"),VT=_i().copySync,gf=br().removeSync,zT=Ke().mkdirpSync,mf=Zt();function GT(s,e,t){t=t||{};let r=t.overwrite||t.clobber||!1,{srcStat:i,isChangingCase:n=!1}=mf.checkPathsSync(s,e,"move",t);return mf.checkParentPathsSync(s,i,e,"move"),HT(e)||zT(Ua.dirname(e)),KT(s,e,r,n)}function HT(s){let e=Ua.dirname(s);return Ua.parse(e).root===e}function KT(s,e,t,r){if(r)return $a(s,e,t);if(t)return gf(e),$a(s,e,t);if(yf.existsSync(e))throw new Error("dest already exists.");return $a(s,e,t)}function $a(s,e,t){try{yf.renameSync(s,e)}catch(r){if(r.code!=="EXDEV")throw r;return XT(s,e,t)}}function XT(s,e,t){return VT(s,e,{overwrite:t,errorOnExist:!0}),gf(s)}xf.exports=GT});var bf=E((mA,Tf)=>{"use strict";d();var JT=_e().fromCallback;Tf.exports={move:JT(df()),moveSync:Pf()}});var ja=E((yA,Ef)=>{"use strict";d();Ef.exports=k(k(k(k(k(k(k(k(k(k({},Qt()),_i()),yp()),Gp()),lf()),Ke()),bf()),Ui()),kt()),br())});var Wa=E(Te=>{"use strict";d();var wf=Te&&Te.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator];return e?e.call(s):typeof __values=="function"?__values(s):s[Symbol.iterator]()},Os=Te&&Te.__await||function(s){return this instanceof Os?(this.v=s,this):new Os(s)},YT=Te&&Te.__asyncGenerator||function(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(s,e||[]),i,n=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){r[p]&&(i[p]=function(f){return new Promise(function(y,g){n.push([p,f,y,g])>1||o(p,f)})})}function o(p,f){try{c(r[p](f))}catch(y){h(n[0][3],y)}}function c(p){p.value instanceof Os?Promise.resolve(p.value.v).then(l,u):h(n[0][2],p)}function l(p){o("next",p)}function u(p){o("throw",p)}function h(p,f){p(f),n.shift(),n.length&&o(n[0][0],n[0][1])}};Object.defineProperty(Te,"__esModule",{value:!0});var QT=require("stream"),qa=class extends QT.Readable{constructor(e){super(),this._str=e,this._done=!1}_read(){this._done||(this._done=!0,this.push(this._str),this.push(null))}};Te.StringStream=qa;function ZT(s,e="utf8"){return new Promise((t,r)=>{s.setEncoding(e);let i="";s.on("data",function(n){i+=n}),s.on("end",function(){t(i)}),s.on("error",function(n){r(n)})})}Te.readableToString=ZT;function eb(s){return YT(this,arguments,function*(){if(!Symbol.asyncIterator)throw new Error("Current JavaScript engine does not support asynchronous iterables");if(!(Symbol.asyncIterator in s))throw new Error("Parameter is not an asynchronous iterable");let t="";try{for(var r=wf(s),i;i=yield Os(r.next()),!i.done;){t+=yield Os(i.value);let c;for(;(c=t.indexOf(`
`))>=0;)yield t.slice(0,c+1),t=t.slice(c+1)}}catch(o){n={error:o}}finally{try{i&&!i.done&&(a=r.return)&&(yield Os(a.call(r)))}finally{if(n)throw n.error}}t.length>0&&(yield t);var n,a})}Te.chunksToLinesAsync=eb;async function tb(s){let e=new Array;try{for(var t=wf(s),r;r=await t.next(),!r.done;){let a=await r.value;e.push(a)}}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=t.return)&&await n.call(t)}finally{if(i)throw i.error}}return e;var i,n}Te.asyncIterableToArray=tb;var sb=/\r?\n$/u;function rb(s){let e=sb.exec(s);return e?s.slice(0,e.index):s}Te.chomp=rb;function ib(s,e,t="utf8"){return Sf(s,r=>s.write(e,t,r))}Te.streamWrite=ib;function nb(s){return Sf(s,e=>s.end(e))}Te.streamEnd=nb;function Sf(s,e){return new Promise((t,r)=>{let i=a=>{s.removeListener("error",i),r(a)};s.addListener("error",i),e(()=>{s.removeListener("error",i),t(void 0)})})}function ab(s){return new Promise((e,t)=>{s.once("exit",(r,i)=>{r===0?e(void 0):t(new Error("Exit with error code: "+r))}),s.once("error",r=>{t(r)})})}Te.onExit=ab});var $f=E((kA,Bf)=>{d();Bf.exports=function(s,e){for(var t=[],r=0;r<s.length;r++){var i=e(s[r],r);mb(i)?t.push.apply(t,i):t.push(i)}return t};var mb=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}});var Vf=E((LA,Wf)=>{"use strict";d();Wf.exports=jf;function jf(s,e,t){s instanceof RegExp&&(s=Uf(s,t)),e instanceof RegExp&&(e=Uf(e,t));var r=qf(s,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+s.length,r[1]),post:t.slice(r[1]+e.length)}}function Uf(s,e){var t=e.match(s);return t?t[0]:null}jf.range=qf;function qf(s,e,t){var r,i,n,a,o,c=t.indexOf(s),l=t.indexOf(e,c+1),u=c;if(c>=0&&l>0){if(s===e)return[c,l];for(r=[],n=t.length;u>=0&&!o;)u==c?(r.push(u),c=t.indexOf(s,u+1)):r.length==1?o=[r.pop(),l]:(i=r.pop(),i<n&&(n=i,a=l),l=t.indexOf(e,u+1)),u=c<l&&c>=0?c:l;r.length&&(o=[n,a])}return o}});var Qf=E((OA,Yf)=>{d();var yb=$f(),zf=Vf();Yf.exports=Pb;var Gf="\0SLASH"+Math.random()+"\0",Hf="\0OPEN"+Math.random()+"\0",Ka="\0CLOSE"+Math.random()+"\0",Kf="\0COMMA"+Math.random()+"\0",Xf="\0PERIOD"+Math.random()+"\0";function Ha(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function gb(s){return s.split("\\\\").join(Gf).split("\\{").join(Hf).split("\\}").join(Ka).split("\\,").join(Kf).split("\\.").join(Xf)}function xb(s){return s.split(Gf).join("\\").split(Hf).join("{").split(Ka).join("}").split(Kf).join(",").split(Xf).join(".")}function Jf(s){if(!s)return[""];var e=[],t=zf("{","}",s);if(!t)return s.split(",");var r=t.pre,i=t.body,n=t.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var o=Jf(n);return n.length&&(a[a.length-1]+=o.shift(),a.push.apply(a,o)),e.push.apply(e,a),e}function Pb(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),Ms(gb(s),!0).map(xb)):[]}function Tb(s){return"{"+s+"}"}function bb(s){return/^-?0\d/.test(s)}function Eb(s,e){return s<=e}function wb(s,e){return s>=e}function Ms(s,e){var t=[],r=zf("{","}",s);if(!r||/\$$/.test(r.pre))return[s];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),n=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=i||n,o=r.body.indexOf(",")>=0;if(!a&&!o)return r.post.match(/,.*\}/)?(s=r.pre+"{"+r.body+Ka+r.post,Ms(s)):[s];var c;if(a)c=r.body.split(/\.\./);else if(c=Jf(r.body),c.length===1&&(c=Ms(c[0],!1).map(Tb),c.length===1)){var u=r.post.length?Ms(r.post,!1):[""];return u.map(function(B){return r.pre+c[0]+B})}var l=r.pre,u=r.post.length?Ms(r.post,!1):[""],h;if(a){var p=Ha(c[0]),f=Ha(c[1]),y=Math.max(c[0].length,c[1].length),g=c.length==3?Math.abs(Ha(c[2])):1,b=Eb,T=f<p;T&&(g*=-1,b=wb);var x=c.some(bb);h=[];for(var S=p;b(S,f);S+=g){var A;if(n)A=String.fromCharCode(S),A==="\\"&&(A="");else if(A=String(S),x){var C=y-A.length;if(C>0){var j=new Array(C+1).join("0");S<0?A="-"+j+A.slice(1):A=j+A}}h.push(A)}}else h=yb(c,function(F){return Ms(F,!1)});for(var z=0;z<h.length;z++)for(var X=0;X<u.length;X++){var w=l+h[z]+u[X];(!e||a||w)&&t.push(w)}return t}});var Qa=E((_A,rd)=>{d();rd.exports=Ue;Ue.Minimatch=ge;var Ar=function(){try{return require("path")}catch{}}()||{sep:"/"};Ue.sep=Ar.sep;var Ya=Ue.GLOBSTAR=ge.GLOBSTAR={},Sb=Qf(),Zf={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Xa="[^/]",Ja=Xa+"*?",vb="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ab="(?:(?!(?:\\/|^)\\.).)*?",ed=Cb("().*{}+?[]^$\\!");function Cb(s){return s.split("").reduce(function(e,t){return e[t]=!0,e},{})}var td=/\/+/;Ue.filter=Nb;function Nb(s,e){return e=e||{},function(t,r,i){return Ue(t,s,e)}}function Mt(s,e){e=e||{};var t={};return Object.keys(s).forEach(function(r){t[r]=s[r]}),Object.keys(e).forEach(function(r){t[r]=e[r]}),t}Ue.defaults=function(s){if(!s||typeof s!="object"||!Object.keys(s).length)return Ue;var e=Ue,t=function(i,n,a){return e(i,n,Mt(s,a))};return t.Minimatch=function(i,n){return new e.Minimatch(i,Mt(s,n))},t.Minimatch.defaults=function(i){return e.defaults(Mt(s,i)).Minimatch},t.filter=function(i,n){return e.filter(i,Mt(s,n))},t.defaults=function(i){return e.defaults(Mt(s,i))},t.makeRe=function(i,n){return e.makeRe(i,Mt(s,n))},t.braceExpand=function(i,n){return e.braceExpand(i,Mt(s,n))},t.match=function(r,i,n){return e.match(r,i,Mt(s,n))},t};ge.defaults=function(s){return Ue.defaults(s).Minimatch};function Ue(s,e,t){return Yi(e),t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:new ge(e,t).match(s)}function ge(s,e){if(!(this instanceof ge))return new ge(s,e);Yi(s),e||(e={}),s=s.trim(),!e.allowWindowsEscape&&Ar.sep!=="/"&&(s=s.split(Ar.sep).join("/")),this.options=e,this.set=[],this.pattern=s,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}ge.prototype.debug=function(){};ge.prototype.make=Ib;function Ib(){var s=this.pattern,e=this.options;if(!e.nocomment&&s.charAt(0)==="#"){this.comment=!0;return}if(!s){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(r){return r.split(td)}),this.debug(this.pattern,t),t=t.map(function(r,i,n){return r.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}ge.prototype.parseNegate=kb;function kb(){var s=this.pattern,e=!1,t=this.options,r=0;if(!t.nonegate){for(var i=0,n=s.length;i<n&&s.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=s.substr(r)),this.negate=e}}Ue.braceExpand=function(s,e){return sd(s,e)};ge.prototype.braceExpand=sd;function sd(s,e){return e||(this instanceof ge?e=this.options:e={}),s=typeof s>"u"?this.pattern:s,Yi(s),e.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:Sb(s)}var Lb=1024*64,Yi=function(s){if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>Lb)throw new TypeError("pattern is too long")};ge.prototype.parse=Ob;var Ji={};function Ob(s,e){Yi(s);var t=this.options;if(s==="**")if(t.noglobstar)s="*";else return Ya;if(s==="")return"";var r="",i=!!t.nocase,n=!1,a=[],o=[],c,l=!1,u=-1,h=-1,p=s.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function y(){if(c){switch(c){case"*":r+=Ja,i=!0;break;case"?":r+=Xa,i=!0;break;default:r+="\\"+c;break}f.debug("clearStateChar %j %j",c,r),c=!1}}for(var g=0,b=s.length,T;g<b&&(T=s.charAt(g));g++){if(this.debug("%s	%s %s %j",s,g,r,T),n&&ed[T]){r+="\\"+T,n=!1;continue}switch(T){case"/":return!1;case"\\":y(),n=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",s,g,r,T),l){this.debug("  in class"),T==="!"&&g===h+1&&(T="^"),r+=T;continue}f.debug("call clearStateChar %j",c),y(),c=T,t.noext&&y();continue;case"(":if(l){r+="(";continue}if(!c){r+="\\(";continue}a.push({type:c,start:g-1,reStart:r.length,open:Zf[c].open,close:Zf[c].close}),r+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,r),c=!1;continue;case")":if(l||!a.length){r+="\\)";continue}y(),i=!0;var x=a.pop();r+=x.close,x.type==="!"&&o.push(x),x.reEnd=r.length;continue;case"|":if(l||!a.length||n){r+="\\|",n=!1;continue}y(),r+="|";continue;case"[":if(y(),l){r+="\\"+T;continue}l=!0,h=g,u=r.length,r+=T;continue;case"]":if(g===h+1||!l){r+="\\"+T,n=!1;continue}var S=s.substring(h+1,g);try{RegExp("["+S+"]")}catch{var A=this.parse(S,Ji);r=r.substr(0,u)+"\\["+A[0]+"\\]",i=i||A[1],l=!1;continue}i=!0,l=!1,r+=T;continue;default:y(),n?n=!1:ed[T]&&!(T==="^"&&l)&&(r+="\\"),r+=T}}for(l&&(S=s.substr(h+1),A=this.parse(S,Ji),r=r.substr(0,u)+"\\["+A[0],i=i||A[1]),x=a.pop();x;x=a.pop()){var C=r.slice(x.reStart+x.open.length);this.debug("setting tail",r,x),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Hn,Uc,Kn){return Kn||(Kn="\\"),Uc+Uc+Kn+"|"}),this.debug(`tail=%j
   %s`,C,C,x,r);var j=x.type==="*"?Ja:x.type==="?"?Xa:"\\"+x.type;i=!0,r=r.slice(0,x.reStart)+j+"\\("+C}y(),n&&(r+="\\\\");var z=!1;switch(r.charAt(0)){case"[":case".":case"(":z=!0}for(var X=o.length-1;X>-1;X--){var w=o[X],F=r.slice(0,w.reStart),B=r.slice(w.reStart,w.reEnd-8),J=r.slice(w.reEnd-8,w.reEnd),se=r.slice(w.reEnd);J+=se;var V=F.split("(").length-1,G=se;for(g=0;g<V;g++)G=G.replace(/\)[+*?]?/,"");se=G;var Q="";se===""&&e!==Ji&&(Q="$");var Z=F+B+se+Q+J;r=Z}if(r!==""&&i&&(r="(?=.)"+r),z&&(r=p+r),e===Ji)return[r,i];if(!i)return Db(s);var ue=t.nocase?"i":"";try{var ee=new RegExp("^"+r+"$",ue)}catch{return new RegExp("$.")}return ee._glob=s,ee._src=r,ee}Ue.makeRe=function(s,e){return new ge(s,e||{}).makeRe()};ge.prototype.makeRe=_b;function _b(){if(this.regexp||this.regexp===!1)return this.regexp;var s=this.set;if(!s.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?Ja:e.dot?vb:Ab,r=e.nocase?"i":"",i=s.map(function(n){return n.map(function(a){return a===Ya?t:typeof a=="string"?Mb(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}Ue.match=function(s,e,t){t=t||{};var r=new ge(e,t);return s=s.filter(function(i){return r.match(i)}),r.options.nonull&&!s.length&&s.push(e),s};ge.prototype.match=function(e,t){if(typeof t>"u"&&(t=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;Ar.sep!=="/"&&(e=e.split(Ar.sep).join("/")),e=e.split(td),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var n,a;for(a=e.length-1;a>=0&&(n=e[a],!n);a--);for(a=0;a<i.length;a++){var o=i[a],c=e;r.matchBase&&o.length===1&&(c=[n]);var l=this.matchOne(c,o,t);if(l)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};ge.prototype.matchOne=function(s,e,t){var r=this.options;this.debug("matchOne",{this:this,file:s,pattern:e}),this.debug("matchOne",s.length,e.length);for(var i=0,n=0,a=s.length,o=e.length;i<a&&n<o;i++,n++){this.debug("matchOne loop");var c=e[n],l=s[i];if(this.debug(e,c,l),c===!1)return!1;if(c===Ya){this.debug("GLOBSTAR",[e,c,l]);var u=i,h=n+1;if(h===o){for(this.debug("** at the end");i<a;i++)if(s[i]==="."||s[i]===".."||!r.dot&&s[i].charAt(0)===".")return!1;return!0}for(;u<a;){var p=s[u];if(this.debug(`
globstar while`,s,u,e,h,p),this.matchOne(s.slice(u),e.slice(h),t))return this.debug("globstar found match!",u,a,p),!0;if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",s,u,e,h);break}this.debug("globstar swallow a segment, and continue"),u++}return!!(t&&(this.debug(`
>>> no match, partial?`,s,u,e,h),u===a))}var f;if(typeof c=="string"?(f=l===c,this.debug("string match",c,l,f)):(f=l.match(c),this.debug("pattern match",c,l,f)),!f)return!1}if(i===a&&n===o)return!0;if(i===a)return t;if(n===o)return i===a-1&&s[i]==="";throw new Error("wtf?")};function Db(s){return s.replace(/\\(.)/g,"$1")}function Mb(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var zd=E(Rr=>{"use strict";d();Object.defineProperty(Rr,"__esModule",{value:!0});function oo(s,e){if(s==null)return{};var t={},r=Object.keys(s),i,n;for(n=0;n<r.length;n++)i=r[n],!(e.indexOf(i)>=0)&&(t[i]=s[i]);return t}var mt=class{constructor(e,t,r){this.line=void 0,this.column=void 0,this.index=void 0,this.line=e,this.column=t,this.index=r}},qs=class{constructor(e,t){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=e,this.end=t}};function Ee(s,e){let{line:t,column:r,index:i}=s;return new mt(t,r+e,i+e)}var co=Object.freeze({SyntaxError:"BABEL_PARSER_SYNTAX_ERROR",SourceTypeModuleError:"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED"}),Fb=(s,e=s.length-1)=>({get(){return s.reduce((t,r)=>t[r],this)},set(t){s.reduce((r,i,n)=>n===e?r[i]=t:r[i],this)}}),Rb=(s,e,t)=>Object.keys(t).map(r=>[r,t[r]]).filter(([,r])=>!!r).map(([r,i])=>[r,typeof i=="function"?{value:i,enumerable:!1}:typeof i.reflect=="string"?Object.assign({},i,Fb(i.reflect.split("."))):i]).reduce((r,[i,n])=>Object.defineProperty(r,i,Object.assign({configurable:!0},n)),Object.assign(new s,e)),Bb=s=>({ImportMetaOutsideModule:s(`import.meta may appear only with 'sourceType: "module"'`,{code:co.SourceTypeModuleError}),ImportOutsideModule:s(`'import' and 'export' may appear only with 'sourceType: "module"'`,{code:co.SourceTypeModuleError})}),id={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},lo=({type:s,prefix:e})=>s==="UpdateExpression"?id.UpdateExpression[String(e)]:id[s],$b=s=>({AccessorIsGenerator:s(({kind:e})=>`A ${e}ter cannot be a generator.`),ArgumentsInClass:s("'arguments' is only allowed in functions and class methods."),AsyncFunctionInSingleStatementContext:s("Async functions can only be declared at the top level or inside a block."),AwaitBindingIdentifier:s("Can not use 'await' as identifier inside an async function."),AwaitBindingIdentifierInStaticBlock:s("Can not use 'await' as identifier inside a static block."),AwaitExpressionFormalParameter:s("'await' is not allowed in async function parameters."),AwaitNotInAsyncContext:s("'await' is only allowed within async functions and at the top levels of modules."),AwaitNotInAsyncFunction:s("'await' is only allowed within async functions."),BadGetterArity:s("A 'get' accesor must not have any formal parameters."),BadSetterArity:s("A 'set' accesor must have exactly one formal parameter."),BadSetterRestParameter:s("A 'set' accesor function argument must not be a rest parameter."),ConstructorClassField:s("Classes may not have a field named 'constructor'."),ConstructorClassPrivateField:s("Classes may not have a private field named '#constructor'."),ConstructorIsAccessor:s("Class constructor may not be an accessor."),ConstructorIsAsync:s("Constructor can't be an async function."),ConstructorIsGenerator:s("Constructor can't be a generator."),DeclarationMissingInitializer:s(({kind:e})=>`Missing initializer in ${e} declaration.`),DecoratorBeforeExport:s("Decorators must be placed *before* the 'export' keyword. You can set the 'decoratorsBeforeExport' option to false to use the 'export @decorator class {}' syntax."),DecoratorConstructor:s("Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?"),DecoratorExportClass:s("Using the export keyword between a decorator and a class is not allowed. Please use `export @dec class` instead."),DecoratorSemicolon:s("Decorators must not be followed by a semicolon."),DecoratorStaticBlock:s("Decorators can't be used with a static block."),DeletePrivateField:s("Deleting a private field is not allowed."),DestructureNamedImport:s("ES2015 named imports do not destructure. Use another statement for destructuring after the import."),DuplicateConstructor:s("Duplicate constructor in the same class."),DuplicateDefaultExport:s("Only one default export allowed per module."),DuplicateExport:s(({exportName:e})=>`\`${e}\` has already been exported. Exported identifiers must be unique.`),DuplicateProto:s("Redefinition of __proto__ property."),DuplicateRegExpFlags:s("Duplicate regular expression flag."),ElementAfterRest:s("Rest element must be last element."),EscapedCharNotAnIdentifier:s("Invalid Unicode escape."),ExportBindingIsString:s(({localName:e,exportName:t})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${e}' as '${t}' } from 'some-module'\`?`),ExportDefaultFromAsIdentifier:s("'from' is not allowed as an identifier after 'export default'."),ForInOfLoopInitializer:s(({type:e})=>`'${e==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`),ForOfAsync:s("The left-hand side of a for-of loop may not be 'async'."),ForOfLet:s("The left-hand side of a for-of loop may not start with 'let'."),GeneratorInSingleStatementContext:s("Generators can only be declared at the top level or inside a block."),IllegalBreakContinue:s(({type:e})=>`Unsyntactic ${e==="BreakStatement"?"break":"continue"}.`),IllegalLanguageModeDirective:s("Illegal 'use strict' directive in function with non-simple parameter list."),IllegalReturn:s("'return' outside of function."),ImportBindingIsString:s(({importName:e})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${e}" as foo }\`?`),ImportCallArgumentTrailingComma:s("Trailing comma is disallowed inside import(...) arguments."),ImportCallArity:s(({maxArgumentCount:e})=>`\`import()\` requires exactly ${e===1?"one argument":"one or two arguments"}.`),ImportCallNotNewExpression:s("Cannot use new with import(...)."),ImportCallSpreadArgument:s("`...` is not allowed in `import()`."),IncompatibleRegExpUVFlags:s("The 'u' and 'v' regular expression flags cannot be enabled at the same time."),InvalidBigIntLiteral:s("Invalid BigIntLiteral."),InvalidCodePoint:s("Code point out of bounds."),InvalidCoverInitializedName:s("Invalid shorthand property initializer."),InvalidDecimal:s("Invalid decimal."),InvalidDigit:s(({radix:e})=>`Expected number in radix ${e}.`),InvalidEscapeSequence:s("Bad character escape sequence."),InvalidEscapeSequenceTemplate:s("Invalid escape sequence in template."),InvalidEscapedReservedWord:s(({reservedWord:e})=>`Escape sequence in keyword ${e}.`),InvalidIdentifier:s(({identifierName:e})=>`Invalid identifier ${e}.`),InvalidLhs:s(({ancestor:e})=>`Invalid left-hand side in ${lo(e)}.`),InvalidLhsBinding:s(({ancestor:e})=>`Binding invalid left-hand side in ${lo(e)}.`),InvalidNumber:s("Invalid number."),InvalidOrMissingExponent:s("Floating-point numbers require a valid exponent after the 'e'."),InvalidOrUnexpectedToken:s(({unexpected:e})=>`Unexpected character '${e}'.`),InvalidParenthesizedAssignment:s("Invalid parenthesized assignment pattern."),InvalidPrivateFieldResolution:s(({identifierName:e})=>`Private name #${e} is not defined.`),InvalidPropertyBindingPattern:s("Binding member expression."),InvalidRecordProperty:s("Only properties and spread elements are allowed in record definitions."),InvalidRestAssignmentPattern:s("Invalid rest operator's argument."),LabelRedeclaration:s(({labelName:e})=>`Label '${e}' is already declared.`),LetInLexicalBinding:s("'let' is not allowed to be used as a name in 'let' or 'const' declarations."),LineTerminatorBeforeArrow:s("No line break is allowed before '=>'."),MalformedRegExpFlags:s("Invalid regular expression flag."),MissingClassName:s("A class name is required."),MissingEqInAssignment:s("Only '=' operator can be used for specifying default value."),MissingSemicolon:s("Missing semicolon."),MissingPlugin:s(({missingPlugin:e})=>`This experimental syntax requires enabling the parser plugin: ${e.map(t=>JSON.stringify(t)).join(", ")}.`),MissingOneOfPlugins:s(({missingPlugin:e})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${e.map(t=>JSON.stringify(t)).join(", ")}.`),MissingUnicodeEscape:s("Expecting Unicode escape sequence \\uXXXX."),MixingCoalesceWithLogical:s("Nullish coalescing operator(??) requires parens when mixing with logical operators."),ModuleAttributeDifferentFromType:s("The only accepted module attribute is `type`."),ModuleAttributeInvalidValue:s("Only string literals are allowed as module attribute values."),ModuleAttributesWithDuplicateKeys:s(({key:e})=>`Duplicate key "${e}" is not allowed in module attributes.`),ModuleExportNameHasLoneSurrogate:s(({surrogateCharCode:e})=>`An export name cannot include a lone surrogate, found '\\u${e.toString(16)}'.`),ModuleExportUndefined:s(({localName:e})=>`Export '${e}' is not defined.`),MultipleDefaultsInSwitch:s("Multiple default clauses."),NewlineAfterThrow:s("Illegal newline after throw."),NoCatchOrFinally:s("Missing catch or finally clause."),NumberIdentifier:s("Identifier directly after number."),NumericSeparatorInEscapeSequence:s("Numeric separators are not allowed inside unicode escape sequences or hex escape sequences."),ObsoleteAwaitStar:s("'await*' has been removed from the async functions proposal. Use Promise.all() instead."),OptionalChainingNoNew:s("Constructors in/after an Optional Chain are not allowed."),OptionalChainingNoTemplate:s("Tagged Template Literals are not allowed in optionalChain."),OverrideOnConstructor:s("'override' modifier cannot appear on a constructor declaration."),ParamDupe:s("Argument name clash."),PatternHasAccessor:s("Object pattern can't contain getter or setter."),PatternHasMethod:s("Object pattern can't contain methods."),PrivateInExpectedIn:s(({identifierName:e})=>`Private names are only allowed in property accesses (\`obj.#${e}\`) or in \`in\` expressions (\`#${e} in obj\`).`),PrivateNameRedeclaration:s(({identifierName:e})=>`Duplicate private name #${e}.`),RecordExpressionBarIncorrectEndSyntaxType:s("Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'."),RecordExpressionBarIncorrectStartSyntaxType:s("Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'."),RecordExpressionHashIncorrectStartSyntaxType:s("Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'."),RecordNoProto:s("'__proto__' is not allowed in Record expressions."),RestTrailingComma:s("Unexpected trailing comma after rest element."),SloppyFunction:s("In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement."),StaticPrototype:s("Classes may not have static property named prototype."),SuperNotAllowed:s("`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?"),SuperPrivateField:s("Private fields can't be accessed on super."),TrailingDecorator:s("Decorators must be attached to a class element."),TupleExpressionBarIncorrectEndSyntaxType:s("Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'."),TupleExpressionBarIncorrectStartSyntaxType:s("Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'."),TupleExpressionHashIncorrectStartSyntaxType:s("Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'."),UnexpectedArgumentPlaceholder:s("Unexpected argument placeholder."),UnexpectedAwaitAfterPipelineBody:s('Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.'),UnexpectedDigitAfterHash:s("Unexpected digit after hash token."),UnexpectedImportExport:s("'import' and 'export' may only appear at the top level."),UnexpectedKeyword:s(({keyword:e})=>`Unexpected keyword '${e}'.`),UnexpectedLeadingDecorator:s("Leading decorators must be attached to a class declaration."),UnexpectedLexicalDeclaration:s("Lexical declaration cannot appear in a single-statement context."),UnexpectedNewTarget:s("`new.target` can only be used in functions or class properties."),UnexpectedNumericSeparator:s("A numeric separator is only allowed between two digits."),UnexpectedPrivateField:s("Unexpected private name."),UnexpectedReservedWord:s(({reservedWord:e})=>`Unexpected reserved word '${e}'.`),UnexpectedSuper:s("'super' is only allowed in object methods and classes."),UnexpectedToken:s(({expected:e,unexpected:t})=>`Unexpected token${t?` '${t}'.`:""}${e?`, expected "${e}"`:""}`),UnexpectedTokenUnaryExponentiation:s("Illegal expression. Wrap left hand side or entire exponentiation in parentheses."),UnsupportedBind:s("Binding should be performed on object property."),UnsupportedDecoratorExport:s("A decorated export must export a class declaration."),UnsupportedDefaultExport:s("Only expressions, functions or classes are allowed as the `default` export."),UnsupportedImport:s("`import` can only be used in `import()` or `import.meta`."),UnsupportedMetaProperty:s(({target:e,onlyValidPropertyName:t})=>`The only valid meta property for ${e} is ${e}.${t}.`),UnsupportedParameterDecorator:s("Decorators cannot be used to decorate parameters."),UnsupportedPropertyDecorator:s("Decorators cannot be used to decorate object literal properties."),UnsupportedSuper:s("'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop])."),UnterminatedComment:s("Unterminated comment."),UnterminatedRegExp:s("Unterminated regular expression."),UnterminatedString:s("Unterminated string constant."),UnterminatedTemplate:s("Unterminated template."),VarRedeclaration:s(({identifierName:e})=>`Identifier '${e}' has already been declared.`),YieldBindingIdentifier:s("Can not use 'yield' as identifier inside a generator."),YieldInParameter:s("Yield expression is not allowed in formal parameters."),ZeroDigitNumericSeparator:s("Numeric separator can not be used after leading 0.")}),Ub=s=>({StrictDelete:s("Deleting local variable in strict mode."),StrictEvalArguments:s(({referenceName:e})=>`Assigning to '${e}' in strict mode.`),StrictEvalArgumentsBinding:s(({bindingName:e})=>`Binding '${e}' in strict mode.`),StrictFunction:s("In strict mode code, functions can only be declared at top level or inside a block."),StrictNumericEscape:s("The only valid numeric escape in strict mode is '\\0'."),StrictOctalLiteral:s("Legacy octal literals are not allowed in strict mode."),StrictWith:s("'with' in strict mode.")}),jb=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),qb=s=>({PipeBodyIsTighter:s("Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence."),PipeTopicRequiresHackPipes:s('Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'),PipeTopicUnbound:s("Topic reference is unbound; it must be inside a pipe body."),PipeTopicUnconfiguredToken:s(({token:e})=>`Invalid topic token ${e}. In order to use ${e} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${e}" }.`),PipeTopicUnused:s("Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once."),PipeUnparenthesizedBody:s(({type:e})=>`Hack-style pipe body cannot be an unparenthesized ${lo({type:e})}; please wrap it in parentheses.`),PipelineBodyNoArrow:s('Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.'),PipelineBodySequenceExpression:s("Pipeline body may not be a comma-separated sequence expression."),PipelineHeadSequenceExpression:s("Pipeline head should not be a comma-separated sequence expression."),PipelineTopicUnused:s("Pipeline is in topic style but does not use topic reference."),PrimaryTopicNotAllowed:s("Topic reference was used in a lexical context without topic binding."),PrimaryTopicRequiresSmartPipeline:s('Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.')}),Wb=["toMessage"];function Vb(s){let{toMessage:e}=s,t=oo(s,Wb);return function r({loc:i,details:n}){return Rb(SyntaxError,Object.assign({},t,{loc:i}),{clone(a={}){let o=a.loc||{};return r({loc:new mt("line"in o?o.line:this.loc.line,"column"in o?o.column:this.loc.column,"index"in o?o.index:this.loc.index),details:Object.assign({},this.details,a.details)})},details:{value:n,enumerable:!1},message:{get(){return`${e(this.details)} (${this.loc.line}:${this.loc.column})`},set(a){Object.defineProperty(this,"message",{value:a})}},pos:{reflect:"loc.index",enumerable:!0},missingPlugin:"missingPlugin"in n&&{reflect:"details.missingPlugin",enumerable:!0}})}}function zb(s,e){return Object.assign({toMessage:typeof s=="string"?()=>s:s},e)}function ut(s,e){if(Array.isArray(s))return i=>ut(i,s[0]);let t=s(zb),r={};for(let i of Object.keys(t))r[i]=Vb(Object.assign({code:co.SyntaxError,reasonCode:i},e?{syntaxPlugin:e}:{},t[i]));return r}var m=Object.assign({},ut(Bb),ut($b),ut(Ub),ut`pipelineOperator`(qb)),{defineProperty:Gb}=Object,nd=(s,e)=>Gb(s,e,{enumerable:!1,value:s[e]});function Qi(s){return nd(s.loc.start,"index"),nd(s.loc.end,"index"),s}var Hb=s=>class extends s{parse(){let e=Qi(super.parse());return this.options.tokens&&(e.tokens=e.tokens.map(Qi)),e}parseRegExpLiteral({pattern:e,flags:t}){let r=null;try{r=new RegExp(e,t)}catch{}let i=this.estreeParseLiteral(r);return i.regex={pattern:e,flags:t},i}parseBigIntLiteral(e){let t;try{t=BigInt(e)}catch{t=null}let r=this.estreeParseLiteral(t);return r.bigint=String(r.value||e),r}parseDecimalLiteral(e){let r=this.estreeParseLiteral(null);return r.decimal=String(r.value||e),r}estreeParseLiteral(e){return this.parseLiteral(e,"Literal")}parseStringLiteral(e){return this.estreeParseLiteral(e)}parseNumericLiteral(e){return this.estreeParseLiteral(e)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(e){return this.estreeParseLiteral(e)}directiveToStmt(e){let t=e.value,r=this.startNodeAt(e.start,e.loc.start),i=this.startNodeAt(t.start,t.loc.start);return i.value=t.extra.expressionValue,i.raw=t.extra.raw,r.expression=this.finishNodeAt(i,"Literal",t.loc.end),r.directive=t.extra.raw.slice(1,-1),this.finishNodeAt(r,"ExpressionStatement",e.loc.end)}initFunction(e,t){super.initFunction(e,t),e.expression=!1}checkDeclaration(e){e!=null&&this.isObjectProperty(e)?this.checkDeclaration(e.value):super.checkDeclaration(e)}getObjectOrClassMethodParams(e){return e.value.params}isValidDirective(e){var t;return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&!((t=e.expression.extra)!=null&&t.parenthesized)}parseBlockBody(e,...t){super.parseBlockBody(e,...t);let r=e.directives.map(i=>this.directiveToStmt(i));e.body=r.concat(e.body),delete e.directives}pushClassMethod(e,t,r,i,n,a){this.parseMethod(t,r,i,n,a,"ClassMethod",!0),t.typeParameters&&(t.value.typeParameters=t.typeParameters,delete t.typeParameters),e.body.push(t)}parsePrivateName(){let e=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(e):e}convertPrivateNameToPrivateIdentifier(e){let t=super.getPrivateNameSV(e);return e=e,delete e.id,e.name=t,e.type="PrivateIdentifier",e}isPrivateName(e){return this.getPluginOption("estree","classFeatures")?e.type==="PrivateIdentifier":super.isPrivateName(e)}getPrivateNameSV(e){return this.getPluginOption("estree","classFeatures")?e.name:super.getPrivateNameSV(e)}parseLiteral(e,t){let r=super.parseLiteral(e,t);return r.raw=r.extra.raw,delete r.extra,r}parseFunctionBody(e,t,r=!1){super.parseFunctionBody(e,t,r),e.expression=e.body.type!=="BlockStatement"}parseMethod(e,t,r,i,n,a,o=!1){let c=this.startNode();return c.kind=e.kind,c=super.parseMethod(c,t,r,i,n,a,o),c.type="FunctionExpression",delete c.kind,e.value=c,a==="ClassPrivateMethod"&&(e.computed=!1),a="MethodDefinition",this.finishNode(e,a)}parseClassProperty(...e){let t=super.parseClassProperty(...e);return this.getPluginOption("estree","classFeatures")&&(t.type="PropertyDefinition"),t}parseClassPrivateProperty(...e){let t=super.parseClassPrivateProperty(...e);return this.getPluginOption("estree","classFeatures")&&(t.type="PropertyDefinition",t.computed=!1),t}parseObjectMethod(e,t,r,i,n){let a=super.parseObjectMethod(e,t,r,i,n);return a&&(a.type="Property",a.kind==="method"&&(a.kind="init"),a.shorthand=!1),a}parseObjectProperty(e,t,r,i,n){let a=super.parseObjectProperty(e,t,r,i,n);return a&&(a.kind="init",a.type="Property"),a}isValidLVal(e,...t){return e==="Property"?"value":super.isValidLVal(e,...t)}isAssignable(e,t){return e!=null&&this.isObjectProperty(e)?this.isAssignable(e.value,t):super.isAssignable(e,t)}toAssignable(e,t=!1){if(e!=null&&this.isObjectProperty(e)){let{key:r,value:i}=e;this.isPrivateName(r)&&this.classScope.usePrivateName(this.getPrivateNameSV(r),r.loc.start),this.toAssignable(i,t)}else super.toAssignable(e,t)}toAssignableObjectExpressionProp(e){e.kind==="get"||e.kind==="set"?this.raise(m.PatternHasAccessor,{at:e.key}):e.method?this.raise(m.PatternHasMethod,{at:e.key}):super.toAssignableObjectExpressionProp(...arguments)}finishCallExpression(e,t){if(super.finishCallExpression(e,t),e.callee.type==="Import"){if(e.type="ImportExpression",e.source=e.arguments[0],this.hasPlugin("importAssertions")){var r;e.attributes=(r=e.arguments[1])!=null?r:null}delete e.arguments,delete e.callee}return e}toReferencedArguments(e){e.type!=="ImportExpression"&&super.toReferencedArguments(e)}parseExport(e){switch(super.parseExport(e),e.type){case"ExportAllDeclaration":e.exported=null;break;case"ExportNamedDeclaration":e.specifiers.length===1&&e.specifiers[0].type==="ExportNamespaceSpecifier"&&(e.type="ExportAllDeclaration",e.exported=e.specifiers[0].exported,delete e.specifiers);break}return e}parseSubscript(e,t,r,i,n){let a=super.parseSubscript(e,t,r,i,n);if(n.optionalChainMember){if((a.type==="OptionalMemberExpression"||a.type==="OptionalCallExpression")&&(a.type=a.type.substring(8)),n.stop){let o=this.startNodeAtNode(a);return o.expression=a,this.finishNode(o,"ChainExpression")}}else(a.type==="MemberExpression"||a.type==="CallExpression")&&(a.optional=!1);return a}hasPropertyAsPrivateName(e){return e.type==="ChainExpression"&&(e=e.expression),super.hasPropertyAsPrivateName(e)}isOptionalChain(e){return e.type==="ChainExpression"}isObjectProperty(e){return e.type==="Property"&&e.kind==="init"&&!e.method}isObjectMethod(e){return e.method||e.kind==="get"||e.kind==="set"}finishNodeAt(e,t,r){return Qi(super.finishNodeAt(e,t,r))}resetEndLocation(e,t=this.state.lastTokEndLoc){super.resetEndLocation(e,t),Qi(e)}},cs=class{constructor(e,t){this.token=void 0,this.preserveSpace=void 0,this.token=e,this.preserveSpace=!!t}},te={brace:new cs("{"),j_oTag:new cs("<tag"),j_cTag:new cs("</tag"),j_expr:new cs("<tag>...</tag>",!0)};te.template=new cs("`",!0);var U=!0,v=!0,Za=!0,Cr=!0,Ft=!0,Kb=!0,on=class{constructor(e,t={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.rightAssociative=!!t.rightAssociative,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop!=null?t.binop:null,this.updateContext=null}},Oo=new Map;function q(s,e={}){e.keyword=s;let t=L(s,e);return Oo.set(s,t),t}function Le(s,e){return L(s,{beforeExpr:U,binop:e})}var Lr=-1,ct=[],_o=[],Do=[],Mo=[],Fo=[],Ro=[];function L(s,e={}){var t,r,i,n;return++Lr,_o.push(s),Do.push((t=e.binop)!=null?t:-1),Mo.push((r=e.beforeExpr)!=null?r:!1),Fo.push((i=e.startsExpr)!=null?i:!1),Ro.push((n=e.prefix)!=null?n:!1),ct.push(new on(s,e)),Lr}function W(s,e={}){var t,r,i,n;return++Lr,Oo.set(s,Lr),_o.push(s),Do.push((t=e.binop)!=null?t:-1),Mo.push((r=e.beforeExpr)!=null?r:!1),Fo.push((i=e.startsExpr)!=null?i:!1),Ro.push((n=e.prefix)!=null?n:!1),ct.push(new on("name",e)),Lr}var Xb={bracketL:L("[",{beforeExpr:U,startsExpr:v}),bracketHashL:L("#[",{beforeExpr:U,startsExpr:v}),bracketBarL:L("[|",{beforeExpr:U,startsExpr:v}),bracketR:L("]"),bracketBarR:L("|]"),braceL:L("{",{beforeExpr:U,startsExpr:v}),braceBarL:L("{|",{beforeExpr:U,startsExpr:v}),braceHashL:L("#{",{beforeExpr:U,startsExpr:v}),braceR:L("}",{beforeExpr:U}),braceBarR:L("|}"),parenL:L("(",{beforeExpr:U,startsExpr:v}),parenR:L(")"),comma:L(",",{beforeExpr:U}),semi:L(";",{beforeExpr:U}),colon:L(":",{beforeExpr:U}),doubleColon:L("::",{beforeExpr:U}),dot:L("."),question:L("?",{beforeExpr:U}),questionDot:L("?."),arrow:L("=>",{beforeExpr:U}),template:L("template"),ellipsis:L("...",{beforeExpr:U}),backQuote:L("`",{startsExpr:v}),dollarBraceL:L("${",{beforeExpr:U,startsExpr:v}),templateTail:L("...`",{startsExpr:v}),templateNonTail:L("...${",{beforeExpr:U,startsExpr:v}),at:L("@"),hash:L("#",{startsExpr:v}),interpreterDirective:L("#!..."),eq:L("=",{beforeExpr:U,isAssign:Cr}),assign:L("_=",{beforeExpr:U,isAssign:Cr}),slashAssign:L("_=",{beforeExpr:U,isAssign:Cr}),xorAssign:L("_=",{beforeExpr:U,isAssign:Cr}),moduloAssign:L("_=",{beforeExpr:U,isAssign:Cr}),incDec:L("++/--",{prefix:Ft,postfix:Kb,startsExpr:v}),bang:L("!",{beforeExpr:U,prefix:Ft,startsExpr:v}),tilde:L("~",{beforeExpr:U,prefix:Ft,startsExpr:v}),doubleCaret:L("^^",{startsExpr:v}),doubleAt:L("@@",{startsExpr:v}),pipeline:Le("|>",0),nullishCoalescing:Le("??",1),logicalOR:Le("||",1),logicalAND:Le("&&",2),bitwiseOR:Le("|",3),bitwiseXOR:Le("^",4),bitwiseAND:Le("&",5),equality:Le("==/!=/===/!==",6),lt:Le("</>/<=/>=",7),gt:Le("</>/<=/>=",7),relational:Le("</>/<=/>=",7),bitShift:Le("<</>>/>>>",8),bitShiftL:Le("<</>>/>>>",8),bitShiftR:Le("<</>>/>>>",8),plusMin:L("+/-",{beforeExpr:U,binop:9,prefix:Ft,startsExpr:v}),modulo:L("%",{binop:10,startsExpr:v}),star:L("*",{binop:10}),slash:Le("/",10),exponent:L("**",{beforeExpr:U,binop:11,rightAssociative:!0}),_in:q("in",{beforeExpr:U,binop:7}),_instanceof:q("instanceof",{beforeExpr:U,binop:7}),_break:q("break"),_case:q("case",{beforeExpr:U}),_catch:q("catch"),_continue:q("continue"),_debugger:q("debugger"),_default:q("default",{beforeExpr:U}),_else:q("else",{beforeExpr:U}),_finally:q("finally"),_function:q("function",{startsExpr:v}),_if:q("if"),_return:q("return",{beforeExpr:U}),_switch:q("switch"),_throw:q("throw",{beforeExpr:U,prefix:Ft,startsExpr:v}),_try:q("try"),_var:q("var"),_const:q("const"),_with:q("with"),_new:q("new",{beforeExpr:U,startsExpr:v}),_this:q("this",{startsExpr:v}),_super:q("super",{startsExpr:v}),_class:q("class",{startsExpr:v}),_extends:q("extends",{beforeExpr:U}),_export:q("export"),_import:q("import",{startsExpr:v}),_null:q("null",{startsExpr:v}),_true:q("true",{startsExpr:v}),_false:q("false",{startsExpr:v}),_typeof:q("typeof",{beforeExpr:U,prefix:Ft,startsExpr:v}),_void:q("void",{beforeExpr:U,prefix:Ft,startsExpr:v}),_delete:q("delete",{beforeExpr:U,prefix:Ft,startsExpr:v}),_do:q("do",{isLoop:Za,beforeExpr:U}),_for:q("for",{isLoop:Za}),_while:q("while",{isLoop:Za}),_as:W("as",{startsExpr:v}),_assert:W("assert",{startsExpr:v}),_async:W("async",{startsExpr:v}),_await:W("await",{startsExpr:v}),_from:W("from",{startsExpr:v}),_get:W("get",{startsExpr:v}),_let:W("let",{startsExpr:v}),_meta:W("meta",{startsExpr:v}),_of:W("of",{startsExpr:v}),_sent:W("sent",{startsExpr:v}),_set:W("set",{startsExpr:v}),_static:W("static",{startsExpr:v}),_yield:W("yield",{startsExpr:v}),_asserts:W("asserts",{startsExpr:v}),_checks:W("checks",{startsExpr:v}),_exports:W("exports",{startsExpr:v}),_global:W("global",{startsExpr:v}),_implements:W("implements",{startsExpr:v}),_intrinsic:W("intrinsic",{startsExpr:v}),_infer:W("infer",{startsExpr:v}),_is:W("is",{startsExpr:v}),_mixins:W("mixins",{startsExpr:v}),_proto:W("proto",{startsExpr:v}),_require:W("require",{startsExpr:v}),_keyof:W("keyof",{startsExpr:v}),_readonly:W("readonly",{startsExpr:v}),_unique:W("unique",{startsExpr:v}),_abstract:W("abstract",{startsExpr:v}),_declare:W("declare",{startsExpr:v}),_enum:W("enum",{startsExpr:v}),_module:W("module",{startsExpr:v}),_namespace:W("namespace",{startsExpr:v}),_interface:W("interface",{startsExpr:v}),_type:W("type",{startsExpr:v}),_opaque:W("opaque",{startsExpr:v}),name:L("name",{startsExpr:v}),string:L("string",{startsExpr:v}),num:L("num",{startsExpr:v}),bigint:L("bigint",{startsExpr:v}),decimal:L("decimal",{startsExpr:v}),regexp:L("regexp",{startsExpr:v}),privateName:L("#name",{startsExpr:v}),eof:L("eof"),jsxName:L("jsxName"),jsxText:L("jsxText",{beforeExpr:!0}),jsxTagStart:L("jsxTagStart",{startsExpr:!0}),jsxTagEnd:L("jsxTagEnd"),placeholder:L("%%",{startsExpr:!0})};function K(s){return s>=93&&s<=128}function Jb(s){return s<=92}function ft(s){return s>=58&&s<=128}function Ed(s){return s>=58&&s<=132}function Yb(s){return Mo[s]}function ad(s){return Fo[s]}function Qb(s){return s>=29&&s<=33}function od(s){return s>=125&&s<=127}function Zb(s){return s>=90&&s<=92}function Bo(s){return s>=58&&s<=92}function eE(s){return s>=39&&s<=59}function tE(s){return s===34}function sE(s){return Ro[s]}function rE(s){return s>=117&&s<=119}function iE(s){return s>=120&&s<=126}function Bt(s){return _o[s]}function sn(s){return Do[s]}function nE(s){return s===57}function cn(s){return s>=24&&s<=25}function ot(s){return ct[s]}ct[8].updateContext=s=>{s.pop()},ct[5].updateContext=ct[7].updateContext=ct[23].updateContext=s=>{s.push(te.brace)},ct[22].updateContext=s=>{s[s.length-1]===te.template?s.pop():s.push(te.template)},ct[138].updateContext=s=>{s.push(te.j_expr,te.j_oTag)};var $o="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",wd="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",aE=new RegExp("["+$o+"]"),oE=new RegExp("["+$o+wd+"]");$o=wd=null;var Sd=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],cE=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function uo(s,e){let t=65536;for(let r=0,i=e.length;r<i;r+=2){if(t+=e[r],t>s)return!1;if(t+=e[r+1],t>=s)return!0}return!1}function lt(s){return s<65?s===36:s<=90?!0:s<97?s===95:s<=122?!0:s<=65535?s>=170&&aE.test(String.fromCharCode(s)):uo(s,Sd)}function $s(s){return s<48?s===36:s<58?!0:s<65?!1:s<=90?!0:s<97?s===95:s<=122?!0:s<=65535?s>=170&&oE.test(String.fromCharCode(s)):uo(s,Sd)||uo(s,cE)}var Uo={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},lE=new Set(Uo.keyword),uE=new Set(Uo.strict),hE=new Set(Uo.strictBind);function vd(s,e){return e&&s==="await"||s==="enum"}function Ad(s,e){return vd(s,e)||uE.has(s)}function Cd(s){return hE.has(s)}function Nd(s,e){return Ad(s,e)||Cd(s)}function pE(s){return lE.has(s)}function fE(s,e,t){return s===64&&e===64&&lt(t)}var dE=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function mE(s){return dE.has(s)}var Rs=0,Or=1,ht=2,jo=4,Id=8,ln=16,kd=32,ls=64,ho=128,rn=256,Zi=Or|ht|rn,yt=1,Ws=2,Ld=4,$t=8,nn=16,Od=64,un=128,po=256,fo=512,qo=1024,mo=2048,_d=yt|Ws|$t|un,pt=yt|0|$t|0,hn=yt|0|Ld|0,Dd=yt|0|nn|0,yE=0|Ws|0|un,gE=0|Ws|0|0,Md=yt|Ws|$t|po,cd=0|qo,as=0|Od,xE=yt|0|0|Od,PE=Md|fo,TE=0|qo,bE=mo,pn=4,Wo=2,Vo=1,eo=Wo|Vo,EE=Wo|pn,wE=Vo|pn,SE=Wo,vE=Vo,to=0,yo=class{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(e){if(typeof e=="string")return this.plugins.has(e);{let[t,r]=e;if(!this.hasPlugin(t))return!1;let i=this.plugins.get(t);for(let n of Object.keys(r))if((i==null?void 0:i[n])!==r[n])return!1;return!0}}getPluginOption(e,t){var r;return(r=this.plugins.get(e))==null?void 0:r[t]}};function Fd(s,e){s.trailingComments===void 0?s.trailingComments=e:s.trailingComments.unshift(...e)}function AE(s,e){s.leadingComments===void 0?s.leadingComments=e:s.leadingComments.unshift(...e)}function _r(s,e){s.innerComments===void 0?s.innerComments=e:s.innerComments.unshift(...e)}function Nr(s,e,t){let r=null,i=e.length;for(;r===null&&i>0;)r=e[--i];r===null||r.start>t.start?_r(s,t.comments):Fd(r,t.comments)}var go=class extends yo{addComment(e){this.filename&&(e.loc.filename=this.filename),this.state.comments.push(e)}processComment(e){let{commentStack:t}=this.state,r=t.length;if(r===0)return;let i=r-1,n=t[i];n.start===e.end&&(n.leadingNode=e,i--);let{start:a}=e;for(;i>=0;i--){let o=t[i],c=o.end;if(c>a)o.containingNode=e,this.finalizeComment(o),t.splice(i,1);else{c===a&&(o.trailingNode=e);break}}}finalizeComment(e){let{comments:t}=e;if(e.leadingNode!==null||e.trailingNode!==null)e.leadingNode!==null&&Fd(e.leadingNode,t),e.trailingNode!==null&&AE(e.trailingNode,t);else{let{containingNode:r,start:i}=e;if(this.input.charCodeAt(i-1)===44)switch(r.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":Nr(r,r.properties,e);break;case"CallExpression":case"OptionalCallExpression":Nr(r,r.arguments,e);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":Nr(r,r.params,e);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":Nr(r,r.elements,e);break;case"ExportNamedDeclaration":case"ImportDeclaration":Nr(r,r.specifiers,e);break;default:_r(r,t)}else _r(r,t)}}finalizeRemainingComments(){let{commentStack:e}=this.state;for(let t=e.length-1;t>=0;t--)this.finalizeComment(e[t]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(e){let{commentStack:t}=this.state,{length:r}=t;if(r===0)return;let i=t[r-1];i.leadingNode===e&&(i.leadingNode=null)}takeSurroundingComments(e,t,r){let{commentStack:i}=this.state,n=i.length;if(n===0)return;let a=n-1;for(;a>=0;a--){let o=i[a],c=o.end;if(o.start===r)o.leadingNode=e;else if(c===t)o.trailingNode=e;else if(c<t)break}}},zo=/\r\n?|[\n\u2028\u2029]/,en=new RegExp(zo.source,"g");function os(s){switch(s){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}var so=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,CE=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/y,ld=new RegExp("(?=("+CE.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function NE(s){switch(s){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var Dr=class{constructor(){this.strict=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.maybeInArrowParameters=!1,this.inType=!1,this.noAnonFunctionType=!1,this.hasFlowComment=!1,this.isAmbientContext=!1,this.inAbstractClass=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.labels=[],this.decoratorStack=[[]],this.comments=[],this.commentStack=[],this.pos=0,this.type=135,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.context=[te.brace],this.canStartJSXElement=!0,this.containsEsc=!1,this.strictErrors=new Map,this.tokensLength=0}init({strictMode:e,sourceType:t,startLine:r,startColumn:i}){this.strict=e===!1?!1:e===!0?!0:t==="module",this.curLine=r,this.lineStart=-i,this.startLoc=this.endLoc=new mt(r,i,0)}curPosition(){return new mt(this.curLine,this.pos-this.lineStart,this.pos)}clone(e){let t=new Dr,r=Object.keys(this);for(let i=0,n=r.length;i<n;i++){let a=r[i],o=this[a];!e&&Array.isArray(o)&&(o=o.slice()),t[a]=o}return t}},IE=["at"],kE=["at"],LE=function(e){return e>=48&&e<=57},OE=new Set([103,109,115,105,121,117,100,118]),ud={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},tn={bin:s=>s===48||s===49,oct:s=>s>=48&&s<=55,dec:s=>s>=48&&s<=57,hex:s=>s>=48&&s<=57||s>=65&&s<=70||s>=97&&s<=102},Ye=class{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,this.loc=new qs(e.startLoc,e.endLoc)}},xo=class extends go{constructor(e,t){super(),this.isLookahead=void 0,this.tokens=[],this.state=new Dr,this.state.init(e),this.input=t,this.length=t.length,this.isLookahead=!1}pushToken(e){this.tokens.length=this.state.tokensLength,this.tokens.push(e),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Ye(this.state)),this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(e){return this.match(e)?(this.next(),!0):!1}match(e){return this.state.type===e}createLookaheadState(e){return{pos:e.pos,value:null,type:e.type,start:e.start,end:e.end,context:[this.curContext()],inType:e.inType,startLoc:e.startLoc,lastTokEndLoc:e.lastTokEndLoc,curLine:e.curLine,lineStart:e.lineStart,curPosition:e.curPosition}}lookahead(){let e=this.state;this.state=this.createLookaheadState(e),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let t=this.state;return this.state=e,t}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(e){return so.lastIndex=e,so.test(this.input)?so.lastIndex:e}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}codePointAtPos(e){let t=this.input.charCodeAt(e);if((t&64512)===55296&&++e<this.input.length){let r=this.input.charCodeAt(e);(r&64512)===56320&&(t=65536+((t&1023)<<10)+(r&1023))}return t}setStrict(e){this.state.strict=e,e&&(this.state.strictErrors.forEach(([t,r])=>this.raise(t,{at:r})),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(135);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(){let e;this.isLookahead||(e=this.state.curPosition());let t=this.state.pos,r=this.input.indexOf("*/",t+2);if(r===-1)throw this.raise(m.UnterminatedComment,{at:this.state.curPosition()});for(this.state.pos=r+2,en.lastIndex=t+2;en.test(this.input)&&en.lastIndex<=r;)++this.state.curLine,this.state.lineStart=en.lastIndex;if(this.isLookahead)return;let i={type:"CommentBlock",value:this.input.slice(t+2,r),start:t,end:r+2,loc:new qs(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(i),i}skipLineComment(e){let t=this.state.pos,r;this.isLookahead||(r=this.state.curPosition());let i=this.input.charCodeAt(this.state.pos+=e);if(this.state.pos<this.length)for(;!os(i)&&++this.state.pos<this.length;)i=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let n=this.state.pos,a=this.input.slice(t+e,n),o={type:"CommentLine",value:a,start:t,end:n,loc:new qs(r,this.state.curPosition())};return this.options.tokens&&this.pushToken(o),o}skipSpace(){let e=this.state.pos,t=[];e:for(;this.state.pos<this.length;){let r=this.input.charCodeAt(this.state.pos);switch(r){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let i=this.skipBlockComment();i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i));break}case 47:{let i=this.skipLineComment(2);i!==void 0&&(this.addComment(i),this.options.attachComment&&t.push(i));break}default:break e}break;default:if(NE(r))++this.state.pos;else if(r===45&&!this.inModule){let i=this.state.pos;if(this.input.charCodeAt(i+1)===45&&this.input.charCodeAt(i+2)===62&&(e===0||this.state.lineStart>e)){let n=this.skipLineComment(3);n!==void 0&&(this.addComment(n),this.options.attachComment&&t.push(n))}else break e}else if(r===60&&!this.inModule){let i=this.state.pos;if(this.input.charCodeAt(i+1)===33&&this.input.charCodeAt(i+2)===45&&this.input.charCodeAt(i+3)===45){let n=this.skipLineComment(4);n!==void 0&&(this.addComment(n),this.options.attachComment&&t.push(n))}else break e}else break e}}if(t.length>0){let r=this.state.pos,i={start:e,end:r,comments:t,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(i)}}finishToken(e,t){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let r=this.state.type;this.state.type=e,this.state.value=t,this.isLookahead||this.updateContext(r)}replaceToken(e){this.state.type=e,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let e=this.state.pos+1,t=this.codePointAtPos(e);if(t>=48&&t<=57)throw this.raise(m.UnexpectedDigitAfterHash,{at:this.state.curPosition()});if(t===123||t===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")!=="hash")throw this.raise(t===123?m.RecordExpressionHashIncorrectStartSyntaxType:m.TupleExpressionHashIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,t===123?this.finishToken(7):this.finishToken(1)}else lt(t)?(++this.state.pos,this.finishToken(134,this.readWord1(t))):t===92?(++this.state.pos,this.finishToken(134,this.readWord1())):this.finishOp(27,1)}readToken_dot(){let e=this.input.charCodeAt(this.state.pos+1);if(e>=48&&e<=57){this.readNumber(!0);return}e===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let e=this.input.charCodeAt(this.state.pos+1);if(e!==33)return!1;let t=this.state.pos;for(this.state.pos+=1;!os(e)&&++this.state.pos<this.length;)e=this.input.charCodeAt(this.state.pos);let r=this.input.slice(t+2,this.state.pos);return this.finishToken(28,r),!0}readToken_mult_modulo(e){let t=e===42?55:54,r=1,i=this.input.charCodeAt(this.state.pos+1);e===42&&i===42&&(r++,i=this.input.charCodeAt(this.state.pos+2),t=57),i===61&&!this.state.inType&&(r++,t=e===37?33:30),this.finishOp(t,r)}readToken_pipe_amp(e){let t=this.input.charCodeAt(this.state.pos+1);if(t===e){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(e===124?41:42,2);return}if(e===124){if(t===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&t===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.RecordExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&t===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.TupleExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(4);return}}if(t===61){this.finishOp(30,2);return}this.finishOp(e===124?43:45,1)}readToken_caret(){let e=this.input.charCodeAt(this.state.pos+1);if(e===61&&!this.state.inType)this.finishOp(32,2);else if(e===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])){if(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94)throw this.unexpected()}else this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(e){let t=this.input.charCodeAt(this.state.pos+1);if(t===e){this.finishOp(34,2);return}t===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){let{pos:e}=this.state,t=this.input.charCodeAt(e+1);if(t===60){if(this.input.charCodeAt(e+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(t===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:e}=this.state,t=this.input.charCodeAt(e+1);if(t===62){let r=this.input.charCodeAt(e+2)===62?3:2;if(this.input.charCodeAt(e+r)===61){this.finishOp(30,r+1);return}this.finishOp(52,r);return}if(t===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(e){let t=this.input.charCodeAt(this.state.pos+1);if(t===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(e===61&&t===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(e===61?29:35,1)}readToken_question(){let e=this.input.charCodeAt(this.state.pos+1),t=this.input.charCodeAt(this.state.pos+2);e===63?t===61?this.finishOp(30,3):this.finishOp(40,2):e===46&&!(t>=48&&t<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(e){switch(e){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.TupleExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(m.RecordExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let t=this.input.charCodeAt(this.state.pos+1);if(t===120||t===88){this.readRadixNumber(16);return}if(t===111||t===79){this.readRadixNumber(8);return}if(t===98||t===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(e);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(e);return;case 124:case 38:this.readToken_pipe_amp(e);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(e);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(e);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(lt(e)){this.readWord(e);return}}throw this.raise(m.InvalidOrUnexpectedToken,{at:this.state.curPosition(),unexpected:String.fromCodePoint(e)})}finishOp(e,t){let r=this.input.slice(this.state.pos,this.state.pos+t);this.state.pos+=t,this.finishToken(e,r)}readRegexp(){let e=this.state.startLoc,t=this.state.start+1,r,i,{pos:n}=this.state;for(;;++n){if(n>=this.length)throw this.raise(m.UnterminatedRegExp,{at:Ee(e,1)});let l=this.input.charCodeAt(n);if(os(l))throw this.raise(m.UnterminatedRegExp,{at:Ee(e,1)});if(r)r=!1;else{if(l===91)i=!0;else if(l===93&&i)i=!1;else if(l===47&&!i)break;r=l===92}}let a=this.input.slice(t,n);++n;let o="",c=()=>Ee(e,n+2-t);for(;n<this.length;){let l=this.codePointAtPos(n),u=String.fromCharCode(l);if(OE.has(l))l===118?(this.expectPlugin("regexpUnicodeSets",c()),o.includes("u")&&this.raise(m.IncompatibleRegExpUVFlags,{at:c()})):l===117&&o.includes("v")&&this.raise(m.IncompatibleRegExpUVFlags,{at:c()}),o.includes(u)&&this.raise(m.DuplicateRegExpFlags,{at:c()});else if($s(l)||l===92)this.raise(m.MalformedRegExpFlags,{at:c()});else break;++n,o+=u}this.state.pos=n,this.finishToken(133,{pattern:a,flags:o})}readInt(e,t,r,i=!0){let n=this.state.pos,a=e===16?ud.hex:ud.decBinOct,o=e===16?tn.hex:e===10?tn.dec:e===8?tn.oct:tn.bin,c=!1,l=0;for(let u=0,h=t==null?1/0:t;u<h;++u){let p=this.input.charCodeAt(this.state.pos),f;if(p===95&&i!=="bail"){let y=this.input.charCodeAt(this.state.pos-1),g=this.input.charCodeAt(this.state.pos+1);i?(Number.isNaN(g)||!o(g)||a.has(y)||a.has(g))&&this.raise(m.UnexpectedNumericSeparator,{at:this.state.curPosition()}):this.raise(m.NumericSeparatorInEscapeSequence,{at:this.state.curPosition()}),++this.state.pos;continue}if(p>=97?f=p-97+10:p>=65?f=p-65+10:LE(p)?f=p-48:f=1/0,f>=e)if(this.options.errorRecovery&&f<=9)f=0,this.raise(m.InvalidDigit,{at:this.state.curPosition(),radix:e});else if(r)f=0,c=!0;else break;++this.state.pos,l=l*e+f}return this.state.pos===n||t!=null&&this.state.pos-n!==t||c?null:l}readRadixNumber(e){let t=this.state.curPosition(),r=!1;this.state.pos+=2;let i=this.readInt(e);i==null&&this.raise(m.InvalidDigit,{at:Ee(t,2),radix:e});let n=this.input.charCodeAt(this.state.pos);if(n===110)++this.state.pos,r=!0;else if(n===109)throw this.raise(m.InvalidDecimal,{at:t});if(lt(this.codePointAtPos(this.state.pos)))throw this.raise(m.NumberIdentifier,{at:this.state.curPosition()});if(r){let a=this.input.slice(t.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(131,a);return}this.finishToken(130,i)}readNumber(e){let t=this.state.pos,r=this.state.curPosition(),i=!1,n=!1,a=!1,o=!1,c=!1;!e&&this.readInt(10)===null&&this.raise(m.InvalidNumber,{at:this.state.curPosition()});let l=this.state.pos-t>=2&&this.input.charCodeAt(t)===48;if(l){let f=this.input.slice(t,this.state.pos);if(this.recordStrictModeErrors(m.StrictOctalLiteral,{at:r}),!this.state.strict){let y=f.indexOf("_");y>0&&this.raise(m.ZeroDigitNumericSeparator,{at:Ee(r,y)})}c=l&&!/[89]/.test(f)}let u=this.input.charCodeAt(this.state.pos);if(u===46&&!c&&(++this.state.pos,this.readInt(10),i=!0,u=this.input.charCodeAt(this.state.pos)),(u===69||u===101)&&!c&&(u=this.input.charCodeAt(++this.state.pos),(u===43||u===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(m.InvalidOrMissingExponent,{at:r}),i=!0,o=!0,u=this.input.charCodeAt(this.state.pos)),u===110&&((i||l)&&this.raise(m.InvalidBigIntLiteral,{at:r}),++this.state.pos,n=!0),u===109&&(this.expectPlugin("decimal",this.state.curPosition()),(o||l)&&this.raise(m.InvalidDecimal,{at:r}),++this.state.pos,a=!0),lt(this.codePointAtPos(this.state.pos)))throw this.raise(m.NumberIdentifier,{at:this.state.curPosition()});let h=this.input.slice(t,this.state.pos).replace(/[_mn]/g,"");if(n){this.finishToken(131,h);return}if(a){this.finishToken(132,h);return}let p=c?parseInt(h,8):parseFloat(h);this.finishToken(130,p)}readCodePoint(e){let t=this.input.charCodeAt(this.state.pos),r;if(t===123){if(++this.state.pos,r=this.readHexChar(this.input.indexOf("}",this.state.pos)-this.state.pos,!0,e),++this.state.pos,r!==null&&r>1114111)if(e)this.raise(m.InvalidCodePoint,{at:this.state.curPosition()});else return null}else r=this.readHexChar(4,!1,e);return r}readString(e){let t="",r=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(m.UnterminatedString,{at:this.state.startLoc});let i=this.input.charCodeAt(this.state.pos);if(i===e)break;if(i===92)t+=this.input.slice(r,this.state.pos),t+=this.readEscapedChar(!1),r=this.state.pos;else if(i===8232||i===8233)++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;else{if(os(i))throw this.raise(m.UnterminatedString,{at:this.state.startLoc});++this.state.pos}}t+=this.input.slice(r,this.state.pos++),this.finishToken(129,t)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){let e="",t=this.state.pos,r=!1;for(++this.state.pos;;){if(this.state.pos>=this.length)throw this.raise(m.UnterminatedTemplate,{at:Ee(this.state.startLoc,1)});let i=this.input.charCodeAt(this.state.pos);if(i===96){++this.state.pos,e+=this.input.slice(t,this.state.pos),this.finishToken(24,r?null:e);return}if(i===36&&this.input.charCodeAt(this.state.pos+1)===123){this.state.pos+=2,e+=this.input.slice(t,this.state.pos),this.finishToken(25,r?null:e);return}if(i===92){e+=this.input.slice(t,this.state.pos);let n=this.readEscapedChar(!0);n===null?r=!0:e+=n,t=this.state.pos}else if(os(i)){switch(e+=this.input.slice(t,this.state.pos),++this.state.pos,i){case 13:this.input.charCodeAt(this.state.pos)===10&&++this.state.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(i);break}++this.state.curLine,this.state.lineStart=this.state.pos,t=this.state.pos}else++this.state.pos}}recordStrictModeErrors(e,{at:t}){let r=t.index;this.state.strict&&!this.state.strictErrors.has(r)?this.raise(e,{at:t}):this.state.strictErrors.set(r,[e,t])}readEscapedChar(e){let t=!e,r=this.input.charCodeAt(++this.state.pos);switch(++this.state.pos,r){case 110:return`
`;case 114:return"\r";case 120:{let i=this.readHexChar(2,!1,t);return i===null?null:String.fromCharCode(i)}case 117:{let i=this.readCodePoint(t);return i===null?null:String.fromCodePoint(i)}case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.state.pos)===10&&++this.state.pos;case 10:this.state.lineStart=this.state.pos,++this.state.curLine;case 8232:case 8233:return"";case 56:case 57:if(e)return null;this.recordStrictModeErrors(m.StrictNumericEscape,{at:Ee(this.state.curPosition(),-1)});default:if(r>=48&&r<=55){let i=Ee(this.state.curPosition(),-1),a=this.input.slice(this.state.pos-1,this.state.pos+2).match(/^[0-7]+/)[0],o=parseInt(a,8);o>255&&(a=a.slice(0,-1),o=parseInt(a,8)),this.state.pos+=a.length-1;let c=this.input.charCodeAt(this.state.pos);if(a!=="0"||c===56||c===57){if(e)return null;this.recordStrictModeErrors(m.StrictNumericEscape,{at:i})}return String.fromCharCode(o)}return String.fromCharCode(r)}}readHexChar(e,t,r){let i=this.state.curPosition(),n=this.readInt(16,e,t,!1);return n===null&&(r?this.raise(m.InvalidEscapeSequence,{at:i}):this.state.pos=i.index-1),n}readWord1(e){this.state.containsEsc=!1;let t="",r=this.state.pos,i=this.state.pos;for(e!==void 0&&(this.state.pos+=e<=65535?1:2);this.state.pos<this.length;){let n=this.codePointAtPos(this.state.pos);if($s(n))this.state.pos+=n<=65535?1:2;else if(n===92){this.state.containsEsc=!0,t+=this.input.slice(i,this.state.pos);let a=this.state.curPosition(),o=this.state.pos===r?lt:$s;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(m.MissingUnicodeEscape,{at:this.state.curPosition()}),i=this.state.pos-1;continue}++this.state.pos;let c=this.readCodePoint(!0);c!==null&&(o(c)||this.raise(m.EscapedCharNotAnIdentifier,{at:a}),t+=String.fromCodePoint(c)),i=this.state.pos}else break}return t+this.input.slice(i,this.state.pos)}readWord(e){let t=this.readWord1(e),r=Oo.get(t);r!==void 0?this.finishToken(r,Bt(r)):this.finishToken(128,t)}checkKeywordEscapes(){let{type:e}=this.state;Bo(e)&&this.state.containsEsc&&this.raise(m.InvalidEscapedReservedWord,{at:this.state.startLoc,reservedWord:Bt(e)})}raise(e,t){let{at:r}=t,i=oo(t,IE),n=r instanceof mt?r:r.loc.start,a=e({loc:n,details:i});if(!this.options.errorRecovery)throw a;return this.isLookahead||this.state.errors.push(a),a}raiseOverwrite(e,t){let{at:r}=t,i=oo(t,kE),n=r instanceof mt?r:r.loc.start,a=n.index,o=this.state.errors;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.loc.index===a)return o[c]=e({loc:n,details:i});if(l.loc.index<a)break}return this.raise(e,t)}updateContext(e){}unexpected(e,t){throw this.raise(m.UnexpectedToken,{expected:t?Bt(t):null,at:e!=null?e:this.state.startLoc})}expectPlugin(e,t){if(this.hasPlugin(e))return!0;throw this.raise(m.MissingPlugin,{at:t!=null?t:this.state.startLoc,missingPlugin:[e]})}expectOnePlugin(e){if(!e.some(t=>this.hasPlugin(t)))throw this.raise(m.MissingOneOfPlugins,{at:this.state.startLoc,missingPlugin:e})}},Mr=class{constructor(e){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=e}},Fr=class{constructor(e,t){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=e,this.inModule=t}get inFunction(){return(this.currentVarScopeFlags()&ht)>0}get allowSuper(){return(this.currentThisScopeFlags()&ln)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&kd)>0}get inClass(){return(this.currentThisScopeFlags()&ls)>0}get inClassAndNotInNonArrowFunction(){let e=this.currentThisScopeFlags();return(e&ls)>0&&(e&ht)===0}get inStaticBlock(){for(let e=this.scopeStack.length-1;;e--){let{flags:t}=this.scopeStack[e];if(t&ho)return!0;if(t&(Zi|ls))return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&ht)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(e){return new Mr(e)}enter(e){this.scopeStack.push(this.createScope(e))}exit(){this.scopeStack.pop()}treatFunctionsAsVarInScope(e){return!!(e.flags&(ht|ho)||!this.parser.inModule&&e.flags&Or)}declareName(e,t,r){let i=this.currentScope();if(t&$t||t&nn)this.checkRedeclarationInScope(i,e,t,r),t&nn?i.functions.add(e):i.lexical.add(e),t&$t&&this.maybeExportDefined(i,e);else if(t&Ld)for(let n=this.scopeStack.length-1;n>=0&&(i=this.scopeStack[n],this.checkRedeclarationInScope(i,e,t,r),i.var.add(e),this.maybeExportDefined(i,e),!(i.flags&Zi));--n);this.parser.inModule&&i.flags&Or&&this.undefinedExports.delete(e)}maybeExportDefined(e,t){this.parser.inModule&&e.flags&Or&&this.undefinedExports.delete(t)}checkRedeclarationInScope(e,t,r,i){this.isRedeclaredInScope(e,t,r)&&this.parser.raise(m.VarRedeclaration,{at:i,identifierName:t})}isRedeclaredInScope(e,t,r){return r&yt?r&$t?e.lexical.has(t)||e.functions.has(t)||e.var.has(t):r&nn?e.lexical.has(t)||!this.treatFunctionsAsVarInScope(e)&&e.var.has(t):e.lexical.has(t)&&!(e.flags&Id&&e.lexical.values().next().value===t)||!this.treatFunctionsAsVarInScope(e)&&e.functions.has(t):!1}checkLocalExport(e){let{name:t}=e,r=this.scopeStack[0];!r.lexical.has(t)&&!r.var.has(t)&&!r.functions.has(t)&&this.undefinedExports.set(t,e.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let e=this.scopeStack.length-1;;e--){let{flags:t}=this.scopeStack[e];if(t&Zi)return t}}currentThisScopeFlags(){for(let e=this.scopeStack.length-1;;e--){let{flags:t}=this.scopeStack[e];if(t&(Zi|ls)&&!(t&jo))return t}}},Po=class extends Mr{constructor(...e){super(...e),this.declareFunctions=new Set}},To=class extends Fr{createScope(e){return new Po(e)}declareName(e,t,r){let i=this.currentScope();if(t&mo){this.checkRedeclarationInScope(i,e,t,r),this.maybeExportDefined(i,e),i.declareFunctions.add(e);return}super.declareName(...arguments)}isRedeclaredInScope(e,t,r){return super.isRedeclaredInScope(...arguments)?!0:r&mo?!e.declareFunctions.has(t)&&(e.lexical.has(t)||e.functions.has(t)):!1}checkLocalExport(e){this.scopeStack[0].declareFunctions.has(e.name)||super.checkLocalExport(e)}},bo=class{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}},Eo=class{constructor(e){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=e}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new bo)}exit(){let e=this.stack.pop(),t=this.current();for(let[r,i]of Array.from(e.undefinedPrivateNames))t?t.undefinedPrivateNames.has(r)||t.undefinedPrivateNames.set(r,i):this.parser.raise(m.InvalidPrivateFieldResolution,{at:i,identifierName:r})}declarePrivateName(e,t,r){let{privateNames:i,loneAccessors:n,undefinedPrivateNames:a}=this.current(),o=i.has(e);if(t&eo){let c=o&&n.get(e);if(c){let l=c&pn,u=t&pn,h=c&eo,p=t&eo;o=h===p||l!==u,o||n.delete(e)}else o||n.set(e,t)}o&&this.parser.raise(m.PrivateNameRedeclaration,{at:r,identifierName:e}),i.add(e),a.delete(e)}usePrivateName(e,t){let r;for(r of this.stack)if(r.privateNames.has(e))return;r?r.undefinedPrivateNames.set(e,t):this.parser.raise(m.InvalidPrivateFieldResolution,{at:t,identifierName:e})}},_E=0,Rd=1,Go=2,Bd=3,Vs=class{constructor(e=_E){this.type=void 0,this.type=e}canBeArrowParameterDeclaration(){return this.type===Go||this.type===Rd}isCertainlyParameterDeclaration(){return this.type===Bd}},fn=class extends Vs{constructor(e){super(e),this.declarationErrors=new Map}recordDeclarationError(e,{at:t}){let r=t.index;this.declarationErrors.set(r,[e,t])}clearDeclarationError(e){this.declarationErrors.delete(e)}iterateErrors(e){this.declarationErrors.forEach(e)}},wo=class{constructor(e){this.parser=void 0,this.stack=[new Vs],this.parser=e}enter(e){this.stack.push(e)}exit(){this.stack.pop()}recordParameterInitializerError(e,{at:t}){let r={at:t.loc.start},{stack:i}=this,n=i.length-1,a=i[n];for(;!a.isCertainlyParameterDeclaration();){if(a.canBeArrowParameterDeclaration())a.recordDeclarationError(e,r);else return;a=i[--n]}this.parser.raise(e,r)}recordArrowParemeterBindingError(e,{at:t}){let{stack:r}=this,i=r[r.length-1],n={at:t.loc.start};if(i.isCertainlyParameterDeclaration())this.parser.raise(e,n);else if(i.canBeArrowParameterDeclaration())i.recordDeclarationError(e,n);else return}recordAsyncArrowParametersError({at:e}){let{stack:t}=this,r=t.length-1,i=t[r];for(;i.canBeArrowParameterDeclaration();)i.type===Go&&i.recordDeclarationError(m.AwaitBindingIdentifier,{at:e}),i=t[--r]}validateAsPattern(){let{stack:e}=this,t=e[e.length-1];!t.canBeArrowParameterDeclaration()||t.iterateErrors(([r,i])=>{this.parser.raise(r,{at:i});let n=e.length-2,a=e[n];for(;a.canBeArrowParameterDeclaration();)a.clearDeclarationError(i.index),a=e[--n]})}};function DE(){return new Vs(Bd)}function ME(){return new fn(Rd)}function FE(){return new fn(Go)}function $d(){return new Vs}var Us=0,Ud=1,mn=2,jd=4,Fs=8,So=class{constructor(){this.stacks=[]}enter(e){this.stacks.push(e)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&mn)>0}get hasYield(){return(this.currentFlags()&Ud)>0}get hasReturn(){return(this.currentFlags()&jd)>0}get hasIn(){return(this.currentFlags()&Fs)>0}};function an(s,e){return(s?mn:0)|(e?Ud:0)}var vo=class extends xo{addExtra(e,t,r,i=!0){if(!e)return;let n=e.extra=e.extra||{};i?n[t]=r:Object.defineProperty(n,t,{enumerable:i,value:r})}isContextual(e){return this.state.type===e&&!this.state.containsEsc}isUnparsedContextual(e,t){let r=e+t.length;if(this.input.slice(e,r)===t){let i=this.input.charCodeAt(r);return!($s(i)||(i&64512)===55296)}return!1}isLookaheadContextual(e){let t=this.nextTokenStart();return this.isUnparsedContextual(t,e)}eatContextual(e){return this.isContextual(e)?(this.next(),!0):!1}expectContextual(e,t){if(!this.eatContextual(e))throw t!=null?this.raise(t,{at:this.state.startLoc}):this.unexpected(null,e)}canInsertSemicolon(){return this.match(135)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return zo.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return ld.lastIndex=this.state.end,ld.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(e=!0){(e?this.isLineTerminator():this.eat(13))||this.raise(m.MissingSemicolon,{at:this.state.lastTokEndLoc})}expect(e,t){this.eat(e)||this.unexpected(t,e)}tryParse(e,t=this.state.clone()){let r={node:null};try{let i=e((n=null)=>{throw r.node=n,r});if(this.state.errors.length>t.errors.length){let n=this.state;return this.state=t,this.state.tokensLength=n.tokensLength,{node:i,error:n.errors[t.errors.length],thrown:!1,aborted:!1,failState:n}}return{node:i,error:null,thrown:!1,aborted:!1,failState:null}}catch(i){let n=this.state;if(this.state=t,i instanceof SyntaxError)return{node:null,error:i,thrown:!0,aborted:!1,failState:n};if(i===r)return{node:r.node,error:null,thrown:!1,aborted:!0,failState:n};throw i}}checkExpressionErrors(e,t){if(!e)return!1;let{shorthandAssignLoc:r,doubleProtoLoc:i,privateKeyLoc:n,optionalParametersLoc:a}=e,o=!!r||!!i||!!a||!!n;if(!t)return o;r!=null&&this.raise(m.InvalidCoverInitializedName,{at:r}),i!=null&&this.raise(m.DuplicateProto,{at:i}),n!=null&&this.raise(m.UnexpectedPrivateField,{at:n}),a!=null&&this.unexpected(a)}isLiteralPropertyName(){return Ed(this.state.type)}isPrivateName(e){return e.type==="PrivateName"}getPrivateNameSV(e){return e.id.name}hasPropertyAsPrivateName(e){return(e.type==="MemberExpression"||e.type==="OptionalMemberExpression")&&this.isPrivateName(e.property)}isOptionalChain(e){return e.type==="OptionalMemberExpression"||e.type==="OptionalCallExpression"}isObjectProperty(e){return e.type==="ObjectProperty"}isObjectMethod(e){return e.type==="ObjectMethod"}initializeScopes(e=this.options.sourceType==="module"){let t=this.state.labels;this.state.labels=[];let r=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let i=this.inModule;this.inModule=e;let n=this.scope,a=this.getScopeHandler();this.scope=new a(this,e);let o=this.prodParam;this.prodParam=new So;let c=this.classScope;this.classScope=new Eo(this);let l=this.expressionScope;return this.expressionScope=new wo(this),()=>{this.state.labels=t,this.exportedIdentifiers=r,this.inModule=i,this.scope=n,this.prodParam=o,this.classScope=c,this.expressionScope=l}}enterInitialScopes(){let e=Us;this.inModule&&(e|=mn),this.scope.enter(Or),this.prodParam.enter(e)}checkDestructuringPrivate(e){let{privateKeyLoc:t}=e;t!==null&&this.expectPlugin("destructuringPrivate",t)}},js=class{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}},zs=class{constructor(e,t,r){this.type="",this.start=t,this.end=0,this.loc=new qs(r),e!=null&&e.options.ranges&&(this.range=[t,0]),e!=null&&e.filename&&(this.loc.filename=e.filename)}},Ho=zs.prototype;Ho.__clone=function(){let s=new zs,e=Object.keys(this);for(let t=0,r=e.length;t<r;t++){let i=e[t];i!=="leadingComments"&&i!=="trailingComments"&&i!=="innerComments"&&(s[i]=this[i])}return s};function RE(s){return dt(s)}function dt(s){let{type:e,start:t,end:r,loc:i,range:n,extra:a,name:o}=s,c=Object.create(Ho);return c.type=e,c.start=t,c.end=r,c.loc=i,c.range=n,c.extra=a,c.name=o,e==="Placeholder"&&(c.expectedNode=s.expectedNode),c}function BE(s){let{type:e,start:t,end:r,loc:i,range:n,extra:a}=s;if(e==="Placeholder")return RE(s);let o=Object.create(Ho);return o.type=e,o.start=t,o.end=r,o.loc=i,o.range=n,s.raw!==void 0?o.raw=s.raw:o.extra=a,o.value=s.value,o}var Ao=class extends vo{startNode(){return new zs(this,this.state.start,this.state.startLoc)}startNodeAt(e,t){return new zs(this,e,t)}startNodeAtNode(e){return this.startNodeAt(e.start,e.loc.start)}finishNode(e,t){return this.finishNodeAt(e,t,this.state.lastTokEndLoc)}finishNodeAt(e,t,r){return e.type=t,e.end=r.index,e.loc.end=r,this.options.ranges&&(e.range[1]=r.index),this.options.attachComment&&this.processComment(e),e}resetStartLocation(e,t,r){e.start=t,e.loc.start=r,this.options.ranges&&(e.range[0]=t)}resetEndLocation(e,t=this.state.lastTokEndLoc){e.end=t.index,e.loc.end=t,this.options.ranges&&(e.range[1]=t.index)}resetStartLocationFromNode(e,t){this.resetStartLocation(e,t.start,t.loc.start)}},$E=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),_=ut`flow`(s=>({AmbiguousConditionalArrow:s("Ambiguous expression: wrap the arrow functions in parentheses to disambiguate."),AmbiguousDeclareModuleKind:s("Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module."),AssignReservedType:s(({reservedType:e})=>`Cannot overwrite reserved type ${e}.`),DeclareClassElement:s("The `declare` modifier can only appear on class fields."),DeclareClassFieldInitializer:s("Initializers are not allowed in fields with the `declare` modifier."),DuplicateDeclareModuleExports:s("Duplicate `declare module.exports` statement."),EnumBooleanMemberNotInitialized:s(({memberName:e,enumName:t})=>`Boolean enum members need to be initialized. Use either \`${e} = true,\` or \`${e} = false,\` in enum \`${t}\`.`),EnumDuplicateMemberName:s(({memberName:e,enumName:t})=>`Enum member names need to be unique, but the name \`${e}\` has already been used before in enum \`${t}\`.`),EnumInconsistentMemberValues:s(({enumName:e})=>`Enum \`${e}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`),EnumInvalidExplicitType:s(({invalidEnumType:e,enumName:t})=>`Enum type \`${e}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${t}\`.`),EnumInvalidExplicitTypeUnknownSupplied:s(({enumName:e})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${e}\`.`),EnumInvalidMemberInitializerPrimaryType:s(({enumName:e,memberName:t,explicitType:r})=>`Enum \`${e}\` has type \`${r}\`, so the initializer of \`${t}\` needs to be a ${r} literal.`),EnumInvalidMemberInitializerSymbolType:s(({enumName:e,memberName:t})=>`Symbol enum members cannot be initialized. Use \`${t},\` in enum \`${e}\`.`),EnumInvalidMemberInitializerUnknownType:s(({enumName:e,memberName:t})=>`The enum member initializer for \`${t}\` needs to be a literal (either a boolean, number, or string) in enum \`${e}\`.`),EnumInvalidMemberName:s(({enumName:e,memberName:t,suggestion:r})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${t}\`, consider using \`${r}\`, in enum \`${e}\`.`),EnumNumberMemberNotInitialized:s(({enumName:e,memberName:t})=>`Number enum members need to be initialized, e.g. \`${t} = 1\` in enum \`${e}\`.`),EnumStringMemberInconsistentlyInitailized:s(({enumName:e})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${e}\`.`),GetterMayNotHaveThisParam:s("A getter cannot have a `this` parameter."),ImportTypeShorthandOnlyInPureImport:s("The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements."),InexactInsideExact:s("Explicit inexact syntax cannot appear inside an explicit exact object type."),InexactInsideNonObject:s("Explicit inexact syntax cannot appear in class or interface definitions."),InexactVariance:s("Explicit inexact syntax cannot have variance."),InvalidNonTypeImportInDeclareModule:s("Imports within a `declare module` body must always be `import type` or `import typeof`."),MissingTypeParamDefault:s("Type parameter declaration needs a default, since a preceding type parameter declaration has a default."),NestedDeclareModule:s("`declare module` cannot be used inside another `declare module`."),NestedFlowComment:s("Cannot have a flow comment inside another flow comment."),PatternIsOptional:s("A binding pattern parameter cannot be optional in an implementation signature.",{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:s("A setter cannot have a `this` parameter."),SpreadVariance:s("Spread properties cannot have variance."),ThisParamAnnotationRequired:s("A type annotation is required for the `this` parameter."),ThisParamBannedInConstructor:s("Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions."),ThisParamMayNotBeOptional:s("The `this` parameter cannot be optional."),ThisParamMustBeFirst:s("The `this` parameter must be the first function parameter."),ThisParamNoDefault:s("The `this` parameter may not have a default value."),TypeBeforeInitializer:s("Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`."),TypeCastInPattern:s("The type cast expression is expected to be wrapped with parenthesis."),UnexpectedExplicitInexactInObject:s("Explicit inexact syntax must appear at the end of an inexact object."),UnexpectedReservedType:s(({reservedType:e})=>`Unexpected reserved type ${e}.`),UnexpectedReservedUnderscore:s("`_` is only allowed as a type argument to call or new."),UnexpectedSpaceBetweenModuloChecks:s("Spaces between `%` and `checks` are not allowed here."),UnexpectedSpreadType:s("Spread operator cannot appear in class or interface definitions."),UnexpectedSubtractionOperand:s('Unexpected token, expected "number" or "bigint".'),UnexpectedTokenAfterTypeParameter:s("Expected an arrow function after this type parameter declaration."),UnexpectedTypeParameterBeforeAsyncArrowFunction:s("Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`."),UnsupportedDeclareExportKind:s(({unsupportedExportKind:e,suggestion:t})=>`\`declare export ${e}\` is not supported. Use \`${t}\` instead.`),UnsupportedStatementInDeclareModule:s("Only declares and type imports are allowed inside declare module."),UnterminatedFlowComment:s("Unterminated flow-comment.")}));function UE(s){return s.type==="DeclareExportAllDeclaration"||s.type==="DeclareExportDeclaration"&&(!s.declaration||s.declaration.type!=="TypeAlias"&&s.declaration.type!=="InterfaceDeclaration")}function ro(s){return s.importKind==="type"||s.importKind==="typeof"}function hd(s){return ft(s)&&s!==97}var jE={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function qE(s,e){let t=[],r=[];for(let i=0;i<s.length;i++)(e(s[i],i,s)?t:r).push(s[i]);return[t,r]}var WE=/\*?\s*@((?:no)?flow)\b/,VE=s=>class extends s{constructor(...e){super(...e),this.flowPragma=void 0}getScopeHandler(){return To}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(e,t){return e!==129&&e!==13&&e!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(e,t)}addComment(e){if(this.flowPragma===void 0){let t=WE.exec(e.value);if(t)if(t[1]==="flow")this.flowPragma="flow";else if(t[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}return super.addComment(e)}flowParseTypeInitialiser(e){let t=this.state.inType;this.state.inType=!0,this.expect(e||14);let r=this.flowParseType();return this.state.inType=t,r}flowParsePredicate(){let e=this.startNode(),t=this.state.startLoc;return this.next(),this.expectContextual(107),this.state.lastTokStart>t.index+1&&this.raise(_.UnexpectedSpaceBetweenModuloChecks,{at:t}),this.eat(10)?(e.value=this.parseExpression(),this.expect(11),this.finishNode(e,"DeclaredPredicate")):this.finishNode(e,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let e=this.state.inType;this.state.inType=!0,this.expect(14);let t=null,r=null;return this.match(54)?(this.state.inType=e,r=this.flowParsePredicate()):(t=this.flowParseType(),this.state.inType=e,this.match(54)&&(r=this.flowParsePredicate())),[t,r]}flowParseDeclareClass(e){return this.next(),this.flowParseInterfaceish(e,!0),this.finishNode(e,"DeclareClass")}flowParseDeclareFunction(e){this.next();let t=e.id=this.parseIdentifier(),r=this.startNode(),i=this.startNode();this.match(47)?r.typeParameters=this.flowParseTypeParameterDeclaration():r.typeParameters=null,this.expect(10);let n=this.flowParseFunctionTypeParams();return r.params=n.params,r.rest=n.rest,r.this=n._this,this.expect(11),[r.returnType,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),i.typeAnnotation=this.finishNode(r,"FunctionTypeAnnotation"),t.typeAnnotation=this.finishNode(i,"TypeAnnotation"),this.resetEndLocation(t),this.semicolon(),this.scope.declareName(e.id.name,bE,e.id.loc.start),this.finishNode(e,"DeclareFunction")}flowParseDeclare(e,t){if(this.match(80))return this.flowParseDeclareClass(e);if(this.match(68))return this.flowParseDeclareFunction(e);if(this.match(74))return this.flowParseDeclareVariable(e);if(this.eatContextual(123))return this.match(16)?this.flowParseDeclareModuleExports(e):(t&&this.raise(_.NestedDeclareModule,{at:this.state.lastTokStartLoc}),this.flowParseDeclareModule(e));if(this.isContextual(126))return this.flowParseDeclareTypeAlias(e);if(this.isContextual(127))return this.flowParseDeclareOpaqueType(e);if(this.isContextual(125))return this.flowParseDeclareInterface(e);if(this.match(82))return this.flowParseDeclareExportDeclaration(e,t);throw this.unexpected()}flowParseDeclareVariable(e){return this.next(),e.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(e.id.name,hn,e.id.loc.start),this.semicolon(),this.finishNode(e,"DeclareVariable")}flowParseDeclareModule(e){this.scope.enter(Rs),this.match(129)?e.id=this.parseExprAtom():e.id=this.parseIdentifier();let t=e.body=this.startNode(),r=t.body=[];for(this.expect(5);!this.match(8);){let a=this.startNode();this.match(83)?(this.next(),!this.isContextual(126)&&!this.match(87)&&this.raise(_.InvalidNonTypeImportInDeclareModule,{at:this.state.lastTokStartLoc}),this.parseImport(a)):(this.expectContextual(121,_.UnsupportedStatementInDeclareModule),a=this.flowParseDeclare(a,!0)),r.push(a)}this.scope.exit(),this.expect(8),this.finishNode(t,"BlockStatement");let i=null,n=!1;return r.forEach(a=>{UE(a)?(i==="CommonJS"&&this.raise(_.AmbiguousDeclareModuleKind,{at:a}),i="ES"):a.type==="DeclareModuleExports"&&(n&&this.raise(_.DuplicateDeclareModuleExports,{at:a}),i==="ES"&&this.raise(_.AmbiguousDeclareModuleKind,{at:a}),i="CommonJS",n=!0)}),e.kind=i||"CommonJS",this.finishNode(e,"DeclareModule")}flowParseDeclareExportDeclaration(e,t){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?e.declaration=this.flowParseDeclare(this.startNode()):(e.declaration=this.flowParseType(),this.semicolon()),e.default=!0,this.finishNode(e,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(126)||this.isContextual(125))&&!t){let r=this.state.value;throw this.raise(_.UnsupportedDeclareExportKind,{at:this.state.startLoc,unsupportedExportKind:r,suggestion:jE[r]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(127))return e.declaration=this.flowParseDeclare(this.startNode()),e.default=!1,this.finishNode(e,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(125)||this.isContextual(126)||this.isContextual(127))return e=this.parseExport(e),e.type==="ExportNamedDeclaration"&&(e.type="ExportDeclaration",e.default=!1,delete e.exportKind),e.type="Declare"+e.type,e;throw this.unexpected()}flowParseDeclareModuleExports(e){return this.next(),this.expectContextual(108),e.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(e,"DeclareModuleExports")}flowParseDeclareTypeAlias(e){return this.next(),this.flowParseTypeAlias(e),e.type="DeclareTypeAlias",e}flowParseDeclareOpaqueType(e){return this.next(),this.flowParseOpaqueType(e,!0),e.type="DeclareOpaqueType",e}flowParseDeclareInterface(e){return this.next(),this.flowParseInterfaceish(e),this.finishNode(e,"DeclareInterface")}flowParseInterfaceish(e,t=!1){if(e.id=this.flowParseRestrictedIdentifier(!t,!0),this.scope.declareName(e.id.name,t?Dd:pt,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.extends=[],e.implements=[],e.mixins=[],this.eat(81))do e.extends.push(this.flowParseInterfaceExtends());while(!t&&this.eat(12));if(this.isContextual(114)){this.next();do e.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12))}if(this.isContextual(110)){this.next();do e.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}e.body=this.flowParseObjectType({allowStatic:t,allowExact:!1,allowSpread:!1,allowProto:t,allowInexact:!1})}flowParseInterfaceExtends(){let e=this.startNode();return e.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?e.typeParameters=this.flowParseTypeParameterInstantiation():e.typeParameters=null,this.finishNode(e,"InterfaceExtends")}flowParseInterface(e){return this.flowParseInterfaceish(e),this.finishNode(e,"InterfaceDeclaration")}checkNotUnderscore(e){e==="_"&&this.raise(_.UnexpectedReservedUnderscore,{at:this.state.startLoc})}checkReservedType(e,t,r){!$E.has(e)||this.raise(r?_.AssignReservedType:_.UnexpectedReservedType,{at:t,reservedType:e})}flowParseRestrictedIdentifier(e,t){return this.checkReservedType(this.state.value,this.state.startLoc,t),this.parseIdentifier(e)}flowParseTypeAlias(e){return e.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(e.id.name,pt,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(e,"TypeAlias")}flowParseOpaqueType(e,t){return this.expectContextual(126),e.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(e.id.name,pt,e.id.loc.start),this.match(47)?e.typeParameters=this.flowParseTypeParameterDeclaration():e.typeParameters=null,e.supertype=null,this.match(14)&&(e.supertype=this.flowParseTypeInitialiser(14)),e.impltype=null,t||(e.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(e,"OpaqueType")}flowParseTypeParameter(e=!1){let t=this.state.startLoc,r=this.startNode(),i=this.flowParseVariance(),n=this.flowParseTypeAnnotatableIdentifier();return r.name=n.name,r.variance=i,r.bound=n.typeAnnotation,this.match(29)?(this.eat(29),r.default=this.flowParseType()):e&&this.raise(_.MissingTypeParamDefault,{at:t}),this.finishNode(r,"TypeParameter")}flowParseTypeParameterDeclaration(){let e=this.state.inType,t=this.startNode();t.params=[],this.state.inType=!0,this.match(47)||this.match(138)?this.next():this.unexpected();let r=!1;do{let i=this.flowParseTypeParameter(r);t.params.push(i),i.default&&(r=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){let e=this.startNode(),t=this.state.inType;e.params=[],this.state.inType=!0,this.expect(47);let r=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)e.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=r,this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){let e=this.startNode(),t=this.state.inType;for(e.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)e.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterInstantiation")}flowParseInterfaceType(){let e=this.startNode();if(this.expectContextual(125),e.extends=[],this.eat(81))do e.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return e.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(e,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(130)||this.match(129)?this.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(e,t,r){return e.static=t,this.lookahead().type===14?(e.id=this.flowParseObjectPropertyKey(),e.key=this.flowParseTypeInitialiser()):(e.id=null,e.key=this.flowParseType()),this.expect(3),e.value=this.flowParseTypeInitialiser(),e.variance=r,this.finishNode(e,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(e,t){return e.static=t,e.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(e.method=!0,e.optional=!1,e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start))):(e.method=!1,this.eat(17)&&(e.optional=!0),e.value=this.flowParseTypeInitialiser()),this.finishNode(e,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(e){for(e.params=[],e.rest=null,e.typeParameters=null,e.this=null,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(e.this=this.flowParseFunctionTypeParam(!0),e.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),e.returnType=this.flowParseTypeInitialiser(),this.finishNode(e,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(e,t){let r=this.startNode();return e.static=t,e.value=this.flowParseObjectTypeMethodish(r),this.finishNode(e,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:e,allowExact:t,allowSpread:r,allowProto:i,allowInexact:n}){let a=this.state.inType;this.state.inType=!0;let o=this.startNode();o.callProperties=[],o.properties=[],o.indexers=[],o.internalSlots=[];let c,l,u=!1;for(t&&this.match(6)?(this.expect(6),c=9,l=!0):(this.expect(5),c=8,l=!1),o.exact=l;!this.match(c);){let p=!1,f=null,y=null,g=this.startNode();if(i&&this.isContextual(115)){let T=this.lookahead();T.type!==14&&T.type!==17&&(this.next(),f=this.state.startLoc,e=!1)}if(e&&this.isContextual(104)){let T=this.lookahead();T.type!==14&&T.type!==17&&(this.next(),p=!0)}let b=this.flowParseVariance();if(this.eat(0))f!=null&&this.unexpected(f),this.eat(0)?(b&&this.unexpected(b.loc.start),o.internalSlots.push(this.flowParseObjectTypeInternalSlot(g,p))):o.indexers.push(this.flowParseObjectTypeIndexer(g,p,b));else if(this.match(10)||this.match(47))f!=null&&this.unexpected(f),b&&this.unexpected(b.loc.start),o.callProperties.push(this.flowParseObjectTypeCallProperty(g,p));else{let T="init";if(this.isContextual(98)||this.isContextual(103)){let S=this.lookahead();Ed(S.type)&&(T=this.state.value,this.next())}let x=this.flowParseObjectTypeProperty(g,p,f,b,T,r,n!=null?n:!l);x===null?(u=!0,y=this.state.lastTokStartLoc):o.properties.push(x)}this.flowObjectTypeSemicolon(),y&&!this.match(8)&&!this.match(9)&&this.raise(_.UnexpectedExplicitInexactInObject,{at:y})}this.expect(c),r&&(o.inexact=u);let h=this.finishNode(o,"ObjectTypeAnnotation");return this.state.inType=a,h}flowParseObjectTypeProperty(e,t,r,i,n,a,o){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(a?o||this.raise(_.InexactInsideExact,{at:this.state.lastTokStartLoc}):this.raise(_.InexactInsideNonObject,{at:this.state.lastTokStartLoc}),i&&this.raise(_.InexactVariance,{at:i}),null):(a||this.raise(_.UnexpectedSpreadType,{at:this.state.lastTokStartLoc}),r!=null&&this.unexpected(r),i&&this.raise(_.SpreadVariance,{at:i}),e.argument=this.flowParseType(),this.finishNode(e,"ObjectTypeSpreadProperty"));{e.key=this.flowParseObjectPropertyKey(),e.static=t,e.proto=r!=null,e.kind=n;let c=!1;return this.match(47)||this.match(10)?(e.method=!0,r!=null&&this.unexpected(r),i&&this.unexpected(i.loc.start),e.value=this.flowParseObjectTypeMethodish(this.startNodeAt(e.start,e.loc.start)),(n==="get"||n==="set")&&this.flowCheckGetterSetterParams(e),!a&&e.key.name==="constructor"&&e.value.this&&this.raise(_.ThisParamBannedInConstructor,{at:e.value.this})):(n!=="init"&&this.unexpected(),e.method=!1,this.eat(17)&&(c=!0),e.value=this.flowParseTypeInitialiser(),e.variance=i),e.optional=c,this.finishNode(e,"ObjectTypeProperty")}}flowCheckGetterSetterParams(e){let t=e.kind==="get"?0:1,r=e.value.params.length+(e.value.rest?1:0);e.value.this&&this.raise(e.kind==="get"?_.GetterMayNotHaveThisParam:_.SetterMayNotHaveThisParam,{at:e.value.this}),r!==t&&this.raise(e.kind==="get"?m.BadGetterArity:m.BadSetterArity,{at:e}),e.kind==="set"&&e.value.rest&&this.raise(m.BadSetterRestParameter,{at:e})}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(e,t,r){e=e||this.state.start,t=t||this.state.startLoc;let i=r||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){let n=this.startNodeAt(e,t);n.qualification=i,n.id=this.flowParseRestrictedIdentifier(!0),i=this.finishNode(n,"QualifiedTypeIdentifier")}return i}flowParseGenericType(e,t,r){let i=this.startNodeAt(e,t);return i.typeParameters=null,i.id=this.flowParseQualifiedTypeIdentifier(e,t,r),this.match(47)&&(i.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(i,"GenericTypeAnnotation")}flowParseTypeofType(){let e=this.startNode();return this.expect(87),e.argument=this.flowParsePrimaryType(),this.finishNode(e,"TypeofTypeAnnotation")}flowParseTupleType(){let e=this.startNode();for(e.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(e.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(e,"TupleTypeAnnotation")}flowParseFunctionTypeParam(e){let t=null,r=!1,i=null,n=this.startNode(),a=this.lookahead(),o=this.state.type===78;return a.type===14||a.type===17?(o&&!e&&this.raise(_.ThisParamMustBeFirst,{at:n}),t=this.parseIdentifier(o),this.eat(17)&&(r=!0,o&&this.raise(_.ThisParamMayNotBeOptional,{at:n})),i=this.flowParseTypeInitialiser()):i=this.flowParseType(),n.name=t,n.optional=r,n.typeAnnotation=i,this.finishNode(n,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(e){let t=this.startNodeAt(e.start,e.loc.start);return t.name=null,t.optional=!1,t.typeAnnotation=e,this.finishNode(t,"FunctionTypeParam")}flowParseFunctionTypeParams(e=[]){let t=null,r=null;for(this.match(78)&&(r=this.flowParseFunctionTypeParam(!0),r.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)e.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t=this.flowParseFunctionTypeParam(!1)),{params:e,rest:t,_this:r}}flowIdentToTypeAnnotation(e,t,r,i){switch(i.name){case"any":return this.finishNode(r,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(r,"BooleanTypeAnnotation");case"mixed":return this.finishNode(r,"MixedTypeAnnotation");case"empty":return this.finishNode(r,"EmptyTypeAnnotation");case"number":return this.finishNode(r,"NumberTypeAnnotation");case"string":return this.finishNode(r,"StringTypeAnnotation");case"symbol":return this.finishNode(r,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(i.name),this.flowParseGenericType(e,t,i)}}flowParsePrimaryType(){let e=this.state.start,t=this.state.startLoc,r=this.startNode(),i,n,a=!1,o=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,n=this.flowParseTupleType(),this.state.noAnonFunctionType=o,n;case 47:return r.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),i=this.flowParseFunctionTypeParams(),r.params=i.params,r.rest=i.rest,r.this=i._this,this.expect(11),this.expect(19),r.returnType=this.flowParseType(),this.finishNode(r,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(K(this.state.type)||this.match(78)){let c=this.lookahead().type;a=c!==17&&c!==14}else a=!0;if(a){if(this.state.noAnonFunctionType=!1,n=this.flowParseType(),this.state.noAnonFunctionType=o,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),n;this.eat(12)}return n?i=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(n)]):i=this.flowParseFunctionTypeParams(),r.params=i.params,r.rest=i.rest,r.this=i._this,this.expect(11),this.expect(19),r.returnType=this.flowParseType(),r.typeParameters=null,this.finishNode(r,"FunctionTypeAnnotation");case 129:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return r.value=this.match(85),this.next(),this.finishNode(r,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(130))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",r);if(this.match(131))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",r);throw this.raise(_.UnexpectedSubtractionOperand,{at:this.state.startLoc})}throw this.unexpected();case 130:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 131:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(r,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(r,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(r,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(r,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(Bo(this.state.type)){let c=Bt(this.state.type);return this.next(),super.createIdentifier(r,c)}else if(K(this.state.type))return this.isContextual(125)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(e,t,r,this.parseIdentifier())}throw this.unexpected()}flowParsePostfixType(){let e=this.state.start,t=this.state.startLoc,r=this.flowParsePrimaryType(),i=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){let n=this.startNodeAt(e,t),a=this.eat(18);i=i||a,this.expect(0),!a&&this.match(3)?(n.elementType=r,this.next(),r=this.finishNode(n,"ArrayTypeAnnotation")):(n.objectType=r,n.indexType=this.flowParseType(),this.expect(3),i?(n.optional=a,r=this.finishNode(n,"OptionalIndexedAccessType")):r=this.finishNode(n,"IndexedAccessType"))}return r}flowParsePrefixType(){let e=this.startNode();return this.eat(17)?(e.typeAnnotation=this.flowParsePrefixType(),this.finishNode(e,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let e=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let t=this.startNodeAt(e.start,e.loc.start);return t.params=[this.reinterpretTypeAsFunctionTypeParam(e)],t.rest=null,t.this=null,t.returnType=this.flowParseType(),t.typeParameters=null,this.finishNode(t,"FunctionTypeAnnotation")}return e}flowParseIntersectionType(){let e=this.startNode();this.eat(45);let t=this.flowParseAnonFunctionWithoutParens();for(e.types=[t];this.eat(45);)e.types.push(this.flowParseAnonFunctionWithoutParens());return e.types.length===1?t:this.finishNode(e,"IntersectionTypeAnnotation")}flowParseUnionType(){let e=this.startNode();this.eat(43);let t=this.flowParseIntersectionType();for(e.types=[t];this.eat(43);)e.types.push(this.flowParseIntersectionType());return e.types.length===1?t:this.finishNode(e,"UnionTypeAnnotation")}flowParseType(){let e=this.state.inType;this.state.inType=!0;let t=this.flowParseUnionType();return this.state.inType=e,t}flowParseTypeOrImplicitInstantiation(){if(this.state.type===128&&this.state.value==="_"){let e=this.state.start,t=this.state.startLoc,r=this.parseIdentifier();return this.flowParseGenericType(e,t,r)}else return this.flowParseType()}flowParseTypeAnnotation(){let e=this.startNode();return e.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(e,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(e){let t=e?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t)),t}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}flowParseVariance(){let e=null;return this.match(53)&&(e=this.startNode(),this.state.value==="+"?e.kind="plus":e.kind="minus",this.next(),this.finishNode(e,"Variance")),e}parseFunctionBody(e,t,r=!1){return t?this.forwardNoArrowParamsConversionAt(e,()=>super.parseFunctionBody(e,!0,r)):super.parseFunctionBody(e,!1,r)}parseFunctionBodyAndFinish(e,t,r=!1){if(this.match(14)){let i=this.startNode();[i.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),e.returnType=i.typeAnnotation?this.finishNode(i,"TypeAnnotation"):null}super.parseFunctionBodyAndFinish(e,t,r)}parseStatement(e,t){if(this.state.strict&&this.isContextual(125)){let i=this.lookahead();if(ft(i.type)){let n=this.startNode();return this.next(),this.flowParseInterface(n)}}else if(this.shouldParseEnums()&&this.isContextual(122)){let i=this.startNode();return this.next(),this.flowParseEnumDeclaration(i)}let r=super.parseStatement(e,t);return this.flowPragma===void 0&&!this.isValidDirective(r)&&(this.flowPragma=null),r}parseExpressionStatement(e,t){if(t.type==="Identifier"){if(t.name==="declare"){if(this.match(80)||K(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(e)}else if(K(this.state.type)){if(t.name==="interface")return this.flowParseInterface(e);if(t.name==="type")return this.flowParseTypeAlias(e);if(t.name==="opaque")return this.flowParseOpaqueType(e,!1)}}return super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){let{type:e}=this.state;return od(e)||this.shouldParseEnums()&&e===122?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:e}=this.state;return od(e)||this.shouldParseEnums()&&e===122?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(122)){let e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDefaultExpression()}parseConditional(e,t,r,i){if(!this.match(17))return e;if(this.state.maybeInArrowParameters){let p=this.lookaheadCharCode();if(p===44||p===61||p===58||p===41)return this.setOptionalParametersError(i),e}this.expect(17);let n=this.state.clone(),a=this.state.noArrowAt,o=this.startNodeAt(t,r),{consequent:c,failed:l}=this.tryParseConditionalConsequent(),[u,h]=this.getArrowLikeExpressions(c);if(l||h.length>0){let p=[...a];if(h.length>0){this.state=n,this.state.noArrowAt=p;for(let f=0;f<h.length;f++)p.push(h[f].start);({consequent:c,failed:l}=this.tryParseConditionalConsequent()),[u,h]=this.getArrowLikeExpressions(c)}l&&u.length>1&&this.raise(_.AmbiguousConditionalArrow,{at:n.startLoc}),l&&u.length===1&&(this.state=n,p.push(u[0].start),this.state.noArrowAt=p,{consequent:c,failed:l}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(c,!0),this.state.noArrowAt=a,this.expect(14),o.test=e,o.consequent=c,o.alternate=this.forwardNoArrowParamsConversionAt(o,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(o,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let e=this.parseMaybeAssignAllowIn(),t=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:e,failed:t}}getArrowLikeExpressions(e,t){let r=[e],i=[];for(;r.length!==0;){let n=r.pop();n.type==="ArrowFunctionExpression"?(n.typeParameters||!n.returnType?this.finishArrowValidation(n):i.push(n),r.push(n.body)):n.type==="ConditionalExpression"&&(r.push(n.consequent),r.push(n.alternate))}return t?(i.forEach(n=>this.finishArrowValidation(n)),[i,[]]):qE(i,n=>n.params.every(a=>this.isAssignable(a,!0)))}finishArrowValidation(e){var t;this.toAssignableList(e.params,(t=e.extra)==null?void 0:t.trailingCommaLoc,!1),this.scope.enter(ht|jo),super.checkParams(e,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(e,t){let r;return this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?(this.state.noArrowParamsConversionAt.push(this.state.start),r=t(),this.state.noArrowParamsConversionAt.pop()):r=t(),r}parseParenItem(e,t,r){if(e=super.parseParenItem(e,t,r),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){let i=this.startNodeAt(t,r);return i.expression=e,i.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(i,"TypeCastExpression")}return e}assertModuleNodeAllowed(e){e.type==="ImportDeclaration"&&(e.importKind==="type"||e.importKind==="typeof")||e.type==="ExportNamedDeclaration"&&e.exportKind==="type"||e.type==="ExportAllDeclaration"&&e.exportKind==="type"||super.assertModuleNodeAllowed(e)}parseExport(e){let t=super.parseExport(e);return(t.type==="ExportNamedDeclaration"||t.type==="ExportAllDeclaration")&&(t.exportKind=t.exportKind||"value"),t}parseExportDeclaration(e){if(this.isContextual(126)){e.exportKind="type";let t=this.startNode();return this.next(),this.match(5)?(e.specifiers=this.parseExportSpecifiers(!0),this.parseExportFrom(e),null):this.flowParseTypeAlias(t)}else if(this.isContextual(127)){e.exportKind="type";let t=this.startNode();return this.next(),this.flowParseOpaqueType(t,!1)}else if(this.isContextual(125)){e.exportKind="type";let t=this.startNode();return this.next(),this.flowParseInterface(t)}else if(this.shouldParseEnums()&&this.isContextual(122)){e.exportKind="value";let t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}else return super.parseExportDeclaration(e)}eatExportStar(e){return super.eatExportStar(...arguments)?!0:this.isContextual(126)&&this.lookahead().type===55?(e.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(e){let{startLoc:t}=this.state,r=super.maybeParseExportNamespaceSpecifier(e);return r&&e.exportKind==="type"&&this.unexpected(t),r}parseClassId(e,t,r){super.parseClassId(e,t,r),this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(e,t,r){let{startLoc:i}=this.state;if(this.isContextual(121)){if(this.parseClassMemberFromModifier(e,t))return;t.declare=!0}super.parseClassMember(e,t,r),t.declare&&(t.type!=="ClassProperty"&&t.type!=="ClassPrivateProperty"&&t.type!=="PropertyDefinition"?this.raise(_.DeclareClassElement,{at:i}):t.value&&this.raise(_.DeclareClassFieldInitializer,{at:t.value}))}isIterator(e){return e==="iterator"||e==="asyncIterator"}readIterator(){let e=super.readWord1(),t="@@"+e;(!this.isIterator(e)||!this.state.inType)&&this.raise(m.InvalidIdentifier,{at:this.state.curPosition(),identifierName:t}),this.finishToken(128,t)}getTokenFromCode(e){let t=this.input.charCodeAt(this.state.pos+1);return e===123&&t===124?this.finishOp(6,2):this.state.inType&&(e===62||e===60)?this.finishOp(e===62?48:47,1):this.state.inType&&e===63?t===46?this.finishOp(18,2):this.finishOp(17,1):fE(e,t,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(e)}isAssignable(e,t){return e.type==="TypeCastExpression"?this.isAssignable(e.expression,t):super.isAssignable(e,t)}toAssignable(e,t=!1){!t&&e.type==="AssignmentExpression"&&e.left.type==="TypeCastExpression"&&(e.left=this.typeCastToParameter(e.left)),super.toAssignable(...arguments)}toAssignableList(e,t,r){for(let i=0;i<e.length;i++){let n=e[i];(n==null?void 0:n.type)==="TypeCastExpression"&&(e[i]=this.typeCastToParameter(n))}super.toAssignableList(e,t,r)}toReferencedList(e,t){for(let i=0;i<e.length;i++){var r;let n=e[i];n&&n.type==="TypeCastExpression"&&!((r=n.extra)!=null&&r.parenthesized)&&(e.length>1||!t)&&this.raise(_.TypeCastInPattern,{at:n.typeAnnotation})}return e}parseArrayLike(e,t,r,i){let n=super.parseArrayLike(e,t,r,i);return t&&!this.state.maybeInArrowParameters&&this.toReferencedList(n.elements),n}isValidLVal(e,...t){return e==="TypeCastExpression"||super.isValidLVal(e,...t)}parseClassProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(e)}parseClassPrivateProperty(e){return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(e){return!this.match(14)&&super.isNonstaticConstructor(e)}pushClassMethod(e,t,r,i,n,a){if(t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(e,t,r,i,n,a),t.params&&n){let o=t.params;o.length>0&&this.isThisParam(o[0])&&this.raise(_.ThisParamBannedInConstructor,{at:t})}else if(t.type==="MethodDefinition"&&n&&t.value.params){let o=t.value.params;o.length>0&&this.isThisParam(o[0])&&this.raise(_.ThisParamBannedInConstructor,{at:t})}}pushClassPrivateMethod(e,t,r,i){t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(e,t,r,i)}parseClassSuper(e){if(super.parseClassSuper(e),e.superClass&&this.match(47)&&(e.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(110)){this.next();let t=e.implements=[];do{let r=this.startNode();r.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?r.typeParameters=this.flowParseTypeParameterInstantiation():r.typeParameters=null,t.push(this.finishNode(r,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(e){super.checkGetterSetterParams(e);let t=this.getObjectOrClassMethodParams(e);if(t.length>0){let r=t[0];this.isThisParam(r)&&e.kind==="get"?this.raise(_.GetterMayNotHaveThisParam,{at:r}):this.isThisParam(r)&&this.raise(_.SetterMayNotHaveThisParam,{at:r})}}parsePropertyNamePrefixOperator(e){e.variance=this.flowParseVariance()}parseObjPropValue(e,t,r,i,n,a,o,c){e.variance&&this.unexpected(e.variance.loc.start),delete e.variance;let l;this.match(47)&&!o&&(l=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected()),super.parseObjPropValue(e,t,r,i,n,a,o,c),l&&((e.value||e).typeParameters=l)}parseAssignableListItemTypes(e){return this.eat(17)&&(e.type!=="Identifier"&&this.raise(_.PatternIsOptional,{at:e}),this.isThisParam(e)&&this.raise(_.ThisParamMayNotBeOptional,{at:e}),e.optional=!0),this.match(14)?e.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(e)&&this.raise(_.ThisParamAnnotationRequired,{at:e}),this.match(29)&&this.isThisParam(e)&&this.raise(_.ThisParamNoDefault,{at:e}),this.resetEndLocation(e),e}parseMaybeDefault(e,t,r){let i=super.parseMaybeDefault(e,t,r);return i.type==="AssignmentPattern"&&i.typeAnnotation&&i.right.start<i.typeAnnotation.start&&this.raise(_.TypeBeforeInitializer,{at:i.typeAnnotation}),i}shouldParseDefaultImport(e){return ro(e)?hd(this.state.type):super.shouldParseDefaultImport(e)}parseImportSpecifierLocal(e,t,r){t.local=ro(e)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),e.specifiers.push(this.finishImportSpecifier(t,r))}maybeParseDefaultImportSpecifier(e){e.importKind="value";let t=null;if(this.match(87)?t="typeof":this.isContextual(126)&&(t="type"),t){let r=this.lookahead(),{type:i}=r;t==="type"&&i===55&&this.unexpected(null,r.type),(hd(i)||i===5||i===55)&&(this.next(),e.importKind=t)}return super.maybeParseDefaultImportSpecifier(e)}parseImportSpecifier(e,t,r,i){let n=e.imported,a=null;n.type==="Identifier"&&(n.name==="type"?a="type":n.name==="typeof"&&(a="typeof"));let o=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let l=this.parseIdentifier(!0);a!==null&&!ft(this.state.type)?(e.imported=l,e.importKind=a,e.local=dt(l)):(e.imported=n,e.importKind=null,e.local=this.parseIdentifier())}else{if(a!==null&&ft(this.state.type))e.imported=this.parseIdentifier(!0),e.importKind=a;else{if(t)throw this.raise(m.ImportBindingIsString,{at:e,importName:n.value});e.imported=n,e.importKind=null}this.eatContextual(93)?e.local=this.parseIdentifier():(o=!0,e.local=dt(e.imported))}let c=ro(e);return r&&c&&this.raise(_.ImportTypeShorthandOnlyInPureImport,{at:e}),(r||c)&&this.checkReservedType(e.local.name,e.local.loc.start,!0),o&&!r&&!c&&this.checkReservedWord(e.local.name,e.loc.start,!0,!0),this.finishImportSpecifier(e,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(e,t){let r=e.kind;r!=="get"&&r!=="set"&&this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),this.match(14)&&(e.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){if(this.match(14)){let r=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,e.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=r}return super.parseAsyncArrowFromCallExpression(e,t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(e,t){var r;let i=null,n;if(this.hasPlugin("jsx")&&(this.match(138)||this.match(47))){if(i=this.state.clone(),n=this.tryParse(()=>super.parseMaybeAssign(e,t),i),!n.error)return n.node;let{context:c}=this.state,l=c[c.length-1];(l===te.j_oTag||l===te.j_expr)&&c.pop()}if((r=n)!=null&&r.error||this.match(47)){var a,o;i=i||this.state.clone();let c,l=this.tryParse(h=>{var p;c=this.flowParseTypeParameterDeclaration();let f=this.forwardNoArrowParamsConversionAt(c,()=>{let g=super.parseMaybeAssign(e,t);return this.resetStartLocationFromNode(g,c),g});(p=f.extra)!=null&&p.parenthesized&&h();let y=this.maybeUnwrapTypeCastExpression(f);return y.type!=="ArrowFunctionExpression"&&h(),y.typeParameters=c,this.resetStartLocationFromNode(y,c),f},i),u=null;if(l.node&&this.maybeUnwrapTypeCastExpression(l.node).type==="ArrowFunctionExpression"){if(!l.error&&!l.aborted)return l.node.async&&this.raise(_.UnexpectedTypeParameterBeforeAsyncArrowFunction,{at:c}),l.node;u=l.node}if((a=n)!=null&&a.node)return this.state=n.failState,n.node;if(u)return this.state=l.failState,u;throw(o=n)!=null&&o.thrown?n.error:l.thrown?l.error:this.raise(_.UnexpectedTokenAfterTypeParameter,{at:c})}return super.parseMaybeAssign(e,t)}parseArrow(e){if(this.match(14)){let t=this.tryParse(()=>{let r=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let i=this.startNode();return[i.typeAnnotation,e.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=r,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),i});if(t.thrown)return null;t.error&&(this.state=t.failState),e.returnType=t.node.typeAnnotation?this.finishNode(t.node,"TypeAnnotation"):null}return super.parseArrow(e)}shouldParseArrow(e){return this.match(14)||super.shouldParseArrow(e)}setArrowFunctionParameters(e,t){this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1?e.params=t:super.setArrowFunctionParameters(e,t)}checkParams(e,t,r){if(!(r&&this.state.noArrowParamsConversionAt.indexOf(e.start)!==-1)){for(let i=0;i<e.params.length;i++)this.isThisParam(e.params[i])&&i>0&&this.raise(_.ThisParamMustBeFirst,{at:e.params[i]});return super.checkParams(...arguments)}}parseParenAndDistinguishExpression(e){return super.parseParenAndDistinguishExpression(e&&this.state.noArrowAt.indexOf(this.state.start)===-1)}parseSubscripts(e,t,r,i){if(e.type==="Identifier"&&e.name==="async"&&this.state.noArrowAt.indexOf(t)!==-1){this.next();let n=this.startNodeAt(t,r);n.callee=e,n.arguments=this.parseCallExpressionArguments(11,!1),e=this.finishNode(n,"CallExpression")}else if(e.type==="Identifier"&&e.name==="async"&&this.match(47)){let n=this.state.clone(),a=this.tryParse(c=>this.parseAsyncArrowWithTypeParameters(t,r)||c(),n);if(!a.error&&!a.aborted)return a.node;let o=this.tryParse(()=>super.parseSubscripts(e,t,r,i),n);if(o.node&&!o.error)return o.node;if(a.node)return this.state=a.failState,a.node;if(o.node)return this.state=o.failState,o.node;throw a.error||o.error}return super.parseSubscripts(e,t,r,i)}parseSubscript(e,t,r,i,n){if(this.match(18)&&this.isLookaheadToken_lt()){if(n.optionalChainMember=!0,i)return n.stop=!0,e;this.next();let a=this.startNodeAt(t,r);return a.callee=e,a.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),a.arguments=this.parseCallExpressionArguments(11,!1),a.optional=!0,this.finishCallExpression(a,!0)}else if(!i&&this.shouldParseTypes()&&this.match(47)){let a=this.startNodeAt(t,r);a.callee=e;let o=this.tryParse(()=>(a.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),a.arguments=this.parseCallExpressionArguments(11,!1),n.optionalChainMember&&(a.optional=!1),this.finishCallExpression(a,n.optionalChainMember)));if(o.node)return o.error&&(this.state=o.failState),o.node}return super.parseSubscript(e,t,r,i,n)}parseNewArguments(e){let t=null;this.shouldParseTypes()&&this.match(47)&&(t=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),e.typeArguments=t,super.parseNewArguments(e)}parseAsyncArrowWithTypeParameters(e,t){let r=this.startNodeAt(e,t);if(this.parseFunctionParams(r),!!this.parseArrow(r))return this.parseArrowExpression(r,void 0,!0)}readToken_mult_modulo(e){let t=this.input.charCodeAt(this.state.pos+1);if(e===42&&t===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(e)}readToken_pipe_amp(e){let t=this.input.charCodeAt(this.state.pos+1);if(e===124&&t===125){this.finishOp(9,2);return}super.readToken_pipe_amp(e)}parseTopLevel(e,t){let r=super.parseTopLevel(e,t);return this.state.hasFlowComment&&this.raise(_.UnterminatedFlowComment,{at:this.state.curPosition()}),r}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(_.NestedFlowComment,{at:this.state.startLoc});this.hasFlowCommentCompletion(),this.state.pos+=this.skipFlowComment(),this.state.hasFlowComment=!0;return}if(this.state.hasFlowComment){let e=this.input.indexOf("*-/",this.state.pos+2);if(e===-1)throw this.raise(m.UnterminatedComment,{at:this.state.curPosition()});this.state.pos=e+2+3;return}return super.skipBlockComment()}skipFlowComment(){let{pos:e}=this.state,t=2;for(;[32,9].includes(this.input.charCodeAt(e+t));)t++;let r=this.input.charCodeAt(t+e),i=this.input.charCodeAt(t+e+1);return r===58&&i===58?t+2:this.input.slice(t+e,t+e+12)==="flow-include"?t+12:r===58&&i!==58?t:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(m.UnterminatedComment,{at:this.state.curPosition()})}flowEnumErrorBooleanMemberNotInitialized(e,{enumName:t,memberName:r}){this.raise(_.EnumBooleanMemberNotInitialized,{at:e,memberName:r,enumName:t})}flowEnumErrorInvalidMemberInitializer(e,t){return this.raise(t.explicitType?t.explicitType==="symbol"?_.EnumInvalidMemberInitializerSymbolType:_.EnumInvalidMemberInitializerPrimaryType:_.EnumInvalidMemberInitializerUnknownType,Object.assign({at:e},t))}flowEnumErrorNumberMemberNotInitialized(e,{enumName:t,memberName:r}){this.raise(_.EnumNumberMemberNotInitialized,{at:e,enumName:t,memberName:r})}flowEnumErrorStringMemberInconsistentlyInitailized(e,{enumName:t}){this.raise(_.EnumStringMemberInconsistentlyInitailized,{at:e,enumName:t})}flowEnumMemberInit(){let e=this.state.startLoc,t=()=>this.match(12)||this.match(8);switch(this.state.type){case 130:{let r=this.parseNumericLiteral(this.state.value);return t()?{type:"number",loc:r.loc.start,value:r}:{type:"invalid",loc:e}}case 129:{let r=this.parseStringLiteral(this.state.value);return t()?{type:"string",loc:r.loc.start,value:r}:{type:"invalid",loc:e}}case 85:case 86:{let r=this.parseBooleanLiteral(this.match(85));return t()?{type:"boolean",loc:r.loc.start,value:r}:{type:"invalid",loc:e}}default:return{type:"invalid",loc:e}}}flowEnumMemberRaw(){let e=this.state.startLoc,t=this.parseIdentifier(!0),r=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:e};return{id:t,init:r}}flowEnumCheckExplicitTypeMismatch(e,t,r){let{explicitType:i}=t;i!==null&&i!==r&&this.flowEnumErrorInvalidMemberInitializer(e,t)}flowEnumMembers({enumName:e,explicitType:t}){let r=new Set,i={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},n=!1;for(;!this.match(8);){if(this.eat(21)){n=!0;break}let a=this.startNode(),{id:o,init:c}=this.flowEnumMemberRaw(),l=o.name;if(l==="")continue;/^[a-z]/.test(l)&&this.raise(_.EnumInvalidMemberName,{at:o,memberName:l,suggestion:l[0].toUpperCase()+l.slice(1),enumName:e}),r.has(l)&&this.raise(_.EnumDuplicateMemberName,{at:o,memberName:l,enumName:e}),r.add(l);let u={enumName:e,explicitType:t,memberName:l};switch(a.id=o,c.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(c.loc,u,"boolean"),a.init=c.value,i.booleanMembers.push(this.finishNode(a,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(c.loc,u,"number"),a.init=c.value,i.numberMembers.push(this.finishNode(a,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(c.loc,u,"string"),a.init=c.value,i.stringMembers.push(this.finishNode(a,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(c.loc,u);case"none":switch(t){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(c.loc,u);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(c.loc,u);break;default:i.defaultedMembers.push(this.finishNode(a,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:i,hasUnknownMembers:n}}flowEnumStringMembers(e,t,{enumName:r}){if(e.length===0)return t;if(t.length===0)return e;if(t.length>e.length){for(let i of e)this.flowEnumErrorStringMemberInconsistentlyInitailized(i,{enumName:r});return t}else{for(let i of t)this.flowEnumErrorStringMemberInconsistentlyInitailized(i,{enumName:r});return e}}flowEnumParseExplicitType({enumName:e}){if(!this.eatContextual(101))return null;if(!K(this.state.type))throw this.raise(_.EnumInvalidExplicitTypeUnknownSupplied,{at:this.state.startLoc,enumName:e});let{value:t}=this.state;return this.next(),t!=="boolean"&&t!=="number"&&t!=="string"&&t!=="symbol"&&this.raise(_.EnumInvalidExplicitType,{at:this.state.startLoc,enumName:e,invalidEnumType:t}),t}flowEnumBody(e,t){let r=t.name,i=t.loc.start,n=this.flowEnumParseExplicitType({enumName:r});this.expect(5);let{members:a,hasUnknownMembers:o}=this.flowEnumMembers({enumName:r,explicitType:n});switch(e.hasUnknownMembers=o,n){case"boolean":return e.explicitType=!0,e.members=a.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody");case"number":return e.explicitType=!0,e.members=a.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody");case"string":return e.explicitType=!0,e.members=this.flowEnumStringMembers(a.stringMembers,a.defaultedMembers,{enumName:r}),this.expect(8),this.finishNode(e,"EnumStringBody");case"symbol":return e.members=a.defaultedMembers,this.expect(8),this.finishNode(e,"EnumSymbolBody");default:{let c=()=>(e.members=[],this.expect(8),this.finishNode(e,"EnumStringBody"));e.explicitType=!1;let l=a.booleanMembers.length,u=a.numberMembers.length,h=a.stringMembers.length,p=a.defaultedMembers.length;if(!l&&!u&&!h&&!p)return c();if(!l&&!u)return e.members=this.flowEnumStringMembers(a.stringMembers,a.defaultedMembers,{enumName:r}),this.expect(8),this.finishNode(e,"EnumStringBody");if(!u&&!h&&l>=p){for(let f of a.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(f.loc.start,{enumName:r,memberName:f.id.name});return e.members=a.booleanMembers,this.expect(8),this.finishNode(e,"EnumBooleanBody")}else if(!l&&!h&&u>=p){for(let f of a.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(f.loc.start,{enumName:r,memberName:f.id.name});return e.members=a.numberMembers,this.expect(8),this.finishNode(e,"EnumNumberBody")}else return this.raise(_.EnumInconsistentMemberValues,{at:i,enumName:r}),c()}}}flowParseEnumDeclaration(e){let t=this.parseIdentifier();return e.id=t,e.body=this.flowEnumBody(this.startNode(),t),this.finishNode(e,"EnumDeclaration")}isLookaheadToken_lt(){let e=this.nextTokenStart();if(this.input.charCodeAt(e)===60){let t=this.input.charCodeAt(e+1);return t!==60&&t!==61}return!1}maybeUnwrapTypeCastExpression(e){return e.type==="TypeCastExpression"?e.expression:e}},zE={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},ns=ut`jsx`(s=>({AttributeIsEmpty:s("JSX attributes must only be assigned a non-empty expression."),MissingClosingTagElement:s(({openingTagName:e})=>`Expected corresponding JSX closing tag for <${e}>.`),MissingClosingTagFragment:s("Expected corresponding JSX closing tag for <>."),UnexpectedSequenceExpression:s("Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?"),UnexpectedToken:s(({unexpected:e,HTMLEntity:t})=>`Unexpected token \`${e}\`. Did you mean \`${t}\` or \`{'${e}'}\`?`),UnsupportedJsxValue:s("JSX value should be either an expression or a quoted JSX text."),UnterminatedJsxContent:s("Unterminated JSX contents."),UnwrappedAdjacentJSXElements:s("Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?")}));function Rt(s){return s?s.type==="JSXOpeningFragment"||s.type==="JSXClosingFragment":!1}function Bs(s){if(s.type==="JSXIdentifier")return s.name;if(s.type==="JSXNamespacedName")return s.namespace.name+":"+s.name.name;if(s.type==="JSXMemberExpression")return Bs(s.object)+"."+Bs(s.property);throw new Error("Node had unexpected type: "+s.type)}var GE=s=>class extends s{jsxReadToken(){let e="",t=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(ns.UnterminatedJsxContent,{at:this.state.startLoc});let r=this.input.charCodeAt(this.state.pos);switch(r){case 60:case 123:return this.state.pos===this.state.start?r===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(138)):super.getTokenFromCode(r):(e+=this.input.slice(t,this.state.pos),this.finishToken(137,e));case 38:e+=this.input.slice(t,this.state.pos),e+=this.jsxReadEntity(),t=this.state.pos;break;case 62:case 125:default:os(r)?(e+=this.input.slice(t,this.state.pos),e+=this.jsxReadNewLine(!0),t=this.state.pos):++this.state.pos}}}jsxReadNewLine(e){let t=this.input.charCodeAt(this.state.pos),r;return++this.state.pos,t===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,r=e?`
`:`\r
`):r=String.fromCharCode(t),++this.state.curLine,this.state.lineStart=this.state.pos,r}jsxReadString(e){let t="",r=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(m.UnterminatedString,{at:this.state.startLoc});let i=this.input.charCodeAt(this.state.pos);if(i===e)break;i===38?(t+=this.input.slice(r,this.state.pos),t+=this.jsxReadEntity(),r=this.state.pos):os(i)?(t+=this.input.slice(r,this.state.pos),t+=this.jsxReadNewLine(!1),r=this.state.pos):++this.state.pos}return t+=this.input.slice(r,this.state.pos++),this.finishToken(129,t)}jsxReadEntity(){let e=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let t=10;this.codePointAtPos(this.state.pos)===120&&(t=16,++this.state.pos);let r=this.readInt(t,void 0,!1,"bail");if(r!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(r)}else{let t=0,r=!1;for(;t++<10&&this.state.pos<this.length&&!(r=this.codePointAtPos(this.state.pos)==59);)++this.state.pos;if(r){let i=this.input.slice(e,this.state.pos),n=zE[i];if(++this.state.pos,n)return n}}return this.state.pos=e,"&"}jsxReadWord(){let e,t=this.state.pos;do e=this.input.charCodeAt(++this.state.pos);while($s(e)||e===45);return this.finishToken(136,this.input.slice(t,this.state.pos))}jsxParseIdentifier(){let e=this.startNode();return this.match(136)?e.name=this.state.value:Bo(this.state.type)?e.name=Bt(this.state.type):this.unexpected(),this.next(),this.finishNode(e,"JSXIdentifier")}jsxParseNamespacedName(){let e=this.state.start,t=this.state.startLoc,r=this.jsxParseIdentifier();if(!this.eat(14))return r;let i=this.startNodeAt(e,t);return i.namespace=r,i.name=this.jsxParseIdentifier(),this.finishNode(i,"JSXNamespacedName")}jsxParseElementName(){let e=this.state.start,t=this.state.startLoc,r=this.jsxParseNamespacedName();if(r.type==="JSXNamespacedName")return r;for(;this.eat(16);){let i=this.startNodeAt(e,t);i.object=r,i.property=this.jsxParseIdentifier(),r=this.finishNode(i,"JSXMemberExpression")}return r}jsxParseAttributeValue(){let e;switch(this.state.type){case 5:return e=this.startNode(),this.setContext(te.brace),this.next(),e=this.jsxParseExpressionContainer(e,te.j_oTag),e.expression.type==="JSXEmptyExpression"&&this.raise(ns.AttributeIsEmpty,{at:e}),e;case 138:case 129:return this.parseExprAtom();default:throw this.raise(ns.UnsupportedJsxValue,{at:this.state.startLoc})}}jsxParseEmptyExpression(){let e=this.startNodeAt(this.state.lastTokEndLoc.index,this.state.lastTokEndLoc);return this.finishNodeAt(e,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(e){return this.next(),e.expression=this.parseExpression(),this.setContext(te.j_oTag),this.expect(8),this.finishNode(e,"JSXSpreadChild")}jsxParseExpressionContainer(e,t){if(this.match(8))e.expression=this.jsxParseEmptyExpression();else{let r=this.parseExpression();e.expression=r}return this.setContext(t),this.expect(8),this.finishNode(e,"JSXExpressionContainer")}jsxParseAttribute(){let e=this.startNode();return this.match(5)?(this.setContext(te.brace),this.next(),this.expect(21),e.argument=this.parseMaybeAssignAllowIn(),this.setContext(te.j_oTag),this.expect(8),this.finishNode(e,"JSXSpreadAttribute")):(e.name=this.jsxParseNamespacedName(),e.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(e,"JSXAttribute"))}jsxParseOpeningElementAt(e,t){let r=this.startNodeAt(e,t);return this.match(139)?(this.expect(139),this.finishNode(r,"JSXOpeningFragment")):(r.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(r))}jsxParseOpeningElementAfterName(e){let t=[];for(;!this.match(56)&&!this.match(139);)t.push(this.jsxParseAttribute());return e.attributes=t,e.selfClosing=this.eat(56),this.expect(139),this.finishNode(e,"JSXOpeningElement")}jsxParseClosingElementAt(e,t){let r=this.startNodeAt(e,t);return this.match(139)?(this.expect(139),this.finishNode(r,"JSXClosingFragment")):(r.name=this.jsxParseElementName(),this.expect(139),this.finishNode(r,"JSXClosingElement"))}jsxParseElementAt(e,t){let r=this.startNodeAt(e,t),i=[],n=this.jsxParseOpeningElementAt(e,t),a=null;if(!n.selfClosing){e:for(;;)switch(this.state.type){case 138:if(e=this.state.start,t=this.state.startLoc,this.next(),this.eat(56)){a=this.jsxParseClosingElementAt(e,t);break e}i.push(this.jsxParseElementAt(e,t));break;case 137:i.push(this.parseExprAtom());break;case 5:{let o=this.startNode();this.setContext(te.brace),this.next(),this.match(21)?i.push(this.jsxParseSpreadChild(o)):i.push(this.jsxParseExpressionContainer(o,te.j_expr));break}default:throw this.unexpected()}Rt(n)&&!Rt(a)&&a!==null?this.raise(ns.MissingClosingTagFragment,{at:a}):!Rt(n)&&Rt(a)?this.raise(ns.MissingClosingTagElement,{at:a,openingTagName:Bs(n.name)}):!Rt(n)&&!Rt(a)&&Bs(a.name)!==Bs(n.name)&&this.raise(ns.MissingClosingTagElement,{at:a,openingTagName:Bs(n.name)})}if(Rt(n)?(r.openingFragment=n,r.closingFragment=a):(r.openingElement=n,r.closingElement=a),r.children=i,this.match(47))throw this.raise(ns.UnwrappedAdjacentJSXElements,{at:this.state.startLoc});return Rt(n)?this.finishNode(r,"JSXFragment"):this.finishNode(r,"JSXElement")}jsxParseElement(){let e=this.state.start,t=this.state.startLoc;return this.next(),this.jsxParseElementAt(e,t)}setContext(e){let{context:t}=this.state;t[t.length-1]=e}parseExprAtom(e){return this.match(137)?this.parseLiteral(this.state.value,"JSXText"):this.match(138)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(138),this.jsxParseElement()):super.parseExprAtom(e)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(e){let t=this.curContext();if(t===te.j_expr)return this.jsxReadToken();if(t===te.j_oTag||t===te.j_cTag){if(lt(e))return this.jsxReadWord();if(e===62)return++this.state.pos,this.finishToken(139);if((e===34||e===39)&&t===te.j_oTag)return this.jsxReadString(e)}return e===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33?(++this.state.pos,this.finishToken(138)):super.getTokenFromCode(e)}updateContext(e){let{context:t,type:r}=this.state;if(r===56&&e===138)t.splice(-2,2,te.j_cTag),this.state.canStartJSXElement=!1;else if(r===138)t.push(te.j_oTag);else if(r===139){let i=t[t.length-1];i===te.j_oTag&&e===56||i===te.j_cTag?(t.pop(),this.state.canStartJSXElement=t[t.length-1]===te.j_expr):(this.setContext(te.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=Yb(r)}},Co=class extends Mr{constructor(...e){super(...e),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}},No=class extends Fr{createScope(e){return new Co(e)}declareName(e,t,r){let i=this.currentScope();if(t&qo){this.maybeExportDefined(i,e),i.exportOnlyBindings.add(e);return}super.declareName(...arguments),t&Ws&&(t&yt||(this.checkRedeclarationInScope(i,e,t,r),this.maybeExportDefined(i,e)),i.types.add(e)),t&po&&i.enums.add(e),t&fo&&i.constEnums.add(e),t&un&&i.classes.add(e)}isRedeclaredInScope(e,t,r){if(e.enums.has(t)){if(r&po){let i=!!(r&fo),n=e.constEnums.has(t);return i!==n}return!0}return r&un&&e.classes.has(t)?e.lexical.has(t)?!!(r&yt):!1:r&Ws&&e.types.has(t)?!0:super.isRedeclaredInScope(...arguments)}checkLocalExport(e){let t=this.scopeStack[0],{name:r}=e;!t.types.has(r)&&!t.exportOnlyBindings.has(r)&&super.checkLocalExport(e)}},HE=(s,e)=>Object.hasOwnProperty.call(s,e)&&s[e];function KE(s){if(s==null)throw new Error(`Unexpected ${s} value.`);return s}function pd(s){if(!s)throw new Error("Assert fail")}var O=ut`typescript`(s=>({AbstractMethodHasImplementation:s(({methodName:e})=>`Method '${e}' cannot have an implementation because it is marked abstract.`),AbstractPropertyHasInitializer:s(({propertyName:e})=>`Property '${e}' cannot have an initializer because it is marked abstract.`),AccesorCannotDeclareThisParameter:s("'get' and 'set' accessors cannot declare 'this' parameters."),AccesorCannotHaveTypeParameters:s("An accessor cannot have type parameters."),CannotFindName:s(({name:e})=>`Cannot find name '${e}'.`),ClassMethodHasDeclare:s("Class methods cannot have the 'declare' modifier."),ClassMethodHasReadonly:s("Class methods cannot have the 'readonly' modifier."),ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:s("A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference."),ConstructorHasTypeParameters:s("Type parameters cannot appear on a constructor declaration."),DeclareAccessor:s(({kind:e})=>`'declare' is not allowed in ${e}ters.`),DeclareClassFieldHasInitializer:s("Initializers are not allowed in ambient contexts."),DeclareFunctionHasImplementation:s("An implementation cannot be declared in ambient contexts."),DuplicateAccessibilityModifier:s(({modifier:e})=>"Accessibility modifier already seen."),DuplicateModifier:s(({modifier:e})=>`Duplicate modifier: '${e}'.`),EmptyHeritageClauseType:s(({token:e})=>`'${e}' list cannot be empty.`),EmptyTypeArguments:s("Type argument list cannot be empty."),EmptyTypeParameters:s("Type parameter list cannot be empty."),ExpectedAmbientAfterExportDeclare:s("'export declare' must be followed by an ambient declaration."),ImportAliasHasImportType:s("An import alias can not use 'import type'."),IncompatibleModifiers:s(({modifiers:e})=>`'${e[0]}' modifier cannot be used with '${e[1]}' modifier.`),IndexSignatureHasAbstract:s("Index signatures cannot have the 'abstract' modifier."),IndexSignatureHasAccessibility:s(({modifier:e})=>`Index signatures cannot have an accessibility modifier ('${e}').`),IndexSignatureHasDeclare:s("Index signatures cannot have the 'declare' modifier."),IndexSignatureHasOverride:s("'override' modifier cannot appear on an index signature."),IndexSignatureHasStatic:s("Index signatures cannot have the 'static' modifier."),InitializerNotAllowedInAmbientContext:s("Initializers are not allowed in ambient contexts."),InvalidModifierOnTypeMember:s(({modifier:e})=>`'${e}' modifier cannot appear on a type member.`),InvalidModifiersOrder:s(({orderedModifiers:e})=>`'${e[0]}' modifier must precede '${e[1]}' modifier.`),InvalidTupleMemberLabel:s("Tuple members must be labeled with a simple identifier."),MissingInterfaceName:s("'interface' declarations must be followed by an identifier."),MixedLabeledAndUnlabeledElements:s("Tuple members must all have names or all not have names."),NonAbstractClassHasAbstractMethod:s("Abstract methods can only appear within an abstract class."),NonClassMethodPropertyHasAbstractModifer:s("'abstract' modifier can only appear on a class, method, or property declaration."),OptionalTypeBeforeRequired:s("A required element cannot follow an optional element."),OverrideNotInSubClass:s("This member cannot have an 'override' modifier because its containing class does not extend another class."),PatternIsOptional:s("A binding pattern parameter cannot be optional in an implementation signature."),PrivateElementHasAbstract:s("Private elements cannot have the 'abstract' modifier."),PrivateElementHasAccessibility:s(({modifier:e})=>`Private elements cannot have an accessibility modifier ('${e}').`),ReadonlyForMethodSignature:s("'readonly' modifier can only appear on a property declaration or index signature."),ReservedArrowTypeParam:s("This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`."),ReservedTypeAssertion:s("This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead."),SetAccesorCannotHaveOptionalParameter:s("A 'set' accessor cannot have an optional parameter."),SetAccesorCannotHaveRestParameter:s("A 'set' accessor cannot have rest parameter."),SetAccesorCannotHaveReturnType:s("A 'set' accessor cannot have a return type annotation."),SingleTypeParameterWithoutTrailingComma:s(({typeParameterName:e})=>`Single type parameter ${e} should have a trailing comma. Example usage: <${e},>.`),StaticBlockCannotHaveModifier:s("Static class blocks cannot have any modifier."),TypeAnnotationAfterAssign:s("Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`."),TypeImportCannotSpecifyDefaultAndNamed:s("A type-only import can specify a default import or named bindings, but not both."),TypeModifierIsUsedInTypeExports:s("The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement."),TypeModifierIsUsedInTypeImports:s("The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement."),UnexpectedParameterModifier:s("A parameter property is only allowed in a constructor implementation."),UnexpectedReadonly:s("'readonly' type modifier is only permitted on array and tuple literal types."),UnexpectedTypeAnnotation:s("Did not expect a type annotation here."),UnexpectedTypeCastInParameter:s("Unexpected type cast in parameter position."),UnsupportedImportTypeArgument:s("Argument in a type import must be a string literal."),UnsupportedParameterPropertyKind:s("A parameter property may not be declared using a binding pattern."),UnsupportedSignatureParameterKind:s(({type:e})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${e}.`)}));function XE(s){switch(s){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function fd(s){return s==="private"||s==="public"||s==="protected"}var JE=s=>class extends s{getScopeHandler(){return No}tsIsIdentifier(){return K(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(134)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(e,t){if(!K(this.state.type))return;let r=this.state.value;if(e.indexOf(r)!==-1){if(t&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return r}}tsParseModifiers({modified:e,allowedModifiers:t,disallowedModifiers:r,stopOnStartOfClassStaticBlock:i}){let n=(o,c,l,u)=>{c===l&&e[u]&&this.raise(O.InvalidModifiersOrder,{at:o,orderedModifiers:[l,u]})},a=(o,c,l,u)=>{(e[l]&&c===u||e[u]&&c===l)&&this.raise(O.IncompatibleModifiers,{at:o,modifiers:[l,u]})};for(;;){let{startLoc:o}=this.state,c=this.tsParseModifier(t.concat(r!=null?r:[]),i);if(!c)break;fd(c)?e.accessibility?this.raise(O.DuplicateAccessibilityModifier,{at:o,modifier:c}):(n(o,c,c,"override"),n(o,c,c,"static"),n(o,c,c,"readonly"),e.accessibility=c):(Object.hasOwnProperty.call(e,c)?this.raise(O.DuplicateModifier,{at:o,modifier:c}):(n(o,c,"static","readonly"),n(o,c,"static","override"),n(o,c,"override","readonly"),n(o,c,"abstract","override"),a(o,c,"declare","override"),a(o,c,"static","abstract")),e[c]=!0),r!=null&&r.includes(c)&&this.raise(O.InvalidModifierOnTypeMember,{at:o,modifier:c})}}tsIsListTerminator(e){switch(e){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}throw new Error("Unreachable")}tsParseList(e,t){let r=[];for(;!this.tsIsListTerminator(e);)r.push(t());return r}tsParseDelimitedList(e,t,r){return KE(this.tsParseDelimitedListWorker(e,t,!0,r))}tsParseDelimitedListWorker(e,t,r,i){let n=[],a=-1;for(;!this.tsIsListTerminator(e);){a=-1;let o=t();if(o==null)return;if(n.push(o),this.eat(12)){a=this.state.lastTokStart;continue}if(this.tsIsListTerminator(e))break;r&&this.expect(12);return}return i&&(i.value=a),n}tsParseBracketedList(e,t,r,i,n){i||(r?this.expect(0):this.expect(47));let a=this.tsParseDelimitedList(e,t,n);return r?this.expect(3):this.expect(48),a}tsParseImportType(){let e=this.startNode();return this.expect(83),this.expect(10),this.match(129)||this.raise(O.UnsupportedImportTypeArgument,{at:this.state.startLoc}),e.argument=this.parseExprAtom(),this.expect(11),this.eat(16)&&(e.qualifier=this.tsParseEntityName()),this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSImportType")}tsParseEntityName(e=!0){let t=this.parseIdentifier(e);for(;this.eat(16);){let r=this.startNodeAtNode(t);r.left=t,r.right=this.parseIdentifier(e),t=this.finishNode(r,"TSQualifiedName")}return t}tsParseTypeReference(){let e=this.startNode();return e.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSTypeReference")}tsParseThisTypePredicate(e){this.next();let t=this.startNodeAtNode(e);return t.parameterName=e,t.typeAnnotation=this.tsParseTypeAnnotation(!1),t.asserts=!1,this.finishNode(t,"TSTypePredicate")}tsParseThisTypeNode(){let e=this.startNode();return this.next(),this.finishNode(e,"TSThisType")}tsParseTypeQuery(){let e=this.startNode();return this.expect(87),this.match(83)?e.exprName=this.tsParseImportType():e.exprName=this.tsParseEntityName(),this.finishNode(e,"TSTypeQuery")}tsParseTypeParameter(){let e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsEatThenParseType(81),e.default=this.tsEatThenParseType(29),this.finishNode(e,"TSTypeParameter")}tsTryParseTypeParameters(){if(this.match(47))return this.tsParseTypeParameters()}tsParseTypeParameters(){let e=this.startNode();this.match(47)||this.match(138)?this.next():this.unexpected();let t={value:-1};return e.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this),!1,!0,t),e.params.length===0&&this.raise(O.EmptyTypeParameters,{at:e}),t.value!==-1&&this.addExtra(e,"trailingComma",t.value),this.finishNode(e,"TSTypeParameterDeclaration")}tsTryNextParseConstantContext(){if(this.lookahead().type!==75)return null;this.next();let e=this.tsParseTypeReference();return e.typeParameters&&this.raise(O.CannotFindName,{at:e.typeName,name:"const"}),e}tsFillSignature(e,t){let r=e===19,i="parameters",n="typeAnnotation";t.typeParameters=this.tsTryParseTypeParameters(),this.expect(10),t[i]=this.tsParseBindingListForSignature(),r?t[n]=this.tsParseTypeOrTypePredicateAnnotation(e):this.match(e)&&(t[n]=this.tsParseTypeOrTypePredicateAnnotation(e))}tsParseBindingListForSignature(){return this.parseBindingList(11,41).map(e=>(e.type!=="Identifier"&&e.type!=="RestElement"&&e.type!=="ObjectPattern"&&e.type!=="ArrayPattern"&&this.raise(O.UnsupportedSignatureParameterKind,{at:e,type:e.type}),e))}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(e,t){return this.tsFillSignature(14,t),this.tsParseTypeMemberSemicolon(),this.finishNode(t,e)}tsIsUnambiguouslyIndexSignature(){return this.next(),K(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(e){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let t=this.parseIdentifier();t.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(t),this.expect(3),e.parameters=[t];let r=this.tsTryParseTypeAnnotation();return r&&(e.typeAnnotation=r),this.tsParseTypeMemberSemicolon(),this.finishNode(e,"TSIndexSignature")}tsParsePropertyOrMethodSignature(e,t){this.eat(17)&&(e.optional=!0);let r=e;if(this.match(10)||this.match(47)){t&&this.raise(O.ReadonlyForMethodSignature,{at:e});let i=r;i.kind&&this.match(47)&&this.raise(O.AccesorCannotHaveTypeParameters,{at:this.state.curPosition()}),this.tsFillSignature(14,i),this.tsParseTypeMemberSemicolon();let n="parameters",a="typeAnnotation";if(i.kind==="get")i[n].length>0&&(this.raise(m.BadGetterArity,{at:this.state.curPosition()}),this.isThisParam(i[n][0])&&this.raise(O.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}));else if(i.kind==="set"){if(i[n].length!==1)this.raise(m.BadSetterArity,{at:this.state.curPosition()});else{let o=i[n][0];this.isThisParam(o)&&this.raise(O.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}),o.type==="Identifier"&&o.optional&&this.raise(O.SetAccesorCannotHaveOptionalParameter,{at:this.state.curPosition()}),o.type==="RestElement"&&this.raise(O.SetAccesorCannotHaveRestParameter,{at:this.state.curPosition()})}i[a]&&this.raise(O.SetAccesorCannotHaveReturnType,{at:i[a]})}else i.kind="method";return this.finishNode(i,"TSMethodSignature")}else{let i=r;t&&(i.readonly=!0);let n=this.tsTryParseTypeAnnotation();return n&&(i.typeAnnotation=n),this.tsParseTypeMemberSemicolon(),this.finishNode(i,"TSPropertySignature")}}tsParseTypeMember(){let e=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",e);if(this.match(77)){let r=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",e):(e.key=this.createIdentifier(r,"new"),this.tsParsePropertyOrMethodSignature(e,!1))}this.tsParseModifiers({modified:e,allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]});let t=this.tsTryParseIndexSignature(e);return t||(this.parsePropertyName(e),!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.tsTokenCanFollowModifier()&&(e.kind=e.key.name,this.parsePropertyName(e)),this.tsParsePropertyOrMethodSignature(e,!!e.readonly))}tsParseTypeLiteral(){let e=this.startNode();return e.members=this.tsParseObjectTypeMembers(),this.finishNode(e,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let e=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),e}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(118):(this.isContextual(118)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedTypeParameter(){let e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsExpectThenParseType(58),this.finishNode(e,"TSTypeParameter")}tsParseMappedType(){let e=this.startNode();return this.expect(5),this.match(53)?(e.readonly=this.state.value,this.next(),this.expectContextual(118)):this.eatContextual(118)&&(e.readonly=!0),this.expect(0),e.typeParameter=this.tsParseMappedTypeParameter(),e.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(e.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(e.optional=!0),e.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(e,"TSMappedType")}tsParseTupleType(){let e=this.startNode();e.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let t=!1,r=null;return e.elementTypes.forEach(i=>{var n;let{type:a}=i;t&&a!=="TSRestType"&&a!=="TSOptionalType"&&!(a==="TSNamedTupleMember"&&i.optional)&&this.raise(O.OptionalTypeBeforeRequired,{at:i}),t=t||a==="TSNamedTupleMember"&&i.optional||a==="TSOptionalType",a==="TSRestType"&&(i=i.typeAnnotation,a=i.type);let o=a==="TSNamedTupleMember";r=(n=r)!=null?n:o,r!==o&&this.raise(O.MixedLabeledAndUnlabeledElements,{at:i})}),this.finishNode(e,"TSTupleType")}tsParseTupleElementType(){let{start:e,startLoc:t}=this.state,r=this.eat(21),i=this.tsParseType(),n=this.eat(17);if(this.eat(14)){let o=this.startNodeAtNode(i);o.optional=n,i.type==="TSTypeReference"&&!i.typeParameters&&i.typeName.type==="Identifier"?o.label=i.typeName:(this.raise(O.InvalidTupleMemberLabel,{at:i}),o.label=i),o.elementType=this.tsParseType(),i=this.finishNode(o,"TSNamedTupleMember")}else if(n){let o=this.startNodeAtNode(i);o.typeAnnotation=i,i=this.finishNode(o,"TSOptionalType")}if(r){let o=this.startNodeAt(e,t);o.typeAnnotation=i,i=this.finishNode(o,"TSRestType")}return i}tsParseParenthesizedType(){let e=this.startNode();return this.expect(10),e.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(e,"TSParenthesizedType")}tsParseFunctionOrConstructorType(e,t){let r=this.startNode();return e==="TSConstructorType"&&(r.abstract=!!t,t&&this.next(),this.next()),this.tsFillSignature(19,r),this.finishNode(r,e)}tsParseLiteralTypeNode(){let e=this.startNode();return e.literal=(()=>{switch(this.state.type){case 130:case 131:case 129:case 85:case 86:return this.parseExprAtom();default:throw this.unexpected()}})(),this.finishNode(e,"TSLiteralType")}tsParseTemplateLiteralType(){let e=this.startNode();return e.literal=this.parseTemplate(!1),this.finishNode(e,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let e=this.tsParseThisTypeNode();return this.isContextual(113)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(e):e}tsParseNonArrayType(){switch(this.state.type){case 129:case 130:case 131:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let e=this.startNode(),t=this.lookahead();if(t.type!==130&&t.type!==131)throw this.unexpected();return e.literal=this.parseMaybeUnary(),this.finishNode(e,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:e}=this.state;if(K(e)||e===88||e===84){let t=e===88?"TSVoidKeyword":e===84?"TSNullKeyword":XE(this.state.value);if(t!==void 0&&this.lookaheadCharCode()!==46){let r=this.startNode();return this.next(),this.finishNode(r,t)}return this.tsParseTypeReference()}}}throw this.unexpected()}tsParseArrayTypeOrHigher(){let e=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){let t=this.startNodeAtNode(e);t.elementType=e,this.expect(3),e=this.finishNode(t,"TSArrayType")}else{let t=this.startNodeAtNode(e);t.objectType=e,t.indexType=this.tsParseType(),this.expect(3),e=this.finishNode(t,"TSIndexedAccessType")}return e}tsParseTypeOperator(){let e=this.startNode(),t=this.state.value;return this.next(),e.operator=t,e.typeAnnotation=this.tsParseTypeOperatorOrHigher(),t==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(e),this.finishNode(e,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(e){switch(e.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(O.UnexpectedReadonly,{at:e})}}tsParseInferType(){let e=this.startNode();this.expectContextual(112);let t=this.startNode();return t.name=this.tsParseTypeParameterName(),e.typeParameter=this.finishNode(t,"TSTypeParameter"),this.finishNode(e,"TSInferType")}tsParseTypeOperatorOrHigher(){return rE(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(112)?this.tsParseInferType():this.tsParseArrayTypeOrHigher()}tsParseUnionOrIntersectionType(e,t,r){let i=this.startNode(),n=this.eat(r),a=[];do a.push(t());while(this.eat(r));return a.length===1&&!n?a[0]:(i.types=a,this.finishNode(i,e))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(K(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:e}=this.state,t=e.length;try{return this.parseObjectLike(8,!0),e.length===t}catch{return!1}}if(this.match(0)){this.next();let{errors:e}=this.state,t=e.length;try{return this.parseBindingList(3,93,!0),e.length===t}catch{return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(e){return this.tsInType(()=>{let t=this.startNode();this.expect(e);let r=this.startNode(),i=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(i&&this.match(78)){let o=this.tsParseThisTypeOrThisTypePredicate();return o.type==="TSThisType"?(r.parameterName=o,r.asserts=!0,r.typeAnnotation=null,o=this.finishNode(r,"TSTypePredicate")):(this.resetStartLocationFromNode(o,r),o.asserts=!0),t.typeAnnotation=o,this.finishNode(t,"TSTypeAnnotation")}let n=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!n)return i?(r.parameterName=this.parseIdentifier(),r.asserts=i,r.typeAnnotation=null,t.typeAnnotation=this.finishNode(r,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,t);let a=this.tsParseTypeAnnotation(!1);return r.parameterName=n,r.typeAnnotation=a,r.asserts=i,t.typeAnnotation=this.finishNode(r,"TSTypePredicate"),this.finishNode(t,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){return this.match(14)?this.tsParseTypeOrTypePredicateAnnotation(14):void 0}tsTryParseTypeAnnotation(){return this.match(14)?this.tsParseTypeAnnotation():void 0}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let e=this.parseIdentifier();if(this.isContextual(113)&&!this.hasPrecedingLineBreak())return this.next(),e}tsParseTypePredicateAsserts(){if(this.state.type!==106)return!1;let e=this.state.containsEsc;return this.next(),!K(this.state.type)&&!this.match(78)?!1:(e&&this.raise(m.InvalidEscapedReservedWord,{at:this.state.lastTokStartLoc,reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(e=!0,t=this.startNode()){return this.tsInType(()=>{e&&this.expect(14),t.typeAnnotation=this.tsParseType()}),this.finishNode(t,"TSTypeAnnotation")}tsParseType(){pd(this.state.inType);let e=this.tsParseNonConditionalType();if(this.hasPrecedingLineBreak()||!this.eat(81))return e;let t=this.startNodeAtNode(e);return t.checkType=e,t.extendsType=this.tsParseNonConditionalType(),this.expect(17),t.trueType=this.tsParseType(),this.expect(14),t.falseType=this.tsParseType(),this.finishNode(t,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(120)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(O.ReservedTypeAssertion,{at:this.state.startLoc});let e=this.startNode(),t=this.tsTryNextParseConstantContext();return e.typeAnnotation=t||this.tsNextThenParseType(),this.expect(48),e.expression=this.parseMaybeUnary(),this.finishNode(e,"TSTypeAssertion")}tsParseHeritageClause(e){let t=this.state.startLoc,r=this.tsParseDelimitedList("HeritageClauseElement",this.tsParseExpressionWithTypeArguments.bind(this));return r.length||this.raise(O.EmptyHeritageClauseType,{at:t,token:e}),r}tsParseExpressionWithTypeArguments(){let e=this.startNode();return e.expression=this.tsParseEntityName(),this.match(47)&&(e.typeParameters=this.tsParseTypeArguments()),this.finishNode(e,"TSExpressionWithTypeArguments")}tsParseInterfaceDeclaration(e,t={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(125),t.declare&&(e.declare=!0),K(this.state.type)?(e.id=this.parseIdentifier(),this.checkIdentifier(e.id,yE)):(e.id=null,this.raise(O.MissingInterfaceName,{at:this.state.startLoc})),e.typeParameters=this.tsTryParseTypeParameters(),this.eat(81)&&(e.extends=this.tsParseHeritageClause("extends"));let r=this.startNode();return r.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),e.body=this.finishNode(r,"TSInterfaceBody"),this.finishNode(e,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(e){return e.id=this.parseIdentifier(),this.checkIdentifier(e.id,gE),e.typeAnnotation=this.tsInType(()=>{if(e.typeParameters=this.tsTryParseTypeParameters(),this.expect(29),this.isContextual(111)&&this.lookahead().type!==16){let t=this.startNode();return this.next(),this.finishNode(t,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(e,"TSTypeAliasDeclaration")}tsInNoContext(e){let t=this.state.context;this.state.context=[t[0]];try{return e()}finally{this.state.context=t}}tsInType(e){let t=this.state.inType;this.state.inType=!0;try{return e()}finally{this.state.inType=t}}tsEatThenParseType(e){return this.match(e)?this.tsNextThenParseType():void 0}tsExpectThenParseType(e){return this.tsDoThenParseType(()=>this.expect(e))}tsNextThenParseType(){return this.tsDoThenParseType(()=>this.next())}tsDoThenParseType(e){return this.tsInType(()=>(e(),this.tsParseType()))}tsParseEnumMember(){let e=this.startNode();return e.id=this.match(129)?this.parseExprAtom():this.parseIdentifier(!0),this.eat(29)&&(e.initializer=this.parseMaybeAssignAllowIn()),this.finishNode(e,"TSEnumMember")}tsParseEnumDeclaration(e,t={}){return t.const&&(e.const=!0),t.declare&&(e.declare=!0),this.expectContextual(122),e.id=this.parseIdentifier(),this.checkIdentifier(e.id,e.const?PE:Md),this.expect(5),e.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(e,"TSEnumDeclaration")}tsParseModuleBlock(){let e=this.startNode();return this.scope.enter(Rs),this.expect(5),this.parseBlockOrModuleBlockBody(e.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(e,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(e,t=!1){if(e.id=this.parseIdentifier(),t||this.checkIdentifier(e.id,TE),this.eat(16)){let r=this.startNode();this.tsParseModuleOrNamespaceDeclaration(r,!0),e.body=r}else this.scope.enter(rn),this.prodParam.enter(Us),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(e,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(e){return this.isContextual(109)?(e.global=!0,e.id=this.parseIdentifier()):this.match(129)?e.id=this.parseExprAtom():this.unexpected(),this.match(5)?(this.scope.enter(rn),this.prodParam.enter(Us),e.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(e,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(e,t){e.isExport=t||!1,e.id=this.parseIdentifier(),this.checkIdentifier(e.id,pt),this.expect(29);let r=this.tsParseModuleReference();return e.importKind==="type"&&r.type!=="TSExternalModuleReference"&&this.raise(O.ImportAliasHasImportType,{at:r}),e.moduleReference=r,this.semicolon(),this.finishNode(e,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(116)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){let e=this.startNode();if(this.expectContextual(116),this.expect(10),!this.match(129))throw this.unexpected();return e.expression=this.parseExprAtom(),this.expect(11),this.finishNode(e,"TSExternalModuleReference")}tsLookAhead(e){let t=this.state.clone(),r=e();return this.state=t,r}tsTryParseAndCatch(e){let t=this.tryParse(r=>e()||r());if(!(t.aborted||!t.node))return t.error&&(this.state=t.failState),t.node}tsTryParse(e){let t=this.state.clone(),r=e();if(r!==void 0&&r!==!1)return r;this.state=t}tsTryParseDeclare(e){if(this.isLineTerminator())return;let t=this.state.type,r;return this.isContextual(99)&&(t=74,r="let"),this.tsInAmbientContext(()=>{if(t===68)return e.declare=!0,this.parseFunctionStatement(e,!1,!0);if(t===80)return e.declare=!0,this.parseClass(e,!0,!1);if(t===122)return this.tsParseEnumDeclaration(e,{declare:!0});if(t===109)return this.tsParseAmbientExternalModuleDeclaration(e);if(t===75||t===74)return!this.match(75)||!this.isLookaheadContextual("enum")?(e.declare=!0,this.parseVarStatement(e,r||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(e,{const:!0,declare:!0}));if(t===125){let i=this.tsParseInterfaceDeclaration(e,{declare:!0});if(i)return i}if(K(t))return this.tsParseDeclaration(e,this.state.value,!0)})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0)}tsParseExpressionStatement(e,t){switch(t.name){case"declare":{let r=this.tsTryParseDeclare(e);if(r)return r.declare=!0,r;break}case"global":if(this.match(5)){this.scope.enter(rn),this.prodParam.enter(Us);let r=e;return r.global=!0,r.id=t,r.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(r,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(e,t.name,!1)}}tsParseDeclaration(e,t,r){switch(t){case"abstract":if(this.tsCheckLineTerminator(r)&&(this.match(80)||K(this.state.type)))return this.tsParseAbstractDeclaration(e);break;case"module":if(this.tsCheckLineTerminator(r)){if(this.match(129))return this.tsParseAmbientExternalModuleDeclaration(e);if(K(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e)}break;case"namespace":if(this.tsCheckLineTerminator(r)&&K(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(e);break;case"type":if(this.tsCheckLineTerminator(r)&&K(this.state.type))return this.tsParseTypeAliasDeclaration(e);break}}tsCheckLineTerminator(e){return e?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(e,t){if(!this.match(47))return;let r=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let i=this.tsTryParseAndCatch(()=>{let n=this.startNodeAt(e,t);return n.typeParameters=this.tsParseTypeParameters(),super.parseFunctionParams(n),n.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),n});if(this.state.maybeInArrowParameters=r,!!i)return this.parseArrowExpression(i,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){let e=this.startNode();return e.params=this.tsInType(()=>this.tsInNoContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),e.params.length===0&&this.raise(O.EmptyTypeArguments,{at:e}),this.expect(48),this.finishNode(e,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return iE(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(e,t){let r=this.state.start,i=this.state.startLoc,n,a=!1,o=!1;if(e!==void 0){let u={};this.tsParseModifiers({modified:u,allowedModifiers:["public","private","protected","override","readonly"]}),n=u.accessibility,o=u.override,a=u.readonly,e===!1&&(n||a||o)&&this.raise(O.UnexpectedParameterModifier,{at:i})}let c=this.parseMaybeDefault();this.parseAssignableListItemTypes(c);let l=this.parseMaybeDefault(c.start,c.loc.start,c);if(n||a||o){let u=this.startNodeAt(r,i);return t.length&&(u.decorators=t),n&&(u.accessibility=n),a&&(u.readonly=a),o&&(u.override=o),l.type!=="Identifier"&&l.type!=="AssignmentPattern"&&this.raise(O.UnsupportedParameterPropertyKind,{at:u}),u.parameter=l,this.finishNode(u,"TSParameterProperty")}return t.length&&(c.decorators=t),l}isSimpleParameter(e){return e.type==="TSParameterProperty"&&super.isSimpleParameter(e.parameter)||super.isSimpleParameter(e)}parseFunctionBodyAndFinish(e,t,r=!1){this.match(14)&&(e.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));let i=t==="FunctionDeclaration"?"TSDeclareFunction":t==="ClassMethod"||t==="ClassPrivateMethod"?"TSDeclareMethod":void 0;if(i&&!this.match(5)&&this.isLineTerminator()){this.finishNode(e,i);return}if(i==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(O.DeclareFunctionHasImplementation,{at:e}),e.declare)){super.parseFunctionBodyAndFinish(e,i,r);return}super.parseFunctionBodyAndFinish(e,t,r)}registerFunctionStatementId(e){!e.body&&e.id?this.checkIdentifier(e.id,cd):super.registerFunctionStatementId(...arguments)}tsCheckForInvalidTypeCasts(e){e.forEach(t=>{(t==null?void 0:t.type)==="TSTypeCastExpression"&&this.raise(O.UnexpectedTypeAnnotation,{at:t.typeAnnotation})})}toReferencedList(e,t){return this.tsCheckForInvalidTypeCasts(e),e}parseArrayLike(...e){let t=super.parseArrayLike(...e);return t.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(t.elements),t}parseSubscript(e,t,r,i,n){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let o=this.startNodeAt(t,r);return o.expression=e,this.finishNode(o,"TSNonNullExpression")}let a=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(i)return n.stop=!0,e;n.optionalChainMember=a=!0,this.next()}if(this.match(47)||this.match(51)){let o,c=this.tsTryParseAndCatch(()=>{if(!i&&this.atPossibleAsyncArrow(e)){let h=this.tsTryParseGenericAsyncArrowFunction(t,r);if(h)return h}let l=this.startNodeAt(t,r);l.callee=e;let u=this.tsParseTypeArgumentsInExpression();if(u){if(a&&!this.match(10)&&(o=this.state.curPosition(),this.unexpected()),!i&&this.eat(10))return l.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(l.arguments),l.typeParameters=u,n.optionalChainMember&&(l.optional=a),this.finishCallExpression(l,n.optionalChainMember);if(cn(this.state.type)){let h=this.parseTaggedTemplateExpression(e,t,r,n);return h.typeParameters=u,h}}this.unexpected()});if(o&&this.unexpected(o,10),c)return c}return super.parseSubscript(e,t,r,i,n)}parseNewArguments(e){if(this.match(47)||this.match(51)){let t=this.tsTryParseAndCatch(()=>{let r=this.tsParseTypeArgumentsInExpression();return this.match(10)||this.unexpected(),r});t&&(e.typeParameters=t)}super.parseNewArguments(e)}parseExprOp(e,t,r,i){if(sn(58)>i&&!this.hasPrecedingLineBreak()&&this.isContextual(93)){let n=this.startNodeAt(t,r);n.expression=e;let a=this.tsTryNextParseConstantContext();return a?n.typeAnnotation=a:n.typeAnnotation=this.tsNextThenParseType(),this.finishNode(n,"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(n,t,r,i)}return super.parseExprOp(e,t,r,i)}checkReservedWord(e,t,r,i){this.state.isAmbientContext||super.checkReservedWord(e,t,r,i)}checkDuplicateExports(){}parseImport(e){if(e.importKind="value",K(this.state.type)||this.match(55)||this.match(5)){let r=this.lookahead();if(this.isContextual(126)&&r.type!==12&&r.type!==97&&r.type!==29&&(e.importKind="type",this.next(),r=this.lookahead()),K(this.state.type)&&r.type===29)return this.tsParseImportEqualsDeclaration(e)}let t=super.parseImport(e);return t.importKind==="type"&&t.specifiers.length>1&&t.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(O.TypeImportCannotSpecifyDefaultAndNamed,{at:t}),t}parseExport(e){if(this.match(83))return this.next(),this.isContextual(126)&&this.lookaheadCharCode()!==61?(e.importKind="type",this.next()):e.importKind="value",this.tsParseImportEqualsDeclaration(e,!0);if(this.eat(29)){let t=e;return t.expression=this.parseExpression(),this.semicolon(),this.finishNode(t,"TSExportAssignment")}else if(this.eatContextual(93)){let t=e;return this.expectContextual(124),t.id=this.parseIdentifier(),this.semicolon(),this.finishNode(t,"TSNamespaceExportDeclaration")}else return this.isContextual(126)&&this.lookahead().type===5?(this.next(),e.exportKind="type"):e.exportKind="value",super.parseExport(e)}isAbstractClass(){return this.isContextual(120)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){let e=this.startNode();return this.next(),e.abstract=!0,this.parseClass(e,!0,!0),e}if(this.match(125)){let e=this.tsParseInterfaceDeclaration(this.startNode());if(e)return e}return super.parseExportDefaultExpression()}parseVarStatement(e,t,r=!1){let{isAmbientContext:i}=this.state,n=super.parseVarStatement(e,t,r||i);if(!i)return n;for(let{id:a,init:o}of n.declarations)!o||(t!=="const"||!!a.typeAnnotation?this.raise(O.InitializerNotAllowedInAmbientContext,{at:o}):o.type!=="StringLiteral"&&o.type!=="BooleanLiteral"&&o.type!=="NumericLiteral"&&o.type!=="BigIntLiteral"&&(o.type!=="TemplateLiteral"||o.expressions.length>0)&&!YE(o)&&this.raise(O.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,{at:o}));return n}parseStatementContent(e,t){if(this.match(75)&&this.isLookaheadContextual("enum")){let r=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(r,{const:!0})}if(this.isContextual(122))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(125)){let r=this.tsParseInterfaceDeclaration(this.startNode());if(r)return r}return super.parseStatementContent(e,t)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(e,t){return t.some(r=>fd(r)?e.accessibility===r:!!e[r])}tsIsStartOfStaticBlocks(){return this.isContextual(104)&&this.lookaheadCharCode()===123}parseClassMember(e,t,r){let i=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({modified:t,allowedModifiers:i,stopOnStartOfClassStaticBlock:!0});let n=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(t,i)&&this.raise(O.StaticBlockCannotHaveModifier,{at:this.state.curPosition()}),this.parseClassStaticBlock(e,t)):this.parseClassMemberWithIsStatic(e,t,r,!!t.static)};t.declare?this.tsInAmbientContext(n):n()}parseClassMemberWithIsStatic(e,t,r,i){let n=this.tsTryParseIndexSignature(t);if(n){e.body.push(n),t.abstract&&this.raise(O.IndexSignatureHasAbstract,{at:t}),t.accessibility&&this.raise(O.IndexSignatureHasAccessibility,{at:t,modifier:t.accessibility}),t.declare&&this.raise(O.IndexSignatureHasDeclare,{at:t}),t.override&&this.raise(O.IndexSignatureHasOverride,{at:t});return}!this.state.inAbstractClass&&t.abstract&&this.raise(O.NonAbstractClassHasAbstractMethod,{at:t}),t.override&&(r.hadSuperClass||this.raise(O.OverrideNotInSubClass,{at:t})),super.parseClassMemberWithIsStatic(e,t,r,i)}parsePostMemberNameModifiers(e){this.eat(17)&&(e.optional=!0),e.readonly&&this.match(10)&&this.raise(O.ClassMethodHasReadonly,{at:e}),e.declare&&this.match(10)&&this.raise(O.ClassMethodHasDeclare,{at:e})}parseExpressionStatement(e,t){return(t.type==="Identifier"?this.tsParseExpressionStatement(e,t):void 0)||super.parseExpressionStatement(e,t)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(e,t,r,i){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(e,t,r,i);let n=this.tryParse(()=>super.parseConditional(e,t,r));return n.node?(n.error&&(this.state=n.failState),n.node):(n.error&&super.setOptionalParametersError(i,n.error),e)}parseParenItem(e,t,r){if(e=super.parseParenItem(e,t,r),this.eat(17)&&(e.optional=!0,this.resetEndLocation(e)),this.match(14)){let i=this.startNodeAt(t,r);return i.expression=e,i.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(i,"TSTypeCastExpression")}return e}parseExportDeclaration(e){if(!this.state.isAmbientContext&&this.isContextual(121))return this.tsInAmbientContext(()=>this.parseExportDeclaration(e));let t=this.state.start,r=this.state.startLoc,i=this.eatContextual(121);if(i&&(this.isContextual(121)||!this.shouldParseExportDeclaration()))throw this.raise(O.ExpectedAmbientAfterExportDeclare,{at:this.state.startLoc});let a=K(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(e);return a?((a.type==="TSInterfaceDeclaration"||a.type==="TSTypeAliasDeclaration"||i)&&(e.exportKind="type"),i&&(this.resetStartLocation(a,t,r),a.declare=!0),a):null}parseClassId(e,t,r){if((!t||r)&&this.isContextual(110))return;super.parseClassId(e,t,r,e.declare?cd:_d);let i=this.tsTryParseTypeParameters();i&&(e.typeParameters=i)}parseClassPropertyAnnotation(e){!e.optional&&this.eat(35)&&(e.definite=!0);let t=this.tsTryParseTypeAnnotation();t&&(e.typeAnnotation=t)}parseClassProperty(e){if(this.parseClassPropertyAnnotation(e),this.state.isAmbientContext&&this.match(29)&&this.raise(O.DeclareClassFieldHasInitializer,{at:this.state.startLoc}),e.abstract&&this.match(29)){let{key:t}=e;this.raise(O.AbstractPropertyHasInitializer,{at:this.state.startLoc,propertyName:t.type==="Identifier"&&!e.computed?t.name:`[${this.input.slice(t.start,t.end)}]`})}return super.parseClassProperty(e)}parseClassPrivateProperty(e){return e.abstract&&this.raise(O.PrivateElementHasAbstract,{at:e}),e.accessibility&&this.raise(O.PrivateElementHasAccessibility,{at:e,modifier:e.accessibility}),this.parseClassPropertyAnnotation(e),super.parseClassPrivateProperty(e)}pushClassMethod(e,t,r,i,n,a){let o=this.tsTryParseTypeParameters();o&&n&&this.raise(O.ConstructorHasTypeParameters,{at:o});let{declare:c=!1,kind:l}=t;c&&(l==="get"||l==="set")&&this.raise(O.DeclareAccessor,{at:t,kind:l}),o&&(t.typeParameters=o),super.pushClassMethod(e,t,r,i,n,a)}pushClassPrivateMethod(e,t,r,i){let n=this.tsTryParseTypeParameters();n&&(t.typeParameters=n),super.pushClassPrivateMethod(e,t,r,i)}declareClassPrivateMethodInScope(e,t){e.type!=="TSDeclareMethod"&&(e.type==="MethodDefinition"&&!e.value.body||super.declareClassPrivateMethodInScope(e,t))}parseClassSuper(e){super.parseClassSuper(e),e.superClass&&(this.match(47)||this.match(51))&&(e.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(110)&&(e.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(e,...t){let r=this.tsTryParseTypeParameters();r&&(e.typeParameters=r),super.parseObjPropValue(e,...t)}parseFunctionParams(e,t){let r=this.tsTryParseTypeParameters();r&&(e.typeParameters=r),super.parseFunctionParams(e,t)}parseVarId(e,t){super.parseVarId(e,t),e.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(e.definite=!0);let r=this.tsTryParseTypeAnnotation();r&&(e.id.typeAnnotation=r,this.resetEndLocation(e.id))}parseAsyncArrowFromCallExpression(e,t){return this.match(14)&&(e.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(e,t)}parseMaybeAssign(...e){var t,r,i,n,a,o,c;let l,u,h;if(this.hasPlugin("jsx")&&(this.match(138)||this.match(47))){if(l=this.state.clone(),u=this.tryParse(()=>super.parseMaybeAssign(...e),l),!u.error)return u.node;let{context:y}=this.state,g=y[y.length-1];(g===te.j_oTag||g===te.j_expr)&&y.pop()}if(!((t=u)!=null&&t.error)&&!this.match(47))return super.parseMaybeAssign(...e);let p;l=l||this.state.clone();let f=this.tryParse(y=>{var g,b,T;p=this.tsParseTypeParameters();let x=super.parseMaybeAssign(...e);return(x.type!=="ArrowFunctionExpression"||(g=x.extra)!=null&&g.parenthesized)&&y(),((b=p)==null?void 0:b.params.length)!==0&&this.resetStartLocationFromNode(x,p),x.typeParameters=p,this.hasPlugin("jsx")&&x.typeParameters.params.length===1&&!((T=x.typeParameters.extra)!=null&&T.trailingComma)&&x.typeParameters.params[0].constraint,x},l);if(!f.error&&!f.aborted)return p&&this.reportReservedArrowTypeParam(p),f.node;if(!u&&(pd(!this.hasPlugin("jsx")),h=this.tryParse(()=>super.parseMaybeAssign(...e),l),!h.error))return h.node;if((r=u)!=null&&r.node)return this.state=u.failState,u.node;if(f.node)return this.state=f.failState,p&&this.reportReservedArrowTypeParam(p),f.node;if((i=h)!=null&&i.node)return this.state=h.failState,h.node;throw(n=u)!=null&&n.thrown?u.error:f.thrown?f.error:(a=h)!=null&&a.thrown?h.error:((o=u)==null?void 0:o.error)||f.error||((c=h)==null?void 0:c.error)}reportReservedArrowTypeParam(e){var t;e.params.length===1&&!((t=e.extra)!=null&&t.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(O.ReservedArrowTypeParam,{at:e})}parseMaybeUnary(e){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(e)}parseArrow(e){if(this.match(14)){let t=this.tryParse(r=>{let i=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&r(),i});if(t.aborted)return;t.thrown||(t.error&&(this.state=t.failState),e.returnType=t.node)}return super.parseArrow(e)}parseAssignableListItemTypes(e){this.eat(17)&&(e.type!=="Identifier"&&!this.state.isAmbientContext&&!this.state.inType&&this.raise(O.PatternIsOptional,{at:e}),e.optional=!0);let t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t),this.resetEndLocation(e),e}isAssignable(e,t){switch(e.type){case"TSTypeCastExpression":return this.isAssignable(e.expression,t);case"TSParameterProperty":return!0;default:return super.isAssignable(e,t)}}toAssignable(e,t=!1){switch(e.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(e,t);break;case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":t?this.expressionScope.recordArrowParemeterBindingError(O.UnexpectedTypeCastInParameter,{at:e}):this.raise(O.UnexpectedTypeCastInParameter,{at:e}),this.toAssignable(e.expression,t);break;case"AssignmentExpression":!t&&e.left.type==="TSTypeCastExpression"&&(e.left=this.typeCastToParameter(e.left));default:super.toAssignable(e,t)}}toAssignableParenthesizedExpression(e,t){switch(e.expression.type){case"TSAsExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;default:super.toAssignable(e,t)}}checkToRestConversion(e,t){switch(e.type){case"TSAsExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(e.expression,!1);break;default:super.checkToRestConversion(e,t)}}isValidLVal(e,t,r){return HE({TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(r!==as||!t)&&["expression",!0],TSTypeAssertion:(r!==as||!t)&&["expression",!0]},e)||super.isValidLVal(e,t,r)}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseMaybeDecoratorArguments(e){if(this.match(47)||this.match(51)){let t=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let r=super.parseMaybeDecoratorArguments(e);return r.typeParameters=t,r}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(e)}checkCommaAfterRest(e){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===e?(this.next(),!1):super.checkCommaAfterRest(e)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(...e){let t=super.parseMaybeDefault(...e);return t.type==="AssignmentPattern"&&t.typeAnnotation&&t.right.start<t.typeAnnotation.start&&this.raise(O.TypeAnnotationAfterAssign,{at:t.typeAnnotation}),t}getTokenFromCode(e){if(this.state.inType){if(e===62)return this.finishOp(48,1);if(e===60)return this.finishOp(47,1)}return super.getTokenFromCode(e)}reScan_lt_gt(){let{type:e}=this.state;e===47?(this.state.pos-=1,this.readToken_lt()):e===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:e}=this.state;return e===51?(this.state.pos-=2,this.finishOp(47,1),47):e}toAssignableList(e){for(let t=0;t<e.length;t++){let r=e[t];(r==null?void 0:r.type)==="TSTypeCastExpression"&&(e[t]=this.typeCastToParameter(r))}super.toAssignableList(...arguments)}typeCastToParameter(e){return e.expression.typeAnnotation=e.typeAnnotation,this.resetEndLocation(e.expression,e.typeAnnotation.loc.end),e.expression}shouldParseArrow(e){return this.match(14)?e.every(t=>this.isAssignable(t,!0)):super.shouldParseArrow(e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(e){if(this.match(47)||this.match(51)){let t=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());t&&(e.typeParameters=t)}return super.jsxParseOpeningElementAfterName(e)}getGetterSetterExpectedParamCount(e){let t=super.getGetterSetterExpectedParamCount(e),i=this.getObjectOrClassMethodParams(e)[0];return i&&this.isThisParam(i)?t+1:t}parseCatchClauseParam(){let e=super.parseCatchClauseParam(),t=this.tsTryParseTypeAnnotation();return t&&(e.typeAnnotation=t,this.resetEndLocation(e)),e}tsInAmbientContext(e){let t=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return e()}finally{this.state.isAmbientContext=t}}parseClass(e,...t){let r=this.state.inAbstractClass;this.state.inAbstractClass=!!e.abstract;try{return super.parseClass(e,...t)}finally{this.state.inAbstractClass=r}}tsParseAbstractDeclaration(e){if(this.match(80))return e.abstract=!0,this.parseClass(e,!0,!1);if(this.isContextual(125)){if(!this.hasFollowingLineBreak())return e.abstract=!0,this.raise(O.NonClassMethodPropertyHasAbstractModifer,{at:e}),this.tsParseInterfaceDeclaration(e)}else this.unexpected(null,80)}parseMethod(...e){let t=super.parseMethod(...e);if(t.abstract&&(this.hasPlugin("estree")?!!t.value.body:!!t.body)){let{key:i}=t;this.raise(O.AbstractMethodHasImplementation,{at:t,methodName:i.type==="Identifier"&&!t.computed?i.name:`[${this.input.slice(i.start,i.end)}]`})}return t}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(e,t,r,i){return!t&&i?(this.parseTypeOnlyImportExportSpecifier(e,!1,r),this.finishNode(e,"ExportSpecifier")):(e.exportKind="value",super.parseExportSpecifier(e,t,r,i))}parseImportSpecifier(e,t,r,i){return!t&&i?(this.parseTypeOnlyImportExportSpecifier(e,!0,r),this.finishNode(e,"ImportSpecifier")):(e.importKind="value",super.parseImportSpecifier(e,t,r,i))}parseTypeOnlyImportExportSpecifier(e,t,r){let i=t?"imported":"local",n=t?"local":"exported",a=e[i],o,c=!1,l=!0,u=a.loc.start;if(this.isContextual(93)){let p=this.parseIdentifier();if(this.isContextual(93)){let f=this.parseIdentifier();ft(this.state.type)?(c=!0,a=p,o=t?this.parseIdentifier():this.parseModuleExportName(),l=!1):(o=f,l=!1)}else ft(this.state.type)?(l=!1,o=t?this.parseIdentifier():this.parseModuleExportName()):(c=!0,a=p)}else ft(this.state.type)&&(c=!0,t?(a=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(a.name,a.loc.start,!0,!0)):a=this.parseModuleExportName());c&&r&&this.raise(t?O.TypeModifierIsUsedInTypeImports:O.TypeModifierIsUsedInTypeExports,{at:u}),e[i]=a,e[n]=o;let h=t?"importKind":"exportKind";e[h]=c?"type":"value",l&&this.eatContextual(93)&&(e[n]=t?this.parseIdentifier():this.parseModuleExportName()),e[n]||(e[n]=dt(e[i])),t&&this.checkIdentifier(e[n],pt)}};function YE(s){if(s.type!=="MemberExpression")return!1;let{computed:e,property:t}=s;return e&&t.type!=="StringLiteral"&&(t.type!=="TemplateLiteral"||t.expressions.length>0)?!1:qd(s.object)}function qd(s){return s.type==="Identifier"?!0:s.type!=="MemberExpression"||s.computed?!1:qd(s.object)}var dd=ut`placeholders`(s=>({ClassNameIsRequired:s("A class name is required."),UnexpectedSpace:s("Unexpected space in placeholder.")})),QE=s=>class extends s{parsePlaceholder(e){if(this.match(140)){let t=this.startNode();return this.next(),this.assertNoSpace(),t.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(140),this.finishPlaceholder(t,e)}}finishPlaceholder(e,t){let r=!!(e.expectedNode&&e.type==="Placeholder");return e.expectedNode=t,r?e:this.finishNode(e,"Placeholder")}getTokenFromCode(e){return e===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(140,2):super.getTokenFromCode(...arguments)}parseExprAtom(){return this.parsePlaceholder("Expression")||super.parseExprAtom(...arguments)}parseIdentifier(){return this.parsePlaceholder("Identifier")||super.parseIdentifier(...arguments)}checkReservedWord(e){e!==void 0&&super.checkReservedWord(...arguments)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom(...arguments)}isValidLVal(e,...t){return e==="Placeholder"||super.isValidLVal(e,...t)}toAssignable(e){e&&e.type==="Placeholder"&&e.expectedNode==="Expression"?e.expectedNode="Pattern":super.toAssignable(...arguments)}isLet(e){return super.isLet(e)?!0:!this.isContextual(99)||e?!1:this.lookahead().type===140}verifyBreakContinue(e){e.label&&e.label.type==="Placeholder"||super.verifyBreakContinue(...arguments)}parseExpressionStatement(e,t){if(t.type!=="Placeholder"||t.extra&&t.extra.parenthesized)return super.parseExpressionStatement(...arguments);if(this.match(14)){let r=e;return r.label=this.finishPlaceholder(t,"Identifier"),this.next(),r.body=this.parseStatement("label"),this.finishNode(r,"LabeledStatement")}return this.semicolon(),e.name=t.name,this.finishPlaceholder(e,"Statement")}parseBlock(){return this.parsePlaceholder("BlockStatement")||super.parseBlock(...arguments)}parseFunctionId(){return this.parsePlaceholder("Identifier")||super.parseFunctionId(...arguments)}parseClass(e,t,r){let i=t?"ClassDeclaration":"ClassExpression";this.next(),this.takeDecorators(e);let n=this.state.strict,a=this.parsePlaceholder("Identifier");if(a)if(this.match(81)||this.match(140)||this.match(5))e.id=a;else{if(r||!t)return e.id=null,e.body=this.finishPlaceholder(a,"ClassBody"),this.finishNode(e,i);throw this.raise(dd.ClassNameIsRequired,{at:this.state.startLoc})}else this.parseClassId(e,t,r);return this.parseClassSuper(e),e.body=this.parsePlaceholder("ClassBody")||this.parseClassBody(!!e.superClass,n),this.finishNode(e,i)}parseExport(e){let t=this.parsePlaceholder("Identifier");if(!t)return super.parseExport(...arguments);if(!this.isContextual(97)&&!this.match(12))return e.specifiers=[],e.source=null,e.declaration=this.finishPlaceholder(t,"Declaration"),this.finishNode(e,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let r=this.startNode();return r.exported=t,e.specifiers=[this.finishNode(r,"ExportDefaultSpecifier")],super.parseExport(e)}isExportDefaultSpecifier(){if(this.match(65)){let e=this.nextTokenStart();if(this.isUnparsedContextual(e,"from")&&this.input.startsWith(Bt(140),this.nextTokenStartSince(e+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(e){return e.specifiers&&e.specifiers.length>0?!0:super.maybeParseExportDefaultSpecifier(...arguments)}checkExport(e){let{specifiers:t}=e;t!=null&&t.length&&(e.specifiers=t.filter(r=>r.exported.type==="Placeholder")),super.checkExport(e),e.specifiers=t}parseImport(e){let t=this.parsePlaceholder("Identifier");if(!t)return super.parseImport(...arguments);if(e.specifiers=[],!this.isContextual(97)&&!this.match(12))return e.source=this.finishPlaceholder(t,"StringLiteral"),this.semicolon(),this.finishNode(e,"ImportDeclaration");let r=this.startNodeAtNode(t);return r.local=t,this.finishNode(r,"ImportDefaultSpecifier"),e.specifiers.push(r),this.eat(12)&&(this.maybeParseStarImportSpecifier(e)||this.parseNamedImportSpecifiers(e)),this.expectContextual(97),e.source=this.parseImportSource(),this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource(...arguments)}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(dd.UnexpectedSpace,{at:this.state.lastTokEndLoc})}},ZE=s=>class extends s{parseV8Intrinsic(){if(this.match(54)){let e=this.state.startLoc,t=this.startNode();if(this.next(),K(this.state.type)){let r=this.parseIdentifierName(this.state.start),i=this.createIdentifier(t,r);if(i.type="V8IntrinsicIdentifier",this.match(10))return i}this.unexpected(e)}}parseExprAtom(){return this.parseV8Intrinsic()||super.parseExprAtom(...arguments)}};function be(s,e){let[t,r]=typeof e=="string"?[e,{}]:e,i=Object.keys(r),n=i.length===0;return s.some(a=>{if(typeof a=="string")return n&&a===t;{let[o,c]=a;if(o!==t)return!1;for(let l of i)if(c[l]!==r[l])return!1;return!0}})}function Ir(s,e,t){let r=s.find(i=>Array.isArray(i)?i[0]===e:i===e);return r&&Array.isArray(r)?r[1][t]:null}var md=["minimal","fsharp","hack","smart"],yd=["^^","@@","^","%","#"],gd=["hash","bar"];function ew(s){if(be(s,"decorators")){if(be(s,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");let e=Ir(s,"decorators","decoratorsBeforeExport");if(e==null)throw new Error("The 'decorators' plugin requires a 'decoratorsBeforeExport' option, whose value must be a boolean. If you are migrating from Babylon/Babel 6 or want to use the old decorators proposal, you should use the 'decorators-legacy' plugin instead of 'decorators'.");if(typeof e!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean.")}if(be(s,"flow")&&be(s,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(be(s,"placeholders")&&be(s,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(be(s,"pipelineOperator")){let e=Ir(s,"pipelineOperator","proposal");if(!md.includes(e)){let r=md.map(i=>`"${i}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${r}.`)}let t=be(s,["recordAndTuple",{syntaxType:"hash"}]);if(e==="hack"){if(be(s,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(be(s,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let r=Ir(s,"pipelineOperator","topicToken");if(!yd.includes(r)){let i=yd.map(n=>`"${n}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${i}.`)}if(r==="#"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if(e==="smart"&&t)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(be(s,"moduleAttributes")){if(be(s,"importAssertions"))throw new Error("Cannot combine importAssertions and moduleAttributes plugins.");if(Ir(s,"moduleAttributes","version")!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(be(s,"recordAndTuple")&&!gd.includes(Ir(s,"recordAndTuple","syntaxType")))throw new Error("'recordAndTuple' requires 'syntaxType' option whose value should be one of: "+gd.map(e=>`'${e}'`).join(", "));if(be(s,"asyncDoExpressions")&&!be(s,"doExpressions")){let e=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw e.missingPlugins="doExpressions",e}}var Wd={estree:Hb,jsx:GE,flow:VE,typescript:JE,v8intrinsic:ZE,placeholders:QE},tw=Object.keys(Wd),xd={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0};function sw(s){let e={};for(let t of Object.keys(xd))e[t]=s&&s[t]!=null?s[t]:xd[t];return e}var rw=(s,e)=>Object.hasOwnProperty.call(s,e)&&s[e],Vd=s=>s.type==="ParenthesizedExpression"?Vd(s.expression):s,Io=class extends Ao{toAssignable(e,t=!1){var r,i;let n;switch((e.type==="ParenthesizedExpression"||(r=e.extra)!=null&&r.parenthesized)&&(n=Vd(e),t?n.type==="Identifier"?this.expressionScope.recordArrowParemeterBindingError(m.InvalidParenthesizedAssignment,{at:e}):n.type!=="MemberExpression"&&this.raise(m.InvalidParenthesizedAssignment,{at:e}):this.raise(m.InvalidParenthesizedAssignment,{at:e})),e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern";for(let o=0,c=e.properties.length,l=c-1;o<c;o++){var a;let u=e.properties[o],h=o===l;this.toAssignableObjectExpressionProp(u,h,t),h&&u.type==="RestElement"&&(a=e.extra)!=null&&a.trailingCommaLoc&&this.raise(m.RestTrailingComma,{at:e.extra.trailingCommaLoc})}break;case"ObjectProperty":{let{key:o,value:c}=e;this.isPrivateName(o)&&this.classScope.usePrivateName(this.getPrivateNameSV(o),o.loc.start),this.toAssignable(c,t);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,(i=e.extra)==null?void 0:i.trailingCommaLoc,t);break;case"AssignmentExpression":e.operator!=="="&&this.raise(m.MissingEqInAssignment,{at:e.left.loc.end}),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(n,t);break}}toAssignableObjectExpressionProp(e,t,r){if(e.type==="ObjectMethod")this.raise(e.kind==="get"||e.kind==="set"?m.PatternHasAccessor:m.PatternHasMethod,{at:e.key});else if(e.type==="SpreadElement"){e.type="RestElement";let i=e.argument;this.checkToRestConversion(i,!1),this.toAssignable(i,r),t||this.raise(m.RestTrailingComma,{at:e})}else this.toAssignable(e,r)}toAssignableList(e,t,r){let i=e.length-1;for(let n=0;n<=i;n++){let a=e[n];if(!!a){if(a.type==="SpreadElement"){a.type="RestElement";let o=a.argument;this.checkToRestConversion(o,!0),this.toAssignable(o,r)}else this.toAssignable(a,r);a.type==="RestElement"&&(n<i?this.raise(m.RestTrailingComma,{at:a}):t&&this.raise(m.RestTrailingComma,{at:t}))}}}isAssignable(e,t){switch(e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{let r=e.properties.length-1;return e.properties.every((i,n)=>i.type!=="ObjectMethod"&&(n===r||i.type!=="SpreadElement")&&this.isAssignable(i))}case"ObjectProperty":return this.isAssignable(e.value);case"SpreadElement":return this.isAssignable(e.argument);case"ArrayExpression":return e.elements.every(r=>r===null||this.isAssignable(r));case"AssignmentExpression":return e.operator==="=";case"ParenthesizedExpression":return this.isAssignable(e.expression);case"MemberExpression":case"OptionalMemberExpression":return!t;default:return!1}}toReferencedList(e,t){return e}toReferencedListDeep(e,t){this.toReferencedList(e,t);for(let r of e)(r==null?void 0:r.type)==="ArrayExpression"&&this.toReferencedListDeep(r.elements)}parseSpread(e,t){let r=this.startNode();return this.next(),r.argument=this.parseMaybeAssignAllowIn(e,void 0,t),this.finishNode(r,"SpreadElement")}parseRestBinding(){let e=this.startNode();return this.next(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let e=this.startNode();return this.next(),e.elements=this.parseBindingList(3,93,!0),this.finishNode(e,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(e,t,r,i){let n=[],a=!0;for(;!this.eat(e);)if(a?a=!1:this.expect(12),r&&this.match(12))n.push(null);else{if(this.eat(e))break;if(this.match(21)){if(n.push(this.parseAssignableListItemTypes(this.parseRestBinding())),!this.checkCommaAfterRest(t)){this.expect(e);break}}else{let o=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(m.UnsupportedParameterDecorator,{at:this.state.startLoc});this.match(26);)o.push(this.parseDecorator());n.push(this.parseAssignableListItem(i,o))}}return n}parseBindingRestProperty(e){return this.next(),e.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(e,"RestElement")}parseBindingProperty(){let e=this.startNode(),{type:t,start:r,startLoc:i}=this.state;return t===21?this.parseBindingRestProperty(e):(t===134?(this.expectPlugin("destructuringPrivate",i),this.classScope.usePrivateName(this.state.value,i),e.key=this.parsePrivateName()):this.parsePropertyName(e),e.method=!1,this.parseObjPropValue(e,r,i,!1,!1,!0,!1),e)}parseAssignableListItem(e,t){let r=this.parseMaybeDefault();this.parseAssignableListItemTypes(r);let i=this.parseMaybeDefault(r.start,r.loc.start,r);return t.length&&(r.decorators=t),i}parseAssignableListItemTypes(e){return e}parseMaybeDefault(e,t,r){var i,n,a;if(t=(i=t)!=null?i:this.state.startLoc,e=(n=e)!=null?n:this.state.start,r=(a=r)!=null?a:this.parseBindingAtom(),!this.eat(29))return r;let o=this.startNodeAt(e,t);return o.left=r,o.right=this.parseMaybeAssignAllowIn(),this.finishNode(o,"AssignmentPattern")}isValidLVal(e,t,r){return rw({AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},e)}checkLVal(e,{in:t,binding:r=as,checkClashes:i=!1,strictModeChanged:n=!1,allowingSloppyLetBinding:a=!(r&$t),hasParenthesizedAncestor:o=!1}){var c;let l=e.type;if(this.isObjectMethod(e))return;if(l==="MemberExpression"){r!==as&&this.raise(m.InvalidPropertyBindingPattern,{at:e});return}if(e.type==="Identifier"){this.checkIdentifier(e,r,n,a);let{name:y}=e;i&&(i.has(y)?this.raise(m.ParamDupe,{at:e}):i.add(y));return}let u=this.isValidLVal(e.type,!(o||(c=e.extra)!=null&&c.parenthesized)&&t.type==="AssignmentExpression",r);if(u===!0)return;if(u===!1){let y=r===as?m.InvalidLhs:m.InvalidLhsBinding;this.raise(y,{at:e,ancestor:t.type==="UpdateExpression"?{type:"UpdateExpression",prefix:t.prefix}:{type:t.type}});return}let[h,p]=Array.isArray(u)?u:[u,l==="ParenthesizedExpression"],f=e.type==="ArrayPattern"||e.type==="ObjectPattern"||e.type==="ParenthesizedExpression"?e:t;for(let y of[].concat(e[h]))y&&this.checkLVal(y,{in:f,binding:r,checkClashes:i,allowingSloppyLetBinding:a,strictModeChanged:n,hasParenthesizedAncestor:p})}checkIdentifier(e,t,r=!1,i=!(t&$t)){this.state.strict&&(r?Nd(e.name,this.inModule):Cd(e.name))&&(t===as?this.raise(m.StrictEvalArguments,{at:e,referenceName:e.name}):this.raise(m.StrictEvalArgumentsBinding,{at:e,bindingName:e.name})),!i&&e.name==="let"&&this.raise(m.LetInLexicalBinding,{at:e}),t&as||this.declareNameFromIdentifier(e,t)}declareNameFromIdentifier(e,t){this.scope.declareName(e.name,t,e.loc.start)}checkToRestConversion(e,t){switch(e.type){case"ParenthesizedExpression":this.checkToRestConversion(e.expression,t);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(t)break;default:this.raise(m.InvalidRestAssignmentPattern,{at:e})}}checkCommaAfterRest(e){return this.match(12)?(this.raise(this.lookaheadCharCode()===e?m.RestTrailingComma:m.ElementAfterRest,{at:this.state.startLoc}),!0):!1}},ko=class extends Io{checkProto(e,t,r,i){if(e.type==="SpreadElement"||this.isObjectMethod(e)||e.computed||e.shorthand)return;let n=e.key;if((n.type==="Identifier"?n.name:n.value)==="__proto__"){if(t){this.raise(m.RecordNoProto,{at:n});return}r.used&&(i?i.doubleProtoLoc===null&&(i.doubleProtoLoc=n.loc.start):this.raise(m.DuplicateProto,{at:n})),r.used=!0}}shouldExitDescending(e,t){return e.type==="ArrowFunctionExpression"&&e.start===t}getExpression(){this.enterInitialScopes(),this.nextToken();let e=this.parseExpression();return this.match(135)||this.unexpected(),this.finalizeRemainingComments(),e.comments=this.state.comments,e.errors=this.state.errors,this.options.tokens&&(e.tokens=this.tokens),e}parseExpression(e,t){return e?this.disallowInAnd(()=>this.parseExpressionBase(t)):this.allowInAnd(()=>this.parseExpressionBase(t))}parseExpressionBase(e){let t=this.state.start,r=this.state.startLoc,i=this.parseMaybeAssign(e);if(this.match(12)){let n=this.startNodeAt(t,r);for(n.expressions=[i];this.eat(12);)n.expressions.push(this.parseMaybeAssign(e));return this.toReferencedList(n.expressions),this.finishNode(n,"SequenceExpression")}return i}parseMaybeAssignDisallowIn(e,t){return this.disallowInAnd(()=>this.parseMaybeAssign(e,t))}parseMaybeAssignAllowIn(e,t){return this.allowInAnd(()=>this.parseMaybeAssign(e,t))}setOptionalParametersError(e,t){var r;e.optionalParametersLoc=(r=t==null?void 0:t.loc)!=null?r:this.state.startLoc}parseMaybeAssign(e,t){let r=this.state.start,i=this.state.startLoc;if(this.isContextual(105)&&this.prodParam.hasYield){let c=this.parseYield();return t&&(c=t.call(this,c,r,i)),c}let n;e?n=!1:(e=new js,n=!0);let{type:a}=this.state;(a===10||K(a))&&(this.state.potentialArrowAt=this.state.start);let o=this.parseMaybeConditional(e);if(t&&(o=t.call(this,o,r,i)),Qb(this.state.type)){let c=this.startNodeAt(r,i),l=this.state.value;return c.operator=l,this.match(29)?(this.toAssignable(o,!0),c.left=o,e.doubleProtoLoc!=null&&e.doubleProtoLoc.index>=r&&(e.doubleProtoLoc=null),e.shorthandAssignLoc!=null&&e.shorthandAssignLoc.index>=r&&(e.shorthandAssignLoc=null),e.privateKeyLoc!=null&&e.privateKeyLoc.index>=r&&(this.checkDestructuringPrivate(e),e.privateKeyLoc=null)):c.left=o,this.next(),c.right=this.parseMaybeAssign(),this.checkLVal(o,{in:this.finishNode(c,"AssignmentExpression")}),c}else n&&this.checkExpressionErrors(e,!0);return o}parseMaybeConditional(e){let t=this.state.start,r=this.state.startLoc,i=this.state.potentialArrowAt,n=this.parseExprOps(e);return this.shouldExitDescending(n,i)?n:this.parseConditional(n,t,r,e)}parseConditional(e,t,r,i){if(this.eat(17)){let n=this.startNodeAt(t,r);return n.test=e,n.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),n.alternate=this.parseMaybeAssign(),this.finishNode(n,"ConditionalExpression")}return e}parseMaybeUnaryOrPrivate(e){return this.match(134)?this.parsePrivateName():this.parseMaybeUnary(e)}parseExprOps(e){let t=this.state.start,r=this.state.startLoc,i=this.state.potentialArrowAt,n=this.parseMaybeUnaryOrPrivate(e);return this.shouldExitDescending(n,i)?n:this.parseExprOp(n,t,r,-1)}parseExprOp(e,t,r,i){if(this.isPrivateName(e)){let a=this.getPrivateNameSV(e);(i>=sn(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(m.PrivateInExpectedIn,{at:e,identifierName:a}),this.classScope.usePrivateName(a,e.loc.start)}let n=this.state.type;if(eE(n)&&(this.prodParam.hasIn||!this.match(58))){let a=sn(n);if(a>i){if(n===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return e;this.checkPipelineAtInfixOperator(e,r)}let o=this.startNodeAt(t,r);o.left=e,o.operator=this.state.value;let c=n===41||n===42,l=n===40;if(l&&(a=sn(42)),this.next(),n===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(m.UnexpectedAwaitAfterPipelineBody,{at:this.state.startLoc});o.right=this.parseExprOpRightExpr(n,a),this.finishNode(o,c||l?"LogicalExpression":"BinaryExpression");let u=this.state.type;if(l&&(u===41||u===42)||c&&u===40)throw this.raise(m.MixingCoalesceWithLogical,{at:this.state.startLoc});return this.parseExprOp(o,t,r,i)}}return e}parseExprOpRightExpr(e,t){let r=this.state.start,i=this.state.startLoc;switch(e){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"smart":return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(105))throw this.raise(m.PipeBodyIsTighter,{at:this.state.startLoc});return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(e,t),r,i)});case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(t))}default:return this.parseExprOpBaseRightExpr(e,t)}}parseExprOpBaseRightExpr(e,t){let r=this.state.start,i=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),r,i,nE(e)?t-1:t)}parseHackPipeBody(){var e;let{startLoc:t}=this.state,r=this.parseMaybeAssign();return jb.has(r.type)&&!((e=r.extra)!=null&&e.parenthesized)&&this.raise(m.PipeUnparenthesizedBody,{at:t,type:r.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(m.PipeTopicUnused,{at:t}),r}checkExponentialAfterUnary(e){this.match(57)&&this.raise(m.UnexpectedTokenUnaryExponentiation,{at:e.argument})}parseMaybeUnary(e,t){let r=this.state.start,i=this.state.startLoc,n=this.isContextual(96);if(n&&this.isAwaitAllowed()){this.next();let l=this.parseAwait(r,i);return t||this.checkExponentialAfterUnary(l),l}let a=this.match(34),o=this.startNode();if(sE(this.state.type)){o.operator=this.state.value,o.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");let l=this.match(89);if(this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),this.state.strict&&l){let u=o.argument;u.type==="Identifier"?this.raise(m.StrictDelete,{at:o}):this.hasPropertyAsPrivateName(u)&&this.raise(m.DeletePrivateField,{at:o})}if(!a)return t||this.checkExponentialAfterUnary(o),this.finishNode(o,"UnaryExpression")}let c=this.parseUpdate(o,a,e);if(n){let{type:l}=this.state;if((this.hasPlugin("v8intrinsic")?ad(l):ad(l)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(m.AwaitNotInAsyncContext,{at:i}),this.parseAwait(r,i)}return c}parseUpdate(e,t,r){if(t)return this.checkLVal(e.argument,{in:this.finishNode(e,"UpdateExpression")}),e;let i=this.state.start,n=this.state.startLoc,a=this.parseExprSubscripts(r);if(this.checkExpressionErrors(r,!1))return a;for(;tE(this.state.type)&&!this.canInsertSemicolon();){let o=this.startNodeAt(i,n);o.operator=this.state.value,o.prefix=!1,o.argument=a,this.next(),this.checkLVal(a,{in:a=this.finishNode(o,"UpdateExpression")})}return a}parseExprSubscripts(e){let t=this.state.start,r=this.state.startLoc,i=this.state.potentialArrowAt,n=this.parseExprAtom(e);return this.shouldExitDescending(n,i)?n:this.parseSubscripts(n,t,r)}parseSubscripts(e,t,r,i){let n={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(e),stop:!1};do e=this.parseSubscript(e,t,r,i,n),n.maybeAsyncArrow=!1;while(!n.stop);return e}parseSubscript(e,t,r,i,n){let{type:a}=this.state;if(!i&&a===15)return this.parseBind(e,t,r,i,n);if(cn(a))return this.parseTaggedTemplateExpression(e,t,r,n);let o=!1;if(a===18){if(i&&this.lookaheadCharCode()===40)return n.stop=!0,e;n.optionalChainMember=o=!0,this.next()}if(!i&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(e,t,r,n,o);{let c=this.eat(0);return c||o||this.eat(16)?this.parseMember(e,t,r,n,c,o):(n.stop=!0,e)}}parseMember(e,t,r,i,n,a){let o=this.startNodeAt(t,r);return o.object=e,o.computed=n,n?(o.property=this.parseExpression(),this.expect(3)):this.match(134)?(e.type==="Super"&&this.raise(m.SuperPrivateField,{at:r}),this.classScope.usePrivateName(this.state.value,this.state.startLoc),o.property=this.parsePrivateName()):o.property=this.parseIdentifier(!0),i.optionalChainMember?(o.optional=a,this.finishNode(o,"OptionalMemberExpression")):this.finishNode(o,"MemberExpression")}parseBind(e,t,r,i,n){let a=this.startNodeAt(t,r);return a.object=e,this.next(),a.callee=this.parseNoCallExpr(),n.stop=!0,this.parseSubscripts(this.finishNode(a,"BindExpression"),t,r,i)}parseCoverCallAndAsyncArrowHead(e,t,r,i,n){let a=this.state.maybeInArrowParameters,o=null;this.state.maybeInArrowParameters=!0,this.next();let c=this.startNodeAt(t,r);c.callee=e;let{maybeAsyncArrow:l,optionalChainMember:u}=i;return l&&(this.expressionScope.enter(FE()),o=new js),u&&(c.optional=n),n?c.arguments=this.parseCallExpressionArguments(11):c.arguments=this.parseCallExpressionArguments(11,e.type==="Import",e.type!=="Super",c,o),this.finishCallExpression(c,u),l&&this.shouldParseAsyncArrow()&&!n?(i.stop=!0,this.checkDestructuringPrivate(o),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),c=this.parseAsyncArrowFromCallExpression(this.startNodeAt(t,r),c)):(l&&(this.checkExpressionErrors(o,!0),this.expressionScope.exit()),this.toReferencedArguments(c)),this.state.maybeInArrowParameters=a,c}toReferencedArguments(e,t){this.toReferencedListDeep(e.arguments,t)}parseTaggedTemplateExpression(e,t,r,i){let n=this.startNodeAt(t,r);return n.tag=e,n.quasi=this.parseTemplate(!0),i.optionalChainMember&&this.raise(m.OptionalChainingNoTemplate,{at:r}),this.finishNode(n,"TaggedTemplateExpression")}atPossibleAsyncArrow(e){return e.type==="Identifier"&&e.name==="async"&&this.state.lastTokEndLoc.index===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&e.start===this.state.potentialArrowAt}finishCallExpression(e,t){if(e.callee.type==="Import")if(e.arguments.length===2&&(this.hasPlugin("moduleAttributes")||this.expectPlugin("importAssertions")),e.arguments.length===0||e.arguments.length>2)this.raise(m.ImportCallArity,{at:e,maxArgumentCount:this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(let r of e.arguments)r.type==="SpreadElement"&&this.raise(m.ImportCallSpreadArgument,{at:r});return this.finishNode(e,t?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(e,t,r,i,n){let a=[],o=!0,c=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(e);){if(o)o=!1;else if(this.expect(12),this.match(e)){t&&!this.hasPlugin("importAssertions")&&!this.hasPlugin("moduleAttributes")&&this.raise(m.ImportCallArgumentTrailingComma,{at:this.state.lastTokStartLoc}),i&&this.addTrailingCommaExtraToNode(i),this.next();break}a.push(this.parseExprListItem(!1,n,r))}return this.state.inFSharpPipelineDirectBody=c,a}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(e,t){var r;return this.resetPreviousNodeTrailingComments(t),this.expect(19),this.parseArrowExpression(e,t.arguments,!0,(r=t.extra)==null?void 0:r.trailingCommaLoc),t.innerComments&&_r(e,t.innerComments),t.callee.trailingComments&&_r(e,t.callee.trailingComments),e}parseNoCallExpr(){let e=this.state.start,t=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),e,t,!0)}parseExprAtom(e){let t,{type:r}=this.state;switch(r){case 79:return this.parseSuper();case 83:return t=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(t):(this.match(10)||this.raise(m.UnsupportedImport,{at:this.state.lastTokStartLoc}),this.finishNode(t,"Import"));case 78:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 130:return this.parseNumericLiteral(this.state.value);case 131:return this.parseBigIntLiteral(this.state.value);case 132:return this.parseDecimalLiteral(this.state.value);case 129:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let i=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(i)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,e);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,e);case 68:return this.parseFunctionOrFunctionSent();case 26:this.parseDecorators();case 80:return t=this.startNode(),this.takeDecorators(t),this.parseClass(t,!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{t=this.startNode(),this.next(),t.object=null;let i=t.callee=this.parseNoCallExpr();if(i.type==="MemberExpression")return this.finishNode(t,"BindExpression");throw this.raise(m.UnsupportedBind,{at:i})}case 134:return this.raise(m.PrivateInExpectedIn,{at:this.state.startLoc,identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let i=this.getPluginOption("pipelineOperator","proposal");if(i)return this.parseTopicReference(i);throw this.unexpected()}case 47:{let i=this.input.codePointAt(this.nextTokenStart());if(lt(i)||i===62){this.expectOnePlugin(["jsx","flow","typescript"]);break}else throw this.unexpected()}default:if(K(r)){if(this.isContextual(123)&&this.lookaheadCharCode()===123&&!this.hasFollowingLineBreak())return this.parseModuleExpression();let i=this.state.potentialArrowAt===this.state.start,n=this.state.containsEsc,a=this.parseIdentifier();if(!n&&a.name==="async"&&!this.canInsertSemicolon()){let{type:o}=this.state;if(o===68)return this.resetPreviousNodeTrailingComments(a),this.next(),this.parseFunction(this.startNodeAtNode(a),void 0,!0);if(K(o))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(a)):a;if(o===90)return this.resetPreviousNodeTrailingComments(a),this.parseDo(this.startNodeAtNode(a),!0)}return i&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(a),[a],!1)):a}else throw this.unexpected()}}parseTopicReferenceThenEqualsSign(e,t){let r=this.getPluginOption("pipelineOperator","proposal");if(r)return this.state.type=e,this.state.value=t,this.state.pos--,this.state.end--,this.state.endLoc=Ee(this.state.endLoc,-1),this.parseTopicReference(r);throw this.unexpected()}parseTopicReference(e){let t=this.startNode(),r=this.state.startLoc,i=this.state.type;return this.next(),this.finishTopicReference(t,r,e,i)}finishTopicReference(e,t,r,i){if(this.testTopicReferenceConfiguration(r,t,i)){let n=r==="smart"?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise(r==="smart"?m.PrimaryTopicNotAllowed:m.PipeTopicUnbound,{at:t}),this.registerTopicReference(),this.finishNode(e,n)}else throw this.raise(m.PipeTopicUnconfiguredToken,{at:t,token:Bt(i)})}testTopicReferenceConfiguration(e,t,r){switch(e){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:Bt(r)}]);case"smart":return r===27;default:throw this.raise(m.PipeTopicRequiresHackPipes,{at:t})}}parseAsyncArrowUnaryFunction(e){this.prodParam.enter(an(!0,this.prodParam.hasYield));let t=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(m.LineTerminatorBeforeArrow,{at:this.state.curPosition()}),this.expect(19),this.parseArrowExpression(e,t,!0),e}parseDo(e,t){this.expectPlugin("doExpressions"),t&&this.expectPlugin("asyncDoExpressions"),e.async=t,this.next();let r=this.state.labels;return this.state.labels=[],t?(this.prodParam.enter(mn),e.body=this.parseBlock(),this.prodParam.exit()):e.body=this.parseBlock(),this.state.labels=r,this.finishNode(e,"DoExpression")}parseSuper(){let e=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!this.options.allowSuperOutsideMethod?this.raise(m.SuperNotAllowed,{at:e}):!this.scope.allowSuper&&!this.options.allowSuperOutsideMethod&&this.raise(m.UnexpectedSuper,{at:e}),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(m.UnsupportedSuper,{at:e}),this.finishNode(e,"Super")}parsePrivateName(){let e=this.startNode(),t=this.startNodeAt(this.state.start+1,new mt(this.state.curLine,this.state.start+1-this.state.lineStart,this.state.start+1)),r=this.state.value;return this.next(),e.id=this.createIdentifier(t,r),this.finishNode(e,"PrivateName")}parseFunctionOrFunctionSent(){let e=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let t=this.createIdentifier(this.startNodeAtNode(e),"function");return this.next(),this.match(102)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(e,t,"sent")}return this.parseFunction(e)}parseMetaProperty(e,t,r){e.meta=t;let i=this.state.containsEsc;return e.property=this.parseIdentifier(!0),(e.property.name!==r||i)&&this.raise(m.UnsupportedMetaProperty,{at:e.property,target:t.name,onlyValidPropertyName:r}),this.finishNode(e,"MetaProperty")}parseImportMetaProperty(e){let t=this.createIdentifier(this.startNodeAtNode(e),"import");return this.next(),this.isContextual(100)&&(this.inModule||this.raise(m.ImportMetaOutsideModule,{at:t}),this.sawUnambiguousESM=!0),this.parseMetaProperty(e,t,"meta")}parseLiteralAtNode(e,t,r){return this.addExtra(r,"rawValue",e),this.addExtra(r,"raw",this.input.slice(r.start,this.state.end)),r.value=e,this.next(),this.finishNode(r,t)}parseLiteral(e,t){let r=this.startNode();return this.parseLiteralAtNode(e,t,r)}parseStringLiteral(e){return this.parseLiteral(e,"StringLiteral")}parseNumericLiteral(e){return this.parseLiteral(e,"NumericLiteral")}parseBigIntLiteral(e){return this.parseLiteral(e,"BigIntLiteral")}parseDecimalLiteral(e){return this.parseLiteral(e,"DecimalLiteral")}parseRegExpLiteral(e){let t=this.parseLiteral(e.value,"RegExpLiteral");return t.pattern=e.pattern,t.flags=e.flags,t}parseBooleanLiteral(e){let t=this.startNode();return t.value=e,this.next(),this.finishNode(t,"BooleanLiteral")}parseNullLiteral(){let e=this.startNode();return this.next(),this.finishNode(e,"NullLiteral")}parseParenAndDistinguishExpression(e){let t=this.state.start,r=this.state.startLoc,i;this.next(),this.expressionScope.enter(ME());let n=this.state.maybeInArrowParameters,a=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let o=this.state.start,c=this.state.startLoc,l=[],u=new js,h=!0,p,f;for(;!this.match(11);){if(h)h=!1;else if(this.expect(12,u.optionalParametersLoc===null?null:u.optionalParametersLoc),this.match(11)){f=this.state.startLoc;break}if(this.match(21)){let b=this.state.start,T=this.state.startLoc;if(p=this.state.startLoc,l.push(this.parseParenItem(this.parseRestBinding(),b,T)),!this.checkCommaAfterRest(41))break}else l.push(this.parseMaybeAssignAllowIn(u,this.parseParenItem))}let y=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=n,this.state.inFSharpPipelineDirectBody=a;let g=this.startNodeAt(t,r);return e&&this.shouldParseArrow(l)&&(g=this.parseArrow(g))?(this.checkDestructuringPrivate(u),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(g,l,!1),g):(this.expressionScope.exit(),l.length||this.unexpected(this.state.lastTokStartLoc),f&&this.unexpected(f),p&&this.unexpected(p),this.checkExpressionErrors(u,!0),this.toReferencedListDeep(l,!0),l.length>1?(i=this.startNodeAt(o,c),i.expressions=l,this.finishNode(i,"SequenceExpression"),this.resetEndLocation(i,y)):i=l[0],this.wrapParenthesis(t,r,i))}wrapParenthesis(e,t,r){if(!this.options.createParenthesizedExpressions)return this.addExtra(r,"parenthesized",!0),this.addExtra(r,"parenStart",e),this.takeSurroundingComments(r,e,this.state.lastTokEndLoc.index),r;let i=this.startNodeAt(e,t);return i.expression=r,this.finishNode(i,"ParenthesizedExpression"),i}shouldParseArrow(e){return!this.canInsertSemicolon()}parseArrow(e){if(this.eat(19))return e}parseParenItem(e,t,r){return e}parseNewOrNewTarget(){let e=this.startNode();if(this.next(),this.match(16)){let t=this.createIdentifier(this.startNodeAtNode(e),"new");this.next();let r=this.parseMetaProperty(e,t,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&this.raise(m.UnexpectedNewTarget,{at:r}),r}return this.parseNew(e)}parseNew(e){return e.callee=this.parseNoCallExpr(),e.callee.type==="Import"?this.raise(m.ImportCallNotNewExpression,{at:e.callee}):this.isOptionalChain(e.callee)?this.raise(m.OptionalChainingNoNew,{at:this.state.lastTokEndLoc}):this.eat(18)&&this.raise(m.OptionalChainingNoNew,{at:this.state.startLoc}),this.parseNewArguments(e),this.finishNode(e,"NewExpression")}parseNewArguments(e){if(this.eat(10)){let t=this.parseExprList(11);this.toReferencedList(t),e.arguments=t}else e.arguments=[]}parseTemplateElement(e){let{start:t,startLoc:r,end:i,value:n}=this.state,a=t+1,o=this.startNodeAt(a,Ee(r,1));n===null&&(e||this.raise(m.InvalidEscapeSequenceTemplate,{at:Ee(r,2)}));let c=this.match(24),l=c?-1:-2,u=i+l;return o.value={raw:this.input.slice(a,u).replace(/\r\n?/g,`
`),cooked:n===null?null:n.slice(1,l)},o.tail=c,this.next(),this.finishNode(o,"TemplateElement"),this.resetEndLocation(o,Ee(this.state.lastTokEndLoc,l)),o}parseTemplate(e){let t=this.startNode();t.expressions=[];let r=this.parseTemplateElement(e);for(t.quasis=[r];!r.tail;)t.expressions.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),t.quasis.push(r=this.parseTemplateElement(e));return this.finishNode(t,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(e,t,r,i){r&&this.expectPlugin("recordAndTuple");let n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let a=Object.create(null),o=!0,c=this.startNode();for(c.properties=[],this.next();!this.match(e);){if(o)o=!1;else if(this.expect(12),this.match(e)){this.addTrailingCommaExtraToNode(c);break}let u;t?u=this.parseBindingProperty():(u=this.parsePropertyDefinition(i),this.checkProto(u,r,a,i)),r&&!this.isObjectProperty(u)&&u.type!=="SpreadElement"&&this.raise(m.InvalidRecordProperty,{at:u}),u.shorthand&&this.addExtra(u,"shorthand",!0),c.properties.push(u)}this.next(),this.state.inFSharpPipelineDirectBody=n;let l="ObjectExpression";return t?l="ObjectPattern":r&&(l="RecordExpression"),this.finishNode(c,l)}addTrailingCommaExtraToNode(e){this.addExtra(e,"trailingComma",this.state.lastTokStart),this.addExtra(e,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(e){return!e.computed&&e.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(e){let t=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(m.UnsupportedPropertyDecorator,{at:this.state.startLoc});this.match(26);)t.push(this.parseDecorator());let r=this.startNode(),i=!1,n=!1,a,o;if(this.match(21))return t.length&&this.unexpected(),this.parseSpread();t.length&&(r.decorators=t,t=[]),r.method=!1,e&&(a=this.state.start,o=this.state.startLoc);let c=this.eat(55);this.parsePropertyNamePrefixOperator(r);let l=this.state.containsEsc,u=this.parsePropertyName(r,e);if(!c&&!l&&this.maybeAsyncOrAccessorProp(r)){let h=u.name;h==="async"&&!this.hasPrecedingLineBreak()&&(i=!0,this.resetPreviousNodeTrailingComments(u),c=this.eat(55),this.parsePropertyName(r)),(h==="get"||h==="set")&&(n=!0,this.resetPreviousNodeTrailingComments(u),r.kind=h,this.match(55)&&(c=!0,this.raise(m.AccessorIsGenerator,{at:this.state.curPosition(),kind:h}),this.next()),this.parsePropertyName(r))}return this.parseObjPropValue(r,a,o,c,i,!1,n,e),r}getGetterSetterExpectedParamCount(e){return e.kind==="get"?0:1}getObjectOrClassMethodParams(e){return e.params}checkGetterSetterParams(e){var t;let r=this.getGetterSetterExpectedParamCount(e),i=this.getObjectOrClassMethodParams(e);i.length!==r&&this.raise(e.kind==="get"?m.BadGetterArity:m.BadSetterArity,{at:e}),e.kind==="set"&&((t=i[i.length-1])==null?void 0:t.type)==="RestElement"&&this.raise(m.BadSetterRestParameter,{at:e})}parseObjectMethod(e,t,r,i,n){if(n)return this.parseMethod(e,t,!1,!1,!1,"ObjectMethod"),this.checkGetterSetterParams(e),e;if(r||t||this.match(10))return i&&this.unexpected(),e.kind="method",e.method=!0,this.parseMethod(e,t,r,!1,!1,"ObjectMethod")}parseObjectProperty(e,t,r,i,n){if(e.shorthand=!1,this.eat(14))return e.value=i?this.parseMaybeDefault(this.state.start,this.state.startLoc):this.parseMaybeAssignAllowIn(n),this.finishNode(e,"ObjectProperty");if(!e.computed&&e.key.type==="Identifier"){if(this.checkReservedWord(e.key.name,e.key.loc.start,!0,!1),i)e.value=this.parseMaybeDefault(t,r,dt(e.key));else if(this.match(29)){let a=this.state.startLoc;n!=null?n.shorthandAssignLoc===null&&(n.shorthandAssignLoc=a):this.raise(m.InvalidCoverInitializedName,{at:a}),e.value=this.parseMaybeDefault(t,r,dt(e.key))}else e.value=dt(e.key);return e.shorthand=!0,this.finishNode(e,"ObjectProperty")}}parseObjPropValue(e,t,r,i,n,a,o,c){let l=this.parseObjectMethod(e,i,n,a,o)||this.parseObjectProperty(e,t,r,a,c);return l||this.unexpected(),l}parsePropertyName(e,t){if(this.eat(0))e.computed=!0,e.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:r,value:i}=this.state,n;if(ft(r))n=this.parseIdentifier(!0);else switch(r){case 130:n=this.parseNumericLiteral(i);break;case 129:n=this.parseStringLiteral(i);break;case 131:n=this.parseBigIntLiteral(i);break;case 132:n=this.parseDecimalLiteral(i);break;case 134:{let a=this.state.startLoc;t!=null?t.privateKeyLoc===null&&(t.privateKeyLoc=a):this.raise(m.UnexpectedPrivateField,{at:a}),n=this.parsePrivateName();break}default:throw this.unexpected()}e.key=n,r!==134&&(e.computed=!1)}return e.key}initFunction(e,t){e.id=null,e.generator=!1,e.async=!!t}parseMethod(e,t,r,i,n,a,o=!1){this.initFunction(e,r),e.generator=!!t;let c=i;return this.scope.enter(ht|ln|(o?ls:0)|(n?kd:0)),this.prodParam.enter(an(r,e.generator)),this.parseFunctionParams(e,c),this.parseFunctionBodyAndFinish(e,a,!0),this.prodParam.exit(),this.scope.exit(),e}parseArrayLike(e,t,r,i){r&&this.expectPlugin("recordAndTuple");let n=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let a=this.startNode();return this.next(),a.elements=this.parseExprList(e,!r,i,a),this.state.inFSharpPipelineDirectBody=n,this.finishNode(a,r?"TupleExpression":"ArrayExpression")}parseArrowExpression(e,t,r,i){this.scope.enter(ht|jo);let n=an(r,!1);!this.match(5)&&this.prodParam.hasIn&&(n|=Fs),this.prodParam.enter(n),this.initFunction(e,r);let a=this.state.maybeInArrowParameters;return t&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(e,t,i)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(e,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=a,this.finishNode(e,"ArrowFunctionExpression")}setArrowFunctionParameters(e,t,r){this.toAssignableList(t,r,!1),e.params=t}parseFunctionBodyAndFinish(e,t,r=!1){this.parseFunctionBody(e,!1,r),this.finishNode(e,t)}parseFunctionBody(e,t,r=!1){let i=t&&!this.match(5);if(this.expressionScope.enter($d()),i)e.body=this.parseMaybeAssign(),this.checkParams(e,!1,t,!1);else{let n=this.state.strict,a=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|jd),e.body=this.parseBlock(!0,!1,o=>{let c=!this.isSimpleParamList(e.params);o&&c&&this.raise(m.IllegalLanguageModeDirective,{at:(e.kind==="method"||e.kind==="constructor")&&!!e.key?e.key.loc.end:e});let l=!n&&this.state.strict;this.checkParams(e,!this.state.strict&&!t&&!r&&!c,t,l),this.state.strict&&e.id&&this.checkIdentifier(e.id,xE,l)}),this.prodParam.exit(),this.state.labels=a}this.expressionScope.exit()}isSimpleParameter(e){return e.type==="Identifier"}isSimpleParamList(e){for(let t=0,r=e.length;t<r;t++)if(!this.isSimpleParameter(e[t]))return!1;return!0}checkParams(e,t,r,i=!0){let n=!t&&new Set,a={type:"FormalParameters"};for(let o of e.params)this.checkLVal(o,{in:a,binding:hn,checkClashes:n,strictModeChanged:i})}parseExprList(e,t,r,i){let n=[],a=!0;for(;!this.eat(e);){if(a)a=!1;else if(this.expect(12),this.match(e)){i&&this.addTrailingCommaExtraToNode(i),this.next();break}n.push(this.parseExprListItem(t,r))}return n}parseExprListItem(e,t,r){let i;if(this.match(12))e||this.raise(m.UnexpectedToken,{at:this.state.curPosition(),unexpected:","}),i=null;else if(this.match(21)){let n=this.state.start,a=this.state.startLoc;i=this.parseParenItem(this.parseSpread(t),n,a)}else if(this.match(17)){this.expectPlugin("partialApplication"),r||this.raise(m.UnexpectedArgumentPlaceholder,{at:this.state.startLoc});let n=this.startNode();this.next(),i=this.finishNode(n,"ArgumentPlaceholder")}else i=this.parseMaybeAssignAllowIn(t,this.parseParenItem);return i}parseIdentifier(e){let t=this.startNode(),r=this.parseIdentifierName(t.start,e);return this.createIdentifier(t,r)}createIdentifier(e,t){return e.name=t,e.loc.identifierName=t,this.finishNode(e,"Identifier")}parseIdentifierName(e,t){let r,{startLoc:i,type:n}=this.state;if(ft(n))r=this.state.value;else throw this.unexpected();let a=Jb(n);return t?a&&this.replaceToken(128):this.checkReservedWord(r,i,a,!1),this.next(),r}checkReservedWord(e,t,r,i){if(e.length>10||!mE(e))return;if(e==="yield"){if(this.prodParam.hasYield){this.raise(m.YieldBindingIdentifier,{at:t});return}}else if(e==="await"){if(this.prodParam.hasAwait){this.raise(m.AwaitBindingIdentifier,{at:t});return}if(this.scope.inStaticBlock){this.raise(m.AwaitBindingIdentifierInStaticBlock,{at:t});return}this.expressionScope.recordAsyncArrowParametersError({at:t})}else if(e==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(m.ArgumentsInClass,{at:t});return}if(r&&pE(e)){this.raise(m.UnexpectedKeyword,{at:t,keyword:e});return}(this.state.strict?i?Nd:Ad:vd)(e,this.inModule)&&this.raise(m.UnexpectedReservedWord,{at:t,reservedWord:e})}isAwaitAllowed(){return!!(this.prodParam.hasAwait||this.options.allowAwaitOutsideFunction&&!this.scope.inFunction)}parseAwait(e,t){let r=this.startNodeAt(e,t);return this.expressionScope.recordParameterInitializerError(m.AwaitExpressionFormalParameter,{at:r}),this.eat(55)&&this.raise(m.ObsoleteAwaitStar,{at:r}),!this.scope.inFunction&&!this.options.allowAwaitOutsideFunction&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(r.argument=this.parseMaybeUnary(null,!0)),this.finishNode(r,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;let{type:e}=this.state;return e===53||e===10||e===0||cn(e)||e===133||e===56||this.hasPlugin("v8intrinsic")&&e===54}parseYield(){let e=this.startNode();this.expressionScope.recordParameterInitializerError(m.YieldInParameter,{at:e}),this.next();let t=!1,r=null;if(!this.hasPrecedingLineBreak())switch(t=this.eat(55),this.state.type){case 13:case 135:case 8:case 11:case 3:case 9:case 14:case 12:if(!t)break;default:r=this.parseMaybeAssign()}return e.delegate=t,e.argument=r,this.finishNode(e,"YieldExpression")}checkPipelineAtInfixOperator(e,t){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&e.type==="SequenceExpression"&&this.raise(m.PipelineHeadSequenceExpression,{at:t})}parseSmartPipelineBodyInStyle(e,t,r){let i=this.startNodeAt(t,r);return this.isSimpleReference(e)?(i.callee=e,this.finishNode(i,"PipelineBareFunction")):(this.checkSmartPipeTopicBodyEarlyErrors(r),i.expression=e,this.finishNode(i,"PipelineTopicExpression"))}isSimpleReference(e){switch(e.type){case"MemberExpression":return!e.computed&&this.isSimpleReference(e.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(e){if(this.match(19))throw this.raise(m.PipelineBodyNoArrow,{at:this.state.startLoc});this.topicReferenceWasUsedInCurrentContext()||this.raise(m.PipelineTopicUnused,{at:e})}withTopicBindingContext(e){let t=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return e()}finally{this.state.topicContext=t}}withSmartMixTopicForbiddingContext(e){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let t=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return e()}finally{this.state.topicContext=t}}else return e()}withSoloAwaitPermittingContext(e){let t=this.state.soloAwait;this.state.soloAwait=!0;try{return e()}finally{this.state.soloAwait=t}}allowInAnd(e){let t=this.prodParam.currentFlags();if(Fs&~t){this.prodParam.enter(t|Fs);try{return e()}finally{this.prodParam.exit()}}return e()}disallowInAnd(e){let t=this.prodParam.currentFlags();if(Fs&t){this.prodParam.enter(t&~Fs);try{return e()}finally{this.prodParam.exit()}}return e()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(e){let t=this.state.start,r=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let i=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let n=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),t,r,e);return this.state.inFSharpPipelineDirectBody=i,n}parseModuleExpression(){this.expectPlugin("moduleBlocks");let e=this.startNode();this.next(),this.eat(5);let t=this.initializeScopes(!0);this.enterInitialScopes();let r=this.startNode();try{e.body=this.parseProgram(r,8,"module")}finally{t()}return this.eat(8),this.finishNode(e,"ModuleExpression")}parsePropertyNamePrefixOperator(e){}},io={kind:"loop"},iw={kind:"switch"},nw=0,no=1,Pd=2,Td=4,aw=/[\uD800-\uDFFF]/u,ao=/in(?:stanceof)?/y;function ow(s,e){for(let t=0;t<s.length;t++){let r=s[t],{type:i}=r;if(typeof i=="number"){{if(i===134){let{loc:n,start:a,value:o,end:c}=r,l=a+1,u=Ee(n.start,1);s.splice(t,1,new Ye({type:ot(27),value:"#",start:a,end:l,startLoc:n.start,endLoc:u}),new Ye({type:ot(128),value:o,start:l,end:c,startLoc:u,endLoc:n.end})),t++;continue}if(cn(i)){let{loc:n,start:a,value:o,end:c}=r,l=a+1,u=Ee(n.start,1),h;e.charCodeAt(a)===96?h=new Ye({type:ot(22),value:"`",start:a,end:l,startLoc:n.start,endLoc:u}):h=new Ye({type:ot(8),value:"}",start:a,end:l,startLoc:n.start,endLoc:u});let p,f,y,g;i===24?(f=c-1,y=Ee(n.end,-1),p=o===null?null:o.slice(1,-1),g=new Ye({type:ot(22),value:"`",start:f,end:c,startLoc:y,endLoc:n.end})):(f=c-2,y=Ee(n.end,-2),p=o===null?null:o.slice(1,-2),g=new Ye({type:ot(23),value:"${",start:f,end:c,startLoc:y,endLoc:n.end})),s.splice(t,1,h,new Ye({type:ot(20),value:p,start:l,end:f,startLoc:u,endLoc:y}),g),t+=2;continue}}r.type=ot(i)}}return s}var Lo=class extends ko{parseTopLevel(e,t){return e.program=this.parseProgram(t),e.comments=this.state.comments,this.options.tokens&&(e.tokens=ow(this.tokens,this.input)),this.finishNode(e,"File")}parseProgram(e,t=135,r=this.options.sourceType){if(e.sourceType=r,e.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(e,!0,!0,t),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(let[i,n]of Array.from(this.scope.undefinedExports))this.raise(m.ModuleExportUndefined,{at:n,localName:i});return this.finishNode(e,"Program")}stmtToDirective(e){let t=e;t.type="Directive",t.value=t.expression,delete t.expression;let r=t.value,i=r.value,n=this.input.slice(r.start,r.end),a=r.value=n.slice(1,-1);return this.addExtra(r,"raw",n),this.addExtra(r,"rawValue",a),this.addExtra(r,"expressionValue",i),r.type="DirectiveLiteral",t}parseInterpreterDirective(){if(!this.match(28))return null;let e=this.startNode();return e.value=this.state.value,this.next(),this.finishNode(e,"InterpreterDirective")}isLet(e){return this.isContextual(99)?this.isLetKeyword(e):!1}isLetKeyword(e){let t=this.nextTokenStart(),r=this.codePointAtPos(t);if(r===92||r===91)return!0;if(e)return!1;if(r===123)return!0;if(lt(r)){if(ao.lastIndex=t,ao.test(this.input)){let i=this.codePointAtPos(ao.lastIndex);if(!$s(i)&&i!==92)return!1}return!0}return!1}parseStatement(e,t){return this.match(26)&&this.parseDecorators(!0),this.parseStatementContent(e,t)}parseStatementContent(e,t){let r=this.state.type,i=this.startNode(),n;switch(this.isLet(e)&&(r=74,n="let"),r){case 60:return this.parseBreakContinueStatement(i,!0);case 63:return this.parseBreakContinueStatement(i,!1);case 64:return this.parseDebuggerStatement(i);case 90:return this.parseDoStatement(i);case 91:return this.parseForStatement(i);case 68:if(this.lookaheadCharCode()===46)break;return e&&(this.state.strict?this.raise(m.StrictFunction,{at:this.state.startLoc}):e!=="if"&&e!=="label"&&this.raise(m.SloppyFunction,{at:this.state.startLoc})),this.parseFunctionStatement(i,!1,!e);case 80:return e&&this.unexpected(),this.parseClass(i,!0);case 69:return this.parseIfStatement(i);case 70:return this.parseReturnStatement(i);case 71:return this.parseSwitchStatement(i);case 72:return this.parseThrowStatement(i);case 73:return this.parseTryStatement(i);case 75:case 74:return n=n||this.state.value,e&&n!=="var"&&this.raise(m.UnexpectedLexicalDeclaration,{at:this.state.startLoc}),this.parseVarStatement(i,n);case 92:return this.parseWhileStatement(i);case 76:return this.parseWithStatement(i);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(i);case 83:{let c=this.lookaheadCharCode();if(c===40||c===46)break}case 82:{!this.options.allowImportExportEverywhere&&!t&&this.raise(m.UnexpectedImportExport,{at:this.state.startLoc}),this.next();let c;return r===83?(c=this.parseImport(i),c.type==="ImportDeclaration"&&(!c.importKind||c.importKind==="value")&&(this.sawUnambiguousESM=!0)):(c=this.parseExport(i),(c.type==="ExportNamedDeclaration"&&(!c.exportKind||c.exportKind==="value")||c.type==="ExportAllDeclaration"&&(!c.exportKind||c.exportKind==="value")||c.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(i),c}default:if(this.isAsyncFunction())return e&&this.raise(m.AsyncFunctionInSingleStatementContext,{at:this.state.startLoc}),this.next(),this.parseFunctionStatement(i,!0,!e)}let a=this.state.value,o=this.parseExpression();return K(r)&&o.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(i,a,o,e):this.parseExpressionStatement(i,o)}assertModuleNodeAllowed(e){!this.options.allowImportExportEverywhere&&!this.inModule&&this.raise(m.ImportOutsideModule,{at:e})}takeDecorators(e){let t=this.state.decoratorStack[this.state.decoratorStack.length-1];t.length&&(e.decorators=t,this.resetStartLocationFromNode(e,t[0]),this.state.decoratorStack[this.state.decoratorStack.length-1]=[])}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(e){let t=this.state.decoratorStack[this.state.decoratorStack.length-1];for(;this.match(26);){let r=this.parseDecorator();t.push(r)}if(this.match(82))e||this.unexpected(),this.hasPlugin("decorators")&&!this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(m.DecoratorExportClass,{at:this.state.startLoc});else if(!this.canHaveLeadingDecorator())throw this.raise(m.UnexpectedLeadingDecorator,{at:this.state.startLoc})}parseDecorator(){this.expectOnePlugin(["decorators-legacy","decorators"]);let e=this.startNode();if(this.next(),this.hasPlugin("decorators")){this.state.decoratorStack.push([]);let t=this.state.start,r=this.state.startLoc,i;if(this.match(10)){let n=this.state.start,a=this.state.startLoc;this.next(),i=this.parseExpression(),this.expect(11),i=this.wrapParenthesis(n,a,i)}else for(i=this.parseIdentifier(!1);this.eat(16);){let n=this.startNodeAt(t,r);n.object=i,n.property=this.parseIdentifier(!0),n.computed=!1,i=this.finishNode(n,"MemberExpression")}e.expression=this.parseMaybeDecoratorArguments(i),this.state.decoratorStack.pop()}else e.expression=this.parseExprSubscripts();return this.finishNode(e,"Decorator")}parseMaybeDecoratorArguments(e){if(this.eat(10)){let t=this.startNodeAtNode(e);return t.callee=e,t.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(t.arguments),this.finishNode(t,"CallExpression")}return e}parseBreakContinueStatement(e,t){return this.next(),this.isLineTerminator()?e.label=null:(e.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(e,t),this.finishNode(e,t?"BreakStatement":"ContinueStatement")}verifyBreakContinue(e,t){let r;for(r=0;r<this.state.labels.length;++r){let i=this.state.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(t||i.kind==="loop")||e.label&&t))break}if(r===this.state.labels.length){let i=t?"BreakStatement":"ContinueStatement";this.raise(m.IllegalBreakContinue,{at:e,type:i})}}parseDebuggerStatement(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let e=this.parseExpression();return this.expect(11),e}parseDoStatement(e){return this.next(),this.state.labels.push(io),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("do")),this.state.labels.pop(),this.expect(92),e.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(e,"DoWhileStatement")}parseForStatement(e){this.next(),this.state.labels.push(io);let t=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(t=this.state.lastTokStartLoc),this.scope.enter(Rs),this.expect(10),this.match(13))return t!==null&&this.unexpected(t),this.parseFor(e,null);let r=this.isContextual(99),i=r&&this.isLetKeyword();if(this.match(74)||this.match(75)||i){let l=this.startNode(),u=i?"let":this.state.value;return this.next(),this.parseVar(l,!0,u),this.finishNode(l,"VariableDeclaration"),(this.match(58)||this.isContextual(101))&&l.declarations.length===1?this.parseForIn(e,l,t):(t!==null&&this.unexpected(t),this.parseFor(e,l))}let n=this.isContextual(95),a=new js,o=this.parseExpression(!0,a),c=this.isContextual(101);if(c&&(r&&this.raise(m.ForOfLet,{at:o}),t===null&&n&&o.type==="Identifier"&&this.raise(m.ForOfAsync,{at:o})),c||this.match(58)){this.checkDestructuringPrivate(a),this.toAssignable(o,!0);let l=c?"ForOfStatement":"ForInStatement";return this.checkLVal(o,{in:{type:l}}),this.parseForIn(e,o,t)}else this.checkExpressionErrors(a,!0);return t!==null&&this.unexpected(t),this.parseFor(e,o)}parseFunctionStatement(e,t,r){return this.next(),this.parseFunction(e,no|(r?0:Pd),t)}parseIfStatement(e){return this.next(),e.test=this.parseHeaderExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(66)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")}parseReturnStatement(e){return!this.prodParam.hasReturn&&!this.options.allowReturnOutsideFunction&&this.raise(m.IllegalReturn,{at:this.state.startLoc}),this.next(),this.isLineTerminator()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")}parseSwitchStatement(e){this.next(),e.discriminant=this.parseHeaderExpression();let t=e.cases=[];this.expect(5),this.state.labels.push(iw),this.scope.enter(Rs);let r;for(let i;!this.match(8);)if(this.match(61)||this.match(65)){let n=this.match(61);r&&this.finishNode(r,"SwitchCase"),t.push(r=this.startNode()),r.consequent=[],this.next(),n?r.test=this.parseExpression():(i&&this.raise(m.MultipleDefaultsInSwitch,{at:this.state.lastTokStartLoc}),i=!0,r.test=null),this.expect(14)}else r?r.consequent.push(this.parseStatement(null)):this.unexpected();return this.scope.exit(),r&&this.finishNode(r,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(e,"SwitchStatement")}parseThrowStatement(e){return this.next(),this.hasPrecedingLineBreak()&&this.raise(m.NewlineAfterThrow,{at:this.state.lastTokEndLoc}),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")}parseCatchClauseParam(){let e=this.parseBindingAtom(),t=e.type==="Identifier";return this.scope.enter(t?Id:0),this.checkLVal(e,{in:{type:"CatchClause"},binding:pt,allowingSloppyLetBinding:!0}),e}parseTryStatement(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.match(62)){let t=this.startNode();this.next(),this.match(10)?(this.expect(10),t.param=this.parseCatchClauseParam(),this.expect(11)):(t.param=null,this.scope.enter(Rs)),t.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(67)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(m.NoCatchOrFinally,{at:e}),this.finishNode(e,"TryStatement")}parseVarStatement(e,t,r=!1){return this.next(),this.parseVar(e,!1,t,r),this.semicolon(),this.finishNode(e,"VariableDeclaration")}parseWhileStatement(e){return this.next(),e.test=this.parseHeaderExpression(),this.state.labels.push(io),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("while")),this.state.labels.pop(),this.finishNode(e,"WhileStatement")}parseWithStatement(e){return this.state.strict&&this.raise(m.StrictWith,{at:this.state.startLoc}),this.next(),e.object=this.parseHeaderExpression(),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("with")),this.finishNode(e,"WithStatement")}parseEmptyStatement(e){return this.next(),this.finishNode(e,"EmptyStatement")}parseLabeledStatement(e,t,r,i){for(let a of this.state.labels)a.name===t&&this.raise(m.LabelRedeclaration,{at:r,labelName:t});let n=Zb(this.state.type)?"loop":this.match(71)?"switch":null;for(let a=this.state.labels.length-1;a>=0;a--){let o=this.state.labels[a];if(o.statementStart===e.start)o.statementStart=this.state.start,o.kind=n;else break}return this.state.labels.push({name:t,kind:n,statementStart:this.state.start}),e.body=this.parseStatement(i?i.indexOf("label")===-1?i+"label":i:"label"),this.state.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")}parseExpressionStatement(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")}parseBlock(e=!1,t=!0,r){let i=this.startNode();return e&&this.state.strictErrors.clear(),this.expect(5),t&&this.scope.enter(Rs),this.parseBlockBody(i,e,!1,8,r),t&&this.scope.exit(),this.finishNode(i,"BlockStatement")}isValidDirective(e){return e.type==="ExpressionStatement"&&e.expression.type==="StringLiteral"&&!e.expression.extra.parenthesized}parseBlockBody(e,t,r,i,n){let a=e.body=[],o=e.directives=[];this.parseBlockOrModuleBlockBody(a,t?o:void 0,r,i,n)}parseBlockOrModuleBlockBody(e,t,r,i,n){let a=this.state.strict,o=!1,c=!1;for(;!this.match(i);){let l=this.parseStatement(null,r);if(t&&!c){if(this.isValidDirective(l)){let u=this.stmtToDirective(l);t.push(u),!o&&u.value.value==="use strict"&&(o=!0,this.setStrict(!0));continue}c=!0,this.state.strictErrors.clear()}e.push(l)}n&&n.call(this,o),a||this.setStrict(!1),this.next()}parseFor(e,t){return e.init=t,this.semicolon(!1),e.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),e.update=this.match(11)?null:this.parseExpression(),this.expect(11),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(e,"ForStatement")}parseForIn(e,t,r){let i=this.match(58);return this.next(),i?r!==null&&this.unexpected(r):e.await=r!==null,t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!i||this.state.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(m.ForInOfLoopInitializer,{at:t,type:i?"ForInStatement":"ForOfStatement"}),t.type==="AssignmentPattern"&&this.raise(m.InvalidLhs,{at:t,ancestor:{type:"ForStatement"}}),e.left=t,e.right=i?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),e.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement("for")),this.scope.exit(),this.state.labels.pop(),this.finishNode(e,i?"ForInStatement":"ForOfStatement")}parseVar(e,t,r,i=!1){let n=e.declarations=[];for(e.kind=r;;){let a=this.startNode();if(this.parseVarId(a,r),a.init=this.eat(29)?t?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,a.init===null&&!i&&(a.id.type!=="Identifier"&&!(t&&(this.match(58)||this.isContextual(101)))?this.raise(m.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"destructuring"}):r==="const"&&!(this.match(58)||this.isContextual(101))&&this.raise(m.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"const"})),n.push(this.finishNode(a,"VariableDeclarator")),!this.eat(12))break}return e}parseVarId(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,{in:{type:"VariableDeclarator"},binding:t==="var"?hn:pt})}parseFunction(e,t=nw,r=!1){let i=t&no,n=t&Pd,a=!!i&&!(t&Td);this.initFunction(e,r),this.match(55)&&n&&this.raise(m.GeneratorInSingleStatementContext,{at:this.state.startLoc}),e.generator=this.eat(55),i&&(e.id=this.parseFunctionId(a));let o=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(ht),this.prodParam.enter(an(r,e.generator)),i||(e.id=this.parseFunctionId()),this.parseFunctionParams(e,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(e,i?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),i&&!n&&this.registerFunctionStatementId(e),this.state.maybeInArrowParameters=o,e}parseFunctionId(e){return e||K(this.state.type)?this.parseIdentifier():null}parseFunctionParams(e,t){this.expect(10),this.expressionScope.enter(DE()),e.params=this.parseBindingList(11,41,!1,t),this.expressionScope.exit()}registerFunctionStatementId(e){!e.id||this.scope.declareName(e.id.name,this.state.strict||e.generator||e.async?this.scope.treatFunctionsAsVar?hn:pt:Dd,e.id.loc.start)}parseClass(e,t,r){this.next(),this.takeDecorators(e);let i=this.state.strict;return this.state.strict=!0,this.parseClassId(e,t,r),this.parseClassSuper(e),e.body=this.parseClassBody(!!e.superClass,i),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(e){return!e.computed&&!e.static&&(e.key.name==="constructor"||e.key.value==="constructor")}parseClassBody(e,t){this.classScope.enter();let r={hadConstructor:!1,hadSuperClass:e},i=[],n=this.startNode();if(n.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(i.length>0)throw this.raise(m.DecoratorSemicolon,{at:this.state.lastTokEndLoc});continue}if(this.match(26)){i.push(this.parseDecorator());continue}let a=this.startNode();i.length&&(a.decorators=i,this.resetStartLocationFromNode(a,i[0]),i=[]),this.parseClassMember(n,a,r),a.kind==="constructor"&&a.decorators&&a.decorators.length>0&&this.raise(m.DecoratorConstructor,{at:a})}}),this.state.strict=t,this.next(),i.length)throw this.raise(m.TrailingDecorator,{at:this.state.startLoc});return this.classScope.exit(),this.finishNode(n,"ClassBody")}parseClassMemberFromModifier(e,t){let r=this.parseIdentifier(!0);if(this.isClassMethod()){let i=t;return i.kind="method",i.computed=!1,i.key=r,i.static=!1,this.pushClassMethod(e,i,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let i=t;return i.computed=!1,i.key=r,i.static=!1,e.body.push(this.parseClassProperty(i)),!0}return this.resetPreviousNodeTrailingComments(r),!1}parseClassMember(e,t,r){let i=this.isContextual(104);if(i){if(this.parseClassMemberFromModifier(e,t))return;if(this.eat(5)){this.parseClassStaticBlock(e,t);return}}this.parseClassMemberWithIsStatic(e,t,r,i)}parseClassMemberWithIsStatic(e,t,r,i){let n=t,a=t,o=t,c=t,l=t,u=n,h=n;if(t.static=i,this.parsePropertyNamePrefixOperator(t),this.eat(55)){u.kind="method";let b=this.match(134);if(this.parseClassElementName(u),b){this.pushClassPrivateMethod(e,a,!0,!1);return}this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsGenerator,{at:n.key}),this.pushClassMethod(e,n,!0,!1,!1,!1);return}let p=K(this.state.type)&&!this.state.containsEsc,f=this.match(134),y=this.parseClassElementName(t),g=this.state.startLoc;if(this.parsePostMemberNameModifiers(h),this.isClassMethod()){if(u.kind="method",f){this.pushClassPrivateMethod(e,a,!1,!1);return}let b=this.isNonstaticConstructor(n),T=!1;b&&(n.kind="constructor",r.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(m.DuplicateConstructor,{at:y}),b&&this.hasPlugin("typescript")&&t.override&&this.raise(m.OverrideOnConstructor,{at:y}),r.hadConstructor=!0,T=r.hadSuperClass),this.pushClassMethod(e,n,!1,!1,b,T)}else if(this.isClassProperty())f?this.pushClassPrivateProperty(e,c):this.pushClassProperty(e,o);else if(p&&y.name==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(y);let b=this.eat(55);h.optional&&this.unexpected(g),u.kind="method";let T=this.match(134);this.parseClassElementName(u),this.parsePostMemberNameModifiers(h),T?this.pushClassPrivateMethod(e,a,b,!0):(this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsAsync,{at:n.key}),this.pushClassMethod(e,n,b,!0,!1,!1))}else if(p&&(y.name==="get"||y.name==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(y),u.kind=y.name;let b=this.match(134);this.parseClassElementName(n),b?this.pushClassPrivateMethod(e,a,!1,!1):(this.isNonstaticConstructor(n)&&this.raise(m.ConstructorIsAccessor,{at:n.key}),this.pushClassMethod(e,n,!1,!1,!1,!1)),this.checkGetterSetterParams(n)}else if(p&&y.name==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(y);let b=this.match(134);this.parseClassElementName(o),this.pushClassAccessorProperty(e,l,b)}else this.isLineTerminator()?f?this.pushClassPrivateProperty(e,c):this.pushClassProperty(e,o):this.unexpected()}parseClassElementName(e){let{type:t,value:r}=this.state;if((t===128||t===129)&&e.static&&r==="prototype"&&this.raise(m.StaticPrototype,{at:this.state.startLoc}),t===134){r==="constructor"&&this.raise(m.ConstructorClassPrivateField,{at:this.state.startLoc});let i=this.parsePrivateName();return e.key=i,i}return this.parsePropertyName(e)}parseClassStaticBlock(e,t){var r;this.scope.enter(ls|ho|ln);let i=this.state.labels;this.state.labels=[],this.prodParam.enter(Us);let n=t.body=[];this.parseBlockOrModuleBlockBody(n,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=i,e.body.push(this.finishNode(t,"StaticBlock")),(r=t.decorators)!=null&&r.length&&this.raise(m.DecoratorStaticBlock,{at:t})}pushClassProperty(e,t){!t.computed&&(t.key.name==="constructor"||t.key.value==="constructor")&&this.raise(m.ConstructorClassField,{at:t.key}),e.body.push(this.parseClassProperty(t))}pushClassPrivateProperty(e,t){let r=this.parseClassPrivateProperty(t);e.body.push(r),this.classScope.declarePrivateName(this.getPrivateNameSV(r.key),to,r.key.loc.start)}pushClassAccessorProperty(e,t,r){if(!r&&!t.computed){let n=t.key;(n.name==="constructor"||n.value==="constructor")&&this.raise(m.ConstructorClassField,{at:n})}let i=this.parseClassAccessorProperty(t);e.body.push(i),r&&this.classScope.declarePrivateName(this.getPrivateNameSV(i.key),to,i.key.loc.start)}pushClassMethod(e,t,r,i,n,a){e.body.push(this.parseMethod(t,r,i,n,a,"ClassMethod",!0))}pushClassPrivateMethod(e,t,r,i){let n=this.parseMethod(t,r,i,!1,!1,"ClassPrivateMethod",!0);e.body.push(n);let a=n.kind==="get"?n.static?EE:SE:n.kind==="set"?n.static?wE:vE:to;this.declareClassPrivateMethodInScope(n,a)}declareClassPrivateMethodInScope(e,t){this.classScope.declarePrivateName(this.getPrivateNameSV(e.key),t,e.key.loc.start)}parsePostMemberNameModifiers(e){}parseClassPrivateProperty(e){return this.parseInitializer(e),this.semicolon(),this.finishNode(e,"ClassPrivateProperty")}parseClassProperty(e){return this.parseInitializer(e),this.semicolon(),this.finishNode(e,"ClassProperty")}parseClassAccessorProperty(e){return this.parseInitializer(e),this.semicolon(),this.finishNode(e,"ClassAccessorProperty")}parseInitializer(e){this.scope.enter(ls|ln),this.expressionScope.enter($d()),this.prodParam.enter(Us),e.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(e,t,r,i=_d){if(K(this.state.type))e.id=this.parseIdentifier(),t&&this.declareNameFromIdentifier(e.id,i);else if(r||!t)e.id=null;else throw this.raise(m.MissingClassName,{at:this.state.startLoc})}parseClassSuper(e){e.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(e){let t=this.maybeParseExportDefaultSpecifier(e),r=!t||this.eat(12),i=r&&this.eatExportStar(e),n=i&&this.maybeParseExportNamespaceSpecifier(e),a=r&&(!n||this.eat(12)),o=t||i;if(i&&!n)return t&&this.unexpected(),this.parseExportFrom(e,!0),this.finishNode(e,"ExportAllDeclaration");let c=this.maybeParseExportNamedSpecifiers(e);if(t&&r&&!i&&!c||n&&a&&!c)throw this.unexpected(null,5);let l;if(o||c?(l=!1,this.parseExportFrom(e,o)):l=this.maybeParseExportDeclaration(e),o||c||l)return this.checkExport(e,!0,!1,!!e.source),this.finishNode(e,"ExportNamedDeclaration");if(this.eat(65))return e.declaration=this.parseExportDefaultExpression(),this.checkExport(e,!0,!0),this.finishNode(e,"ExportDefaultDeclaration");throw this.unexpected(null,5)}eatExportStar(e){return this.eat(55)}maybeParseExportDefaultSpecifier(e){if(this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom");let t=this.startNode();return t.exported=this.parseIdentifier(!0),e.specifiers=[this.finishNode(t,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(e){if(this.isContextual(93)){e.specifiers||(e.specifiers=[]);let t=this.startNodeAt(this.state.lastTokStart,this.state.lastTokStartLoc);return this.next(),t.exported=this.parseModuleExportName(),e.specifiers.push(this.finishNode(t,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(e){if(this.match(5)){e.specifiers||(e.specifiers=[]);let t=e.exportKind==="type";return e.specifiers.push(...this.parseExportSpecifiers(t)),e.source=null,e.declaration=null,this.hasPlugin("importAssertions")&&(e.assertions=[]),!0}return!1}maybeParseExportDeclaration(e){return this.shouldParseExportDeclaration()?(e.specifiers=[],e.source=null,this.hasPlugin("importAssertions")&&(e.assertions=[]),e.declaration=this.parseExportDeclaration(e),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let e=this.nextTokenStart();return!zo.test(this.input.slice(this.state.pos,e))&&this.isUnparsedContextual(e,"function")}parseExportDefaultExpression(){let e=this.startNode(),t=this.isAsyncFunction();if(this.match(68)||t)return this.next(),t&&this.next(),this.parseFunction(e,no|Td,t);if(this.match(80))return this.parseClass(e,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(m.DecoratorBeforeExport,{at:this.state.startLoc}),this.parseDecorators(!1),this.parseClass(e,!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(m.UnsupportedDefaultExport,{at:this.state.startLoc});let r=this.parseMaybeAssignAllowIn();return this.semicolon(),r}parseExportDeclaration(e){return this.parseStatement(null)}isExportDefaultSpecifier(){let{type:e}=this.state;if(K(e)){if(e===95&&!this.state.containsEsc||e===99)return!1;if((e===126||e===125)&&!this.state.containsEsc){let{type:i}=this.lookahead();if(K(i)&&i!==97||i===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let t=this.nextTokenStart(),r=this.isUnparsedContextual(t,"from");if(this.input.charCodeAt(t)===44||K(this.state.type)&&r)return!0;if(this.match(65)&&r){let i=this.input.charCodeAt(this.nextTokenStartSince(t+4));return i===34||i===39}return!1}parseExportFrom(e,t){if(this.eatContextual(97)){e.source=this.parseImportSource(),this.checkExport(e);let r=this.maybeParseImportAssertions();r&&(e.assertions=r)}else t&&this.unexpected();this.semicolon()}shouldParseExportDeclaration(){let{type:e}=this.state;if(e===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))){if(this.getPluginOption("decorators","decoratorsBeforeExport"))throw this.raise(m.DecoratorBeforeExport,{at:this.state.startLoc});return!0}return e===74||e===75||e===68||e===80||this.isLet()||this.isAsyncFunction()}checkExport(e,t,r,i){if(t){if(r){if(this.checkDuplicateExports(e,"default"),this.hasPlugin("exportDefaultFrom")){var n;let o=e.declaration;o.type==="Identifier"&&o.name==="from"&&o.end-o.start===4&&!((n=o.extra)!=null&&n.parenthesized)&&this.raise(m.ExportDefaultFromAsIdentifier,{at:o})}}else if(e.specifiers&&e.specifiers.length)for(let o of e.specifiers){let{exported:c}=o,l=c.type==="Identifier"?c.name:c.value;if(this.checkDuplicateExports(o,l),!i&&o.local){let{local:u}=o;u.type!=="Identifier"?this.raise(m.ExportBindingIsString,{at:o,localName:u.value,exportName:l}):(this.checkReservedWord(u.name,u.loc.start,!0,!1),this.scope.checkLocalExport(u))}}else if(e.declaration){if(e.declaration.type==="FunctionDeclaration"||e.declaration.type==="ClassDeclaration"){let o=e.declaration.id;if(!o)throw new Error("Assertion failure");this.checkDuplicateExports(e,o.name)}else if(e.declaration.type==="VariableDeclaration")for(let o of e.declaration.declarations)this.checkDeclaration(o.id)}}if(this.state.decoratorStack[this.state.decoratorStack.length-1].length)throw this.raise(m.UnsupportedDecoratorExport,{at:e})}checkDeclaration(e){if(e.type==="Identifier")this.checkDuplicateExports(e,e.name);else if(e.type==="ObjectPattern")for(let t of e.properties)this.checkDeclaration(t);else if(e.type==="ArrayPattern")for(let t of e.elements)t&&this.checkDeclaration(t);else e.type==="ObjectProperty"?this.checkDeclaration(e.value):e.type==="RestElement"?this.checkDeclaration(e.argument):e.type==="AssignmentPattern"&&this.checkDeclaration(e.left)}checkDuplicateExports(e,t){this.exportedIdentifiers.has(t)&&(t==="default"?this.raise(m.DuplicateDefaultExport,{at:e}):this.raise(m.DuplicateExport,{at:e,exportName:t})),this.exportedIdentifiers.add(t)}parseExportSpecifiers(e){let t=[],r=!0;for(this.expect(5);!this.eat(8);){if(r)r=!1;else if(this.expect(12),this.eat(8))break;let i=this.isContextual(126),n=this.match(129),a=this.startNode();a.local=this.parseModuleExportName(),t.push(this.parseExportSpecifier(a,n,e,i))}return t}parseExportSpecifier(e,t,r,i){return this.eatContextual(93)?e.exported=this.parseModuleExportName():t?e.exported=BE(e.local):e.exported||(e.exported=dt(e.local)),this.finishNode(e,"ExportSpecifier")}parseModuleExportName(){if(this.match(129)){let e=this.parseStringLiteral(this.state.value),t=e.value.match(aw);return t&&this.raise(m.ModuleExportNameHasLoneSurrogate,{at:e,surrogateCharCode:t[0].charCodeAt(0)}),e}return this.parseIdentifier(!0)}parseImport(e){if(e.specifiers=[],!this.match(129)){let i=!this.maybeParseDefaultImportSpecifier(e)||this.eat(12),n=i&&this.maybeParseStarImportSpecifier(e);i&&!n&&this.parseNamedImportSpecifiers(e),this.expectContextual(97)}e.source=this.parseImportSource();let t=this.maybeParseImportAssertions();if(t)e.assertions=t;else{let r=this.maybeParseModuleAttributes();r&&(e.attributes=r)}return this.semicolon(),this.finishNode(e,"ImportDeclaration")}parseImportSource(){return this.match(129)||this.unexpected(),this.parseExprAtom()}shouldParseDefaultImport(e){return K(this.state.type)}parseImportSpecifierLocal(e,t,r){t.local=this.parseIdentifier(),e.specifiers.push(this.finishImportSpecifier(t,r))}finishImportSpecifier(e,t){return this.checkLVal(e.local,{in:e,binding:pt}),this.finishNode(e,t)}parseAssertEntries(){let e=[],t=new Set;do{if(this.match(8))break;let r=this.startNode(),i=this.state.value;if(t.has(i)&&this.raise(m.ModuleAttributesWithDuplicateKeys,{at:this.state.startLoc,key:i}),t.add(i),this.match(129)?r.key=this.parseStringLiteral(i):r.key=this.parseIdentifier(!0),this.expect(14),!this.match(129))throw this.raise(m.ModuleAttributeInvalidValue,{at:this.state.startLoc});r.value=this.parseStringLiteral(this.state.value),this.finishNode(r,"ImportAttribute"),e.push(r)}while(this.eat(12));return e}maybeParseModuleAttributes(){if(this.match(76)&&!this.hasPrecedingLineBreak())this.expectPlugin("moduleAttributes"),this.next();else return this.hasPlugin("moduleAttributes")?[]:null;let e=[],t=new Set;do{let r=this.startNode();if(r.key=this.parseIdentifier(!0),r.key.name!=="type"&&this.raise(m.ModuleAttributeDifferentFromType,{at:r.key}),t.has(r.key.name)&&this.raise(m.ModuleAttributesWithDuplicateKeys,{at:r.key,key:r.key.name}),t.add(r.key.name),this.expect(14),!this.match(129))throw this.raise(m.ModuleAttributeInvalidValue,{at:this.state.startLoc});r.value=this.parseStringLiteral(this.state.value),this.finishNode(r,"ImportAttribute"),e.push(r)}while(this.eat(12));return e}maybeParseImportAssertions(){if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.expectPlugin("importAssertions"),this.next();else return this.hasPlugin("importAssertions")?[]:null;this.eat(5);let e=this.parseAssertEntries();return this.eat(8),e}maybeParseDefaultImportSpecifier(e){return this.shouldParseDefaultImport(e)?(this.parseImportSpecifierLocal(e,this.startNode(),"ImportDefaultSpecifier"),!0):!1}maybeParseStarImportSpecifier(e){if(this.match(55)){let t=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(e,t,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(e){let t=!0;for(this.expect(5);!this.eat(8);){if(t)t=!1;else{if(this.eat(14))throw this.raise(m.DestructureNamedImport,{at:this.state.startLoc});if(this.expect(12),this.eat(8))break}let r=this.startNode(),i=this.match(129),n=this.isContextual(126);r.imported=this.parseModuleExportName();let a=this.parseImportSpecifier(r,i,e.importKind==="type"||e.importKind==="typeof",n);e.specifiers.push(a)}}parseImportSpecifier(e,t,r,i){if(this.eatContextual(93))e.local=this.parseIdentifier();else{let{imported:n}=e;if(t)throw this.raise(m.ImportBindingIsString,{at:e,importName:n.value});this.checkReservedWord(n.name,e.loc.start,!0,!0),e.local||(e.local=dt(n))}return this.finishImportSpecifier(e,"ImportSpecifier")}isThisParam(e){return e.type==="Identifier"&&e.name==="this"}},dn=class extends Lo{constructor(e,t){e=sw(e),super(e,t),this.options=e,this.initializeScopes(),this.plugins=cw(this.options.plugins),this.filename=e.sourceFilename}getScopeHandler(){return Fr}parse(){this.enterInitialScopes();let e=this.startNode(),t=this.startNode();return this.nextToken(),e.errors=null,this.parseTopLevel(e,t),e.errors=this.state.errors,e}};function cw(s){let e=new Map;for(let t of s){let[r,i]=Array.isArray(t)?t:[t,{}];e.has(r)||e.set(r,i||{})}return e}function lw(s,e){var t;if(((t=e)==null?void 0:t.sourceType)==="unambiguous"){e=Object.assign({},e);try{e.sourceType="module";let r=kr(e,s),i=r.parse();if(r.sawUnambiguousESM)return i;if(r.ambiguousScriptDifferentAst)try{return e.sourceType="script",kr(e,s).parse()}catch{}else i.program.sourceType="script";return i}catch(r){try{return e.sourceType="script",kr(e,s).parse()}catch{}throw r}}else return kr(e,s).parse()}function uw(s,e){let t=kr(e,s);return t.options.strictMode&&(t.state.strict=!0),t.getExpression()}function hw(s){let e={};for(let t of Object.keys(s))e[t]=ot(s[t]);return e}var pw=hw(Xb);function kr(s,e){let t=dn;return s!=null&&s.plugins&&(ew(s.plugins),t=fw(s.plugins)),new t(s,e)}var bd={};function fw(s){let e=tw.filter(i=>be(s,i)),t=e.join("/"),r=bd[t];if(!r){r=dn;for(let i of e)r=Wd[i](r);bd[t]=r}return r}Rr.parse=lw;Rr.parseExpression=uw;Rr.tokTypes=pw});var om=E((oC,am)=>{"use strict";d();var{Duplex:Ew}=require("stream");function im(s){s.emit("close")}function ww(){!this.destroyed&&this._writableState.finished&&this.destroy()}function nm(s){this.removeListener("error",nm),this.destroy(),this.listenerCount("error")===0&&this.emit("error",s)}function Sw(s,e){let t=!0,r=new Ew(Se(k({},e),{autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1}));return s.on("message",function(n,a){let o=!a&&r._readableState.objectMode?n.toString():n;r.push(o)||s.pause()}),s.once("error",function(n){r.destroyed||(t=!1,r.destroy(n))}),s.once("close",function(){r.destroyed||r.push(null)}),r._destroy=function(i,n){if(s.readyState===s.CLOSED){n(i),process.nextTick(im,r);return}let a=!1;s.once("error",function(c){a=!0,n(c)}),s.once("close",function(){a||n(i),process.nextTick(im,r)}),t&&s.terminate()},r._final=function(i){if(s.readyState===s.CONNECTING){s.once("open",function(){r._final(i)});return}s._socket!==null&&(s._socket._writableState.finished?(i(),r._readableState.endEmitted&&r.destroy()):(s._socket.once("finish",function(){i()}),s.close()))},r._read=function(){s.isPaused&&s.resume()},r._write=function(i,n,a){if(s.readyState===s.CONNECTING){s.once("open",function(){r._write(i,n,a)});return}s.send(i,a)},r.on("end",ww),r.on("error",nm),r}am.exports=Sw});var Ut=E((cC,cm)=>{"use strict";d();cm.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ur=E((lC,ec)=>{"use strict";d();var{EMPTY_BUFFER:vw}=Ut();function lm(s,e){if(s.length===0)return vw;if(s.length===1)return s[0];let t=Buffer.allocUnsafe(e),r=0;for(let i=0;i<s.length;i++){let n=s[i];t.set(n,r),r+=n.length}return r<e?t.slice(0,r):t}function um(s,e,t,r,i){for(let n=0;n<i;n++)t[r+n]=s[n]^e[n&3]}function hm(s,e){for(let t=0;t<s.length;t++)s[t]^=e[t&3]}function pm(s){return s.byteLength===s.buffer.byteLength?s.buffer:s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}function vn(s){if(vn.readOnly=!0,Buffer.isBuffer(s))return s;let e;return s instanceof ArrayBuffer?e=Buffer.from(s):ArrayBuffer.isView(s)?e=Buffer.from(s.buffer,s.byteOffset,s.byteLength):(e=Buffer.from(s),vn.readOnly=!1),e}try{let s=require("bufferutil");ec.exports={concat:lm,mask(e,t,r,i,n){n<48?um(e,t,r,i,n):s.mask(e,t,r,i,n)},toArrayBuffer:pm,toBuffer:vn,unmask(e,t){e.length<32?hm(e,t):s.unmask(e,t)}}}catch{ec.exports={concat:lm,mask:um,toArrayBuffer:pm,toBuffer:vn,unmask:hm}}});var mm=E((uC,dm)=>{"use strict";d();var fm=Symbol("kDone"),tc=Symbol("kRun"),sc=class{constructor(e){this[fm]=()=>{this.pending--,this[tc]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[tc]()}[tc](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[fm])}}};dm.exports=sc});var Wr=E((hC,Pm)=>{"use strict";d();var jr=require("zlib"),ym=Ur(),Aw=mm(),{kStatusCode:gm}=Ut(),Cw=Buffer.from([0,0,255,255]),Nn=Symbol("permessage-deflate"),xt=Symbol("total-length"),qr=Symbol("callback"),jt=Symbol("buffers"),Cn=Symbol("error"),An,rc=class{constructor(e,t,r){if(this._maxPayload=r|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!An){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;An=new Aw(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[qr];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(i=>!(t.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>i.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(r.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?r.client_max_window_bits=t.clientMaxWindowBits:(r.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(r=>{let i=t[r];if(i.length>1)throw new Error(`Parameter "${r}" must have only a single value`);if(i=i[0],r==="client_max_window_bits"){if(i!==!0){let n=+i;if(!Number.isInteger(n)||n<8||n>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=n}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else if(r==="server_max_window_bits"){let n=+i;if(!Number.isInteger(n)||n<8||n>15)throw new TypeError(`Invalid value for parameter "${r}": ${i}`);i=n}else if(r==="client_no_context_takeover"||r==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${r}": ${i}`)}else throw new Error(`Unknown parameter "${r}"`);t[r]=i})}),e}decompress(e,t,r){An.add(i=>{this._decompress(e,t,(n,a)=>{i(),r(n,a)})})}compress(e,t,r){An.add(i=>{this._compress(e,t,(n,a)=>{i(),r(n,a)})})}_decompress(e,t,r){let i=this._isServer?"client":"server";if(!this._inflate){let n=`${i}_max_window_bits`,a=typeof this.params[n]!="number"?jr.Z_DEFAULT_WINDOWBITS:this.params[n];this._inflate=jr.createInflateRaw(Se(k({},this._options.zlibInflateOptions),{windowBits:a})),this._inflate[Nn]=this,this._inflate[xt]=0,this._inflate[jt]=[],this._inflate.on("error",Iw),this._inflate.on("data",xm)}this._inflate[qr]=r,this._inflate.write(e),t&&this._inflate.write(Cw),this._inflate.flush(()=>{let n=this._inflate[Cn];if(n){this._inflate.close(),this._inflate=null,r(n);return}let a=ym.concat(this._inflate[jt],this._inflate[xt]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[xt]=0,this._inflate[jt]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,a)})}_compress(e,t,r){let i=this._isServer?"server":"client";if(!this._deflate){let n=`${i}_max_window_bits`,a=typeof this.params[n]!="number"?jr.Z_DEFAULT_WINDOWBITS:this.params[n];this._deflate=jr.createDeflateRaw(Se(k({},this._options.zlibDeflateOptions),{windowBits:a})),this._deflate[xt]=0,this._deflate[jt]=[],this._deflate.on("data",Nw)}this._deflate[qr]=r,this._deflate.write(e),this._deflate.flush(jr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let n=ym.concat(this._deflate[jt],this._deflate[xt]);t&&(n=n.slice(0,n.length-4)),this._deflate[qr]=null,this._deflate[xt]=0,this._deflate[jt]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,n)})}};Pm.exports=rc;function Nw(s){this[jt].push(s),this[xt]+=s.length}function xm(s){if(this[xt]+=s.length,this[Nn]._maxPayload<1||this[xt]<=this[Nn]._maxPayload){this[jt].push(s);return}this[Cn]=new RangeError("Max payload size exceeded"),this[Cn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Cn][gm]=1009,this.removeListener("data",xm),this.reset()}function Iw(s){this[Nn]._inflate=null,s[gm]=1007,this[qr](s)}});var Vr=E((pC,ic)=>{"use strict";d();var Tm=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function bm(s){return s>=1e3&&s<=1014&&s!==1004&&s!==1005&&s!==1006||s>=3e3&&s<=4999}function Em(s){let e=s.length,t=0;for(;t<e;)if((s[t]&128)===0)t++;else if((s[t]&224)===192){if(t+1===e||(s[t+1]&192)!==128||(s[t]&254)===192)return!1;t+=2}else if((s[t]&240)===224){if(t+2>=e||(s[t+1]&192)!==128||(s[t+2]&192)!==128||s[t]===224&&(s[t+1]&224)===128||s[t]===237&&(s[t+1]&224)===160)return!1;t+=3}else if((s[t]&248)===240){if(t+3>=e||(s[t+1]&192)!==128||(s[t+2]&192)!==128||(s[t+3]&192)!==128||s[t]===240&&(s[t+1]&240)===128||s[t]===244&&s[t+1]>143||s[t]>244)return!1;t+=4}else return!1;return!0}try{let s=require("utf-8-validate");ic.exports={isValidStatusCode:bm,isValidUTF8(e){return e.length<150?Em(e):s(e)},tokenChars:Tm}}catch{ic.exports={isValidStatusCode:bm,isValidUTF8:Em,tokenChars:Tm}}});var cc=E((fC,Im)=>{"use strict";d();var{Writable:kw}=require("stream"),wm=Wr(),{BINARY_TYPES:Lw,EMPTY_BUFFER:Sm,kStatusCode:Ow,kWebSocket:_w}=Ut(),{concat:nc,toArrayBuffer:Dw,unmask:Mw}=Ur(),{isValidStatusCode:Fw,isValidUTF8:vm}=Vr(),zr=0,Am=1,Cm=2,Nm=3,ac=4,Rw=5,oc=class extends kw{constructor(e={}){super(),this._binaryType=e.binaryType||Lw[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[_w]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=zr,this._loop=!1}_write(e,t,r){if(this._opcode===8&&this._state==zr)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let r=this._buffers[0];return this._buffers[0]=r.slice(e),r.slice(0,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],i=t.length-e;e>=r.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case zr:t=this.getInfo();break;case Am:t=this.getPayloadLength16();break;case Cm:t=this.getPayloadLength64();break;case Nm:this.getMask();break;case ac:t=this.getData(e);break;default:this._loop=!1;return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if((e[0]&48)!==0)return this._loop=!1,pe(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[wm.extensionName])return this._loop=!1,pe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,pe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,pe(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,pe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,pe(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,pe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,pe(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,pe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,pe(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,pe(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Am;else if(this._payloadLength===127)this._state=Cm;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,pe(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,pe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Nm:this._state=ac}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=ac}getData(e){let t=Sm;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Mw(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Rw,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[wm.extensionName].decompress(e,this._fin,(i,n)=>{if(i)return t(i);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(pe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(n)}let a=this.dataMessage();if(a)return t(a);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let r;this._binaryType==="nodebuffer"?r=nc(t,e):this._binaryType==="arraybuffer"?r=Dw(nc(t,e)):r=t,this.emit("message",r,!0)}else{let r=nc(t,e);if(!this._skipUTF8Validation&&!vm(r))return this._loop=!1,pe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=zr}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,Sm),this.end();else{if(e.length===1)return pe(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{let t=e.readUInt16BE(0);if(!Fw(t))return pe(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let r=e.slice(2);if(!this._skipUTF8Validation&&!vm(r))return pe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else this._opcode===9?this.emit("ping",e):this.emit("pong",e);this._state=zr}};Im.exports=oc;function pe(s,e,t,r,i){let n=new s(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(n,pe),n.code=i,n[Ow]=r,n}});var lc=E((yC,Om)=>{"use strict";d();var dC=require("net"),mC=require("tls"),{randomFillSync:Bw}=require("crypto"),km=Wr(),{EMPTY_BUFFER:$w}=Ut(),{isValidStatusCode:Uw}=Vr(),{mask:Lm,toBuffer:Ks}=Ur(),Je=Symbol("kByteLength"),jw=Buffer.alloc(4),Qe=class{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let r,i=!1,n=2,a=!1;t.mask&&(r=t.maskBuffer||jw,t.generateMask?t.generateMask(r):Bw(r,0,4),a=(r[0]|r[1]|r[2]|r[3])===0,n=6);let o;typeof e=="string"?(!t.mask||a)&&t[Je]!==void 0?o=t[Je]:(e=Buffer.from(e),o=e.length):(o=e.length,i=t.mask&&t.readOnly&&!a);let c=o;o>=65536?(n+=8,c=127):o>125&&(n+=2,c=126);let l=Buffer.allocUnsafe(i?o+n:n);return l[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,c===126?l.writeUInt16BE(o,2):c===127&&(l[2]=l[3]=0,l.writeUIntBE(o,4,6)),t.mask?(l[1]|=128,l[n-4]=r[0],l[n-3]=r[1],l[n-2]=r[2],l[n-1]=r[3],a?[l,e]:i?(Lm(e,r,l,n,o),[l]):(Lm(e,r,e,0,o),[l,e])):[l,e]}close(e,t,r,i){let n;if(e===void 0)n=$w;else{if(typeof e!="number"||!Uw(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0);else{let o=Buffer.byteLength(t);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+o),n.writeUInt16BE(e,0),typeof t=="string"?n.write(t,2):n.set(t,2)}}let a={[Je]:n.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,n,!1,a,i]):this.sendFrame(Qe.frame(n,a),i)}ping(e,t,r){let i,n;if(typeof e=="string"?(i=Buffer.byteLength(e),n=!1):(e=Ks(e),i=e.length,n=Ks.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Je]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,a,r]):this.sendFrame(Qe.frame(e,a),r)}pong(e,t,r){let i,n;if(typeof e=="string"?(i=Buffer.byteLength(e),n=!1):(e=Ks(e),i=e.length,n=Ks.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let a={[Je]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,a,r]):this.sendFrame(Qe.frame(e,a),r)}send(e,t,r){let i=this._extensions[km.extensionName],n=t.binary?2:1,a=t.compress,o,c;if(typeof e=="string"?(o=Buffer.byteLength(e),c=!1):(e=Ks(e),o=e.length,c=Ks.readOnly),this._firstFragment?(this._firstFragment=!1,a&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=o>=i._threshold),this._compress=a):(a=!1,n=0),t.fin&&(this._firstFragment=!0),i){let l={[Je]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:n,readOnly:c,rsv1:a};this._deflating?this.enqueue([this.dispatch,e,this._compress,l,r]):this.dispatch(e,this._compress,l,r)}else this.sendFrame(Qe.frame(e,{[Je]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:n,readOnly:c,rsv1:!1}),r)}dispatch(e,t,r,i){if(!t){this.sendFrame(Qe.frame(e,r),i);return}let n=this._extensions[km.extensionName];this._bufferedBytes+=r[Je],this._deflating=!0,n.compress(e,r.fin,(a,o)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(c);for(let l=0;l<this._queue.length;l++){let u=this._queue[l],h=u[u.length-1];typeof h=="function"&&h(c)}return}this._bufferedBytes-=r[Je],this._deflating=!1,r.readOnly=!1,this.sendFrame(Qe.frame(o,r),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Je],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Je],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Om.exports=Qe});var qm=E((gC,jm)=>{"use strict";d();var{kForOnEventAttribute:uc,kListener:_m}=Ut(),Dm=Symbol("kCode"),Mm=Symbol("kData"),Fm=Symbol("kError"),Rm=Symbol("kMessage"),Bm=Symbol("kReason"),Xs=Symbol("kTarget"),$m=Symbol("kType"),Um=Symbol("kWasClean"),Pt=class{constructor(e){this[Xs]=null,this[$m]=e}get target(){return this[Xs]}get type(){return this[$m]}};Object.defineProperty(Pt.prototype,"target",{enumerable:!0});Object.defineProperty(Pt.prototype,"type",{enumerable:!0});var ms=class extends Pt{constructor(e,t={}){super(e),this[Dm]=t.code===void 0?0:t.code,this[Bm]=t.reason===void 0?"":t.reason,this[Um]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Dm]}get reason(){return this[Bm]}get wasClean(){return this[Um]}};Object.defineProperty(ms.prototype,"code",{enumerable:!0});Object.defineProperty(ms.prototype,"reason",{enumerable:!0});Object.defineProperty(ms.prototype,"wasClean",{enumerable:!0});var Js=class extends Pt{constructor(e,t={}){super(e),this[Fm]=t.error===void 0?null:t.error,this[Rm]=t.message===void 0?"":t.message}get error(){return this[Fm]}get message(){return this[Rm]}};Object.defineProperty(Js.prototype,"error",{enumerable:!0});Object.defineProperty(Js.prototype,"message",{enumerable:!0});var Gr=class extends Pt{constructor(e,t={}){super(e),this[Mm]=t.data===void 0?null:t.data}get data(){return this[Mm]}};Object.defineProperty(Gr.prototype,"data",{enumerable:!0});var qw={addEventListener(s,e,t={}){let r;if(s==="message")r=function(n,a){let o=new Gr("message",{data:a?n:n.toString()});o[Xs]=this,e.call(this,o)};else if(s==="close")r=function(n,a){let o=new ms("close",{code:n,reason:a.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});o[Xs]=this,e.call(this,o)};else if(s==="error")r=function(n){let a=new Js("error",{error:n,message:n.message});a[Xs]=this,e.call(this,a)};else if(s==="open")r=function(){let n=new Pt("open");n[Xs]=this,e.call(this,n)};else return;r[uc]=!!t[uc],r[_m]=e,t.once?this.once(s,r):this.on(s,r)},removeEventListener(s,e){for(let t of this.listeners(s))if(t[_m]===e&&!t[uc]){this.removeListener(s,t);break}}};jm.exports={CloseEvent:ms,ErrorEvent:Js,Event:Pt,EventTarget:qw,MessageEvent:Gr}});var hc=E((xC,Wm)=>{"use strict";d();var{tokenChars:Hr}=Vr();function Ze(s,e,t){s[e]===void 0?s[e]=[t]:s[e].push(t)}function Ww(s){let e=Object.create(null),t=Object.create(null),r=!1,i=!1,n=!1,a,o,c=-1,l=-1,u=-1,h=0;for(;h<s.length;h++)if(l=s.charCodeAt(h),a===void 0)if(u===-1&&Hr[l]===1)c===-1&&(c=h);else if(h!==0&&(l===32||l===9))u===-1&&c!==-1&&(u=h);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h);let f=s.slice(c,u);l===44?(Ze(e,f,t),t=Object.create(null)):a=f,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);else if(o===void 0)if(u===-1&&Hr[l]===1)c===-1&&(c=h);else if(l===32||l===9)u===-1&&c!==-1&&(u=h);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h),Ze(t,s.slice(c,u),!0),l===44&&(Ze(e,a,t),t=Object.create(null),a=void 0),c=u=-1}else if(l===61&&c!==-1&&u===-1)o=s.slice(c,h),c=u=-1;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(i){if(Hr[l]!==1)throw new SyntaxError(`Unexpected character at index ${h}`);c===-1?c=h:r||(r=!0),i=!1}else if(n)if(Hr[l]===1)c===-1&&(c=h);else if(l===34&&c!==-1)n=!1,u=h;else if(l===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(l===34&&s.charCodeAt(h-1)===61)n=!0;else if(u===-1&&Hr[l]===1)c===-1&&(c=h);else if(c!==-1&&(l===32||l===9))u===-1&&(u=h);else if(l===59||l===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h);let f=s.slice(c,u);r&&(f=f.replace(/\\/g,""),r=!1),Ze(t,o,f),l===44&&(Ze(e,a,t),t=Object.create(null),a=void 0),o=void 0,c=u=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);if(c===-1||n||l===32||l===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=h);let p=s.slice(c,u);return a===void 0?Ze(e,p,t):(o===void 0?Ze(t,p,!0):r?Ze(t,o,p.replace(/\\/g,"")):Ze(t,o,p),Ze(e,a,t)),e}function Vw(s){return Object.keys(s).map(e=>{let t=s[e];return Array.isArray(t)||(t=[t]),t.map(r=>[e].concat(Object.keys(r).map(i=>{let n=r[i];return Array.isArray(n)||(n=[n]),n.map(a=>a===!0?i:`${i}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Wm.exports={format:Vw,parse:Ww}});var yc=E((TC,ey)=>{"use strict";d();var zw=require("events"),Gw=require("https"),Hw=require("http"),Gm=require("net"),Kw=require("tls"),{randomBytes:Xw,createHash:Jw}=require("crypto"),{Readable:PC}=require("stream"),{URL:pc}=require("url"),qt=Wr(),Yw=cc(),Qw=lc(),{BINARY_TYPES:Vm,EMPTY_BUFFER:In,GUID:Zw,kForOnEventAttribute:fc,kListener:eS,kStatusCode:tS,kWebSocket:we,NOOP:Hm}=Ut(),{EventTarget:{addEventListener:sS,removeEventListener:rS}}=qm(),{format:iS,parse:nS}=hc(),{toBuffer:aS}=Ur(),oS=30*1e3,Km=Symbol("kAborted"),dc=[8,13],Tt=["CONNECTING","OPEN","CLOSING","CLOSED"],cS=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,R=class extends zw{constructor(e,t,r){super(),this._binaryType=Vm[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=In,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(r=t,t=[]):t=[t]),Xm(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){!Vm.includes(e)||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let i=new Yw({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new Qw(e,this._extensions,r.generateMask),this._receiver=i,this._socket=e,i[we]=this,e[we]=this,i.on("conclude",hS),i.on("drain",pS),i.on("error",fS),i.on("message",dS),i.on("ping",mS),i.on("pong",yS),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Ym),e.on("data",Ln),e.on("end",Qm),e.on("error",Zm),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[qt.extensionName]&&this._extensions[qt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){let r="WebSocket was closed before the connection was established";return ze(this,this._req,r)}if(this.readyState===R.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=R.CLOSING,this._sender.close(e,t,!this._isServer,r=>{r||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),oS)}}pause(){this.readyState===R.CONNECTING||this.readyState===R.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=t=void 0):typeof t=="function"&&(r=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==R.OPEN){mc(this,e,r);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||In,t,r)}pong(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(r=e,e=t=void 0):typeof t=="function"&&(r=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==R.OPEN){mc(this,e,r);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||In,t,r)}resume(){this.readyState===R.CONNECTING||this.readyState===R.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===R.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(r=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==R.OPEN){mc(this,e,r);return}let i=k({binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[qt.extensionName]||(i.compress=!1),this._sender.send(e||In,i,r)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){let e="WebSocket was closed before the connection was established";return ze(this,this._req,e)}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}};Object.defineProperty(R,"CONNECTING",{enumerable:!0,value:Tt.indexOf("CONNECTING")});Object.defineProperty(R.prototype,"CONNECTING",{enumerable:!0,value:Tt.indexOf("CONNECTING")});Object.defineProperty(R,"OPEN",{enumerable:!0,value:Tt.indexOf("OPEN")});Object.defineProperty(R.prototype,"OPEN",{enumerable:!0,value:Tt.indexOf("OPEN")});Object.defineProperty(R,"CLOSING",{enumerable:!0,value:Tt.indexOf("CLOSING")});Object.defineProperty(R.prototype,"CLOSING",{enumerable:!0,value:Tt.indexOf("CLOSING")});Object.defineProperty(R,"CLOSED",{enumerable:!0,value:Tt.indexOf("CLOSED")});Object.defineProperty(R.prototype,"CLOSED",{enumerable:!0,value:Tt.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(s=>{Object.defineProperty(R.prototype,s,{enumerable:!0})});["open","error","close","message"].forEach(s=>{Object.defineProperty(R.prototype,`on${s}`,{enumerable:!0,get(){for(let e of this.listeners(s))if(e[fc])return e[eS];return null},set(e){for(let t of this.listeners(s))if(t[fc]){this.removeListener(s,t);break}typeof e=="function"&&this.addEventListener(s,e,{[fc]:!0})}})});R.prototype.addEventListener=sS;R.prototype.removeEventListener=rS;ey.exports=R;function Xm(s,e,t,r){let i=Se(k({protocolVersion:dc[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10},r),{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0});if(!dc.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${dc.join(", ")})`);let n;if(e instanceof pc)n=e,s._url=e.href;else{try{n=new pc(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s._url=e}let a=n.protocol==="wss:",o=n.protocol==="ws+unix:",c;if(n.protocol!=="ws:"&&!a&&!o?c=`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`:o&&!n.pathname?c="The URL's pathname is empty":n.hash&&(c="The URL contains a fragment identifier"),c){let g=new SyntaxError(c);if(s._redirects===0)throw g;kn(s,g);return}let l=a?443:80,u=Xw(16).toString("base64"),h=a?Gw.request:Hw.request,p=new Set,f;if(i.createConnection=a?uS:lS,i.defaultPort=i.defaultPort||l,i.port=n.port||l,i.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,i.headers=k({"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},i.headers),i.path=n.pathname+n.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(f=new qt(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=iS({[qt.extensionName]:f.offer()})),t.length){for(let g of t){if(typeof g!="string"||!cS.test(g)||p.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(g)}i.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(n.username||n.password)&&(i.auth=`${n.username}:${n.password}`),o){let g=i.path.split(":");i.socketPath=g[0],i.path=g[1]}let y;if(i.followRedirects){if(s._redirects===0){s._originalHost=n.host;let g=r&&r.headers;if(r=Se(k({},r),{headers:{}}),g)for(let[b,T]of Object.entries(g))r.headers[b.toLowerCase()]=T}else s.listenerCount("redirect")===0&&n.host!==s._originalHost&&(delete i.headers.authorization,delete i.headers.cookie,delete i.headers.host,i.auth=void 0);i.auth&&!r.headers.authorization&&(r.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),y=s._req=h(i),s._redirects&&s.emit("redirect",s.url,y)}else y=s._req=h(i);i.timeout&&y.on("timeout",()=>{ze(s,y,"Opening handshake has timed out")}),y.on("error",g=>{y===null||y[Km]||(y=s._req=null,kn(s,g))}),y.on("response",g=>{let b=g.headers.location,T=g.statusCode;if(b&&i.followRedirects&&T>=300&&T<400){if(++s._redirects>i.maxRedirects){ze(s,y,"Maximum redirects exceeded");return}y.abort();let x;try{x=new pc(b,e)}catch{let A=new SyntaxError(`Invalid URL: ${b}`);kn(s,A);return}Xm(s,x,t,r)}else s.emit("unexpected-response",y,g)||ze(s,y,`Unexpected server response: ${g.statusCode}`)}),y.on("upgrade",(g,b,T)=>{if(s.emit("upgrade",g),s.readyState!==R.CONNECTING)return;y=s._req=null;let x=Jw("sha1").update(u+Zw).digest("base64");if(g.headers["sec-websocket-accept"]!==x){ze(s,b,"Invalid Sec-WebSocket-Accept header");return}let S=g.headers["sec-websocket-protocol"],A;if(S!==void 0?p.size?p.has(S)||(A="Server sent an invalid subprotocol"):A="Server sent a subprotocol but none was requested":p.size&&(A="Server sent no subprotocol"),A){ze(s,b,A);return}S&&(s._protocol=S);let C=g.headers["sec-websocket-extensions"];if(C!==void 0){if(!f){ze(s,b,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let j;try{j=nS(C)}catch{ze(s,b,"Invalid Sec-WebSocket-Extensions header");return}let z=Object.keys(j);if(z.length!==1||z[0]!==qt.extensionName){ze(s,b,"Server indicated an extension that was not requested");return}try{f.accept(j[qt.extensionName])}catch{ze(s,b,"Invalid Sec-WebSocket-Extensions header");return}s._extensions[qt.extensionName]=f}s.setSocket(b,T,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),y.end()}function kn(s,e){s._readyState=R.CLOSING,s.emit("error",e),s.emitClose()}function lS(s){return s.path=s.socketPath,Gm.connect(s)}function uS(s){return s.path=void 0,!s.servername&&s.servername!==""&&(s.servername=Gm.isIP(s.host)?"":s.host),Kw.connect(s)}function ze(s,e,t){s._readyState=R.CLOSING;let r=new Error(t);Error.captureStackTrace(r,ze),e.setHeader?(e[Km]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(kn,s,r)):(e.destroy(r),e.once("error",s.emit.bind(s,"error")),e.once("close",s.emitClose.bind(s)))}function mc(s,e,t){if(e){let r=aS(e).length;s._socket?s._sender._bufferedBytes+=r:s._bufferedAmount+=r}if(t){let r=new Error(`WebSocket is not open: readyState ${s.readyState} (${Tt[s.readyState]})`);t(r)}}function hS(s,e){let t=this[we];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=s,t._socket[we]!==void 0&&(t._socket.removeListener("data",Ln),process.nextTick(Jm,t._socket),s===1005?t.close():t.close(s,e))}function pS(){let s=this[we];s.isPaused||s._socket.resume()}function fS(s){let e=this[we];e._socket[we]!==void 0&&(e._socket.removeListener("data",Ln),process.nextTick(Jm,e._socket),e.close(s[tS])),e.emit("error",s)}function zm(){this[we].emitClose()}function dS(s,e){this[we].emit("message",s,e)}function mS(s){let e=this[we];e.pong(s,!e._isServer,Hm),e.emit("ping",s)}function yS(s){this[we].emit("pong",s)}function Jm(s){s.resume()}function Ym(){let s=this[we];this.removeListener("close",Ym),this.removeListener("data",Ln),this.removeListener("end",Qm),s._readyState=R.CLOSING;let e;!this._readableState.endEmitted&&!s._closeFrameReceived&&!s._receiver._writableState.errorEmitted&&(e=s._socket.read())!==null&&s._receiver.write(e),s._receiver.end(),this[we]=void 0,clearTimeout(s._closeTimer),s._receiver._writableState.finished||s._receiver._writableState.errorEmitted?s.emitClose():(s._receiver.on("error",zm),s._receiver.on("finish",zm))}function Ln(s){this[we]._receiver.write(s)||this.pause()}function Qm(){let s=this[we];s._readyState=R.CLOSING,s._receiver.end(),this.end()}function Zm(){let s=this[we];this.removeListener("error",Zm),this.on("error",Hm),s&&(s._readyState=R.CLOSING,this.destroy())}});var sy=E((bC,ty)=>{"use strict";d();var{tokenChars:gS}=Vr();function xS(s){let e=new Set,t=-1,r=-1,i=0;for(i;i<s.length;i++){let a=s.charCodeAt(i);if(r===-1&&gS[a]===1)t===-1&&(t=i);else if(i!==0&&(a===32||a===9))r===-1&&t!==-1&&(r=i);else if(a===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${i}`);r===-1&&(r=i);let o=s.slice(t,r);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);e.add(o),t=r=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(t===-1||r!==-1)throw new SyntaxError("Unexpected end of input");let n=s.slice(t,i);if(e.has(n))throw new SyntaxError(`The "${n}" subprotocol is duplicated`);return e.add(n),e}ty.exports={parse:xS}});var cy=E((vC,oy)=>{"use strict";d();var PS=require("events"),On=require("http"),EC=require("https"),wC=require("net"),SC=require("tls"),{createHash:TS}=require("crypto"),ry=hc(),ys=Wr(),bS=sy(),ES=yc(),{GUID:wS,kWebSocket:SS}=Ut(),vS=/^[+/0-9A-Za-z]{22}==$/,iy=0,ny=1,ay=2,gc=class extends PS{constructor(e,t){if(super(),e=k({maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:ES},e),e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=On.createServer((r,i)=>{let n=On.STATUS_CODES[426];i.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),i.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let r=this.emit.bind(this,"connection");this._removeListeners=AS(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,n,a)=>{this.handleUpgrade(i,n,a,r)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=iy}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===ay){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Kr,this);return}if(e&&this.once("close",e),this._state!==ny)if(this._state=ny,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Kr,this):process.nextTick(Kr,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{Kr(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,i){t.on("error",xc);let n=e.headers["sec-websocket-key"]!==void 0?e.headers["sec-websocket-key"]:!1,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"||e.headers.upgrade.toLowerCase()!=="websocket"||!n||!vS.test(n)||a!==8&&a!==13||!this.shouldHandle(e))return Ys(t,400);let o=e.headers["sec-websocket-protocol"],c=new Set;if(o!==void 0)try{c=bS.parse(o)}catch{return Ys(t,400)}let l=e.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&l!==void 0){let h=new ys(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=ry.parse(l);p[ys.extensionName]&&(h.accept(p[ys.extensionName]),u[ys.extensionName]=h)}catch{return Ys(t,400)}}if(this.options.verifyClient){let h={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(p,f,y,g)=>{if(!p)return Ys(t,f||401,y,g);this.completeUpgrade(u,n,c,e,t,r,i)});return}if(!this.options.verifyClient(h))return Ys(t,401)}this.completeUpgrade(u,n,c,e,t,r,i)}completeUpgrade(e,t,r,i,n,a,o){if(!n.readable||!n.writable)return n.destroy();if(n[SS])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>iy)return Ys(n,503);let c=TS("sha1").update(t+wS).digest("base64"),l=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${c}`],u=new this.options.WebSocket(null);if(r.size){let h=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;h&&(l.push(`Sec-WebSocket-Protocol: ${h}`),u._protocol=h)}if(e[ys.extensionName]){let h=e[ys.extensionName].params,p=ry.format({[ys.extensionName]:[h]});l.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=e}this.emit("headers",l,i),n.write(l.concat(`\r
`).join(`\r
`)),n.removeListener("error",xc),u.setSocket(n,a,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Kr,this)})),o(u,i)}};oy.exports=gc;function AS(s,e){for(let t of Object.keys(e))s.on(t,e[t]);return function(){for(let r of Object.keys(e))s.removeListener(r,e[r])}}function Kr(s){s._state=ay,s.emit("close")}function xc(){this.destroy()}function Ys(s,e,t,r){s.writable&&(t=t||On.STATUS_CODES[e],r=k({Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t)},r),s.write(`HTTP/1.1 ${e} ${On.STATUS_CODES[e]}\r
`+Object.keys(r).map(i=>`${i}: ${r[i]}`).join(`\r
`)+`\r
\r
`+t)),s.removeListener("error",xc),s.destroy()}});var kv={};Yy(kv,{activate:()=>wv,deactivate:()=>Iv});module.exports=Qy(kv);d();var ie=ne(require("vscode"));d();d();function Xn(s,e){let t=Object.create(null),r=s.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}var Zy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var _v=Xn(Zy+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var Dv=process.env.NODE_ENV!=="production"?Object.freeze({}):{},Mv=process.env.NODE_ENV!=="production"?Object.freeze([]):[],zc=()=>{};var ei=Object.assign;var eg=Object.prototype.hasOwnProperty,er=(s,e)=>eg.call(s,e),st=Array.isArray,Ps=s=>Hc(s)==="[object Map]";var Gc=s=>typeof s=="function",tg=s=>typeof s=="string",ti=s=>typeof s=="symbol",tr=s=>s!==null&&typeof s=="object";var sg=Object.prototype.toString,Hc=s=>sg.call(s),Jn=s=>Hc(s).slice(8,-1);var si=s=>tg(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s;var ri=s=>{let e=Object.create(null);return t=>e[t]||(e[t]=s(t))},rg=/-(\w)/g,Fv=ri(s=>s.replace(rg,(e,t)=>t?t.toUpperCase():"")),ig=/\B([A-Z])/g,Rv=ri(s=>s.replace(ig,"-$1").toLowerCase()),Yn=ri(s=>s.charAt(0).toUpperCase()+s.slice(1)),Bv=ri(s=>s?`on${Yn(s)}`:""),ii=(s,e)=>!Object.is(s,e);function Kc(s,...e){console.warn(`[Vue warn] ${s}`,...e)}var ng;function tl(s,e=ng){e&&e.active&&e.effects.push(s)}var rr=s=>{let e=new Set(s);return e.w=0,e.n=0,e},sl=s=>(s.w&vt)>0,rl=s=>(s.n&vt)>0,ag=({deps:s})=>{if(s.length)for(let e=0;e<s.length;e++)s[e].w|=vt},og=s=>{let{deps:e}=s;if(e.length){let t=0;for(let r=0;r<e.length;r++){let i=e[r];sl(i)&&!rl(i)?i.delete(s):e[t++]=i,i.w&=~vt,i.n&=~vt}e.length=t}},Qn=new WeakMap,sr=0,vt=1,Zn=30,ve,Vt=Symbol(process.env.NODE_ENV!=="production"?"iterate":""),ea=Symbol(process.env.NODE_ENV!=="production"?"Map key iterate":""),ui=class{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,tl(this,r)}run(){if(!this.active)return this.fn();let e=ve,t=St;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ve,ve=this,St=!0,vt=1<<++sr,sr<=Zn?ag(this):Xc(this),this.fn()}finally{sr<=Zn&&og(this),vt=1<<--sr,ve=this.parent,St=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ve===this?this.deferStop=!0:this.active&&(Xc(this),this.onStop&&this.onStop(),this.active=!1)}};function Xc(s){let{deps:e}=s;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(s);e.length=0}}function Es(s,e){s.effect&&(s=s.effect.fn);let t=new ui(s);e&&(ei(t,e),e.scope&&tl(t,e.scope)),(!e||!e.lazy)&&t.run();let r=t.run.bind(t);return r.effect=t,r}var St=!0,il=[];function cg(){il.push(St),St=!1}function lg(){let s=il.pop();St=s===void 0?!0:s}function Ge(s,e,t){if(St&&ve){let r=Qn.get(s);r||Qn.set(s,r=new Map);let i=r.get(t);i||r.set(t,i=rr());let n=process.env.NODE_ENV!=="production"?{effect:ve,target:s,type:e,key:t}:void 0;ta(i,n)}}function ta(s,e){let t=!1;sr<=Zn?rl(s)||(s.n|=vt,t=!sl(s)):t=!s.has(ve),t&&(s.add(ve),ve.deps.push(s),process.env.NODE_ENV!=="production"&&ve.onTrack&&ve.onTrack(Object.assign({effect:ve},e)))}function At(s,e,t,r,i,n){let a=Qn.get(s);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&st(s))a.forEach((l,u)=>{(u==="length"||u>=r)&&o.push(l)});else switch(t!==void 0&&o.push(a.get(t)),e){case"add":st(s)?si(t)&&o.push(a.get("length")):(o.push(a.get(Vt)),Ps(s)&&o.push(a.get(ea)));break;case"delete":st(s)||(o.push(a.get(Vt)),Ps(s)&&o.push(a.get(ea)));break;case"set":Ps(s)&&o.push(a.get(Vt));break}let c=process.env.NODE_ENV!=="production"?{target:s,type:e,key:t,newValue:r,oldValue:i,oldTarget:n}:void 0;if(o.length===1)o[0]&&(process.env.NODE_ENV!=="production"?Ts(o[0],c):Ts(o[0]));else{let l=[];for(let u of o)u&&l.push(...u);process.env.NODE_ENV!=="production"?Ts(rr(l),c):Ts(rr(l))}}function Ts(s,e){for(let t of st(s)?s:[...s])(t!==ve||t.allowRecurse)&&(process.env.NODE_ENV!=="production"&&t.onTrigger&&t.onTrigger(ei({effect:t},e)),t.scheduler?t.scheduler():t.run())}var ug=Xn("__proto__,__v_isRef,__isVue"),nl=new Set(Object.getOwnPropertyNames(Symbol).map(s=>Symbol[s]).filter(ti)),hg=na(),pg=na(!1,!0),fg=na(!0);var Jc=dg();function dg(){let s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){let r=Y(this);for(let n=0,a=this.length;n<a;n++)Ge(r,"get",n+"");let i=r[e](...t);return i===-1||i===!1?r[e](...t.map(Y)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){cg();let r=Y(this)[e].apply(this,t);return lg(),r}}),s}function na(s=!1,e=!1){return function(r,i,n){if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&n===(s?e?kg:hl:e?ul:ll).get(r))return r;let a=st(r);if(!s&&a&&er(Jc,i))return Reflect.get(Jc,i,n);let o=Reflect.get(r,i,n);return(ti(i)?nl.has(i):ug(i))||(s||Ge(r,"get",i),e)?o:bs(o)?!a||!si(i)?o.value:o:tr(o)?s?pl(o):pi(o):o}}var mg=al(),yg=al(!0);function al(s=!1){return function(t,r,i,n){let a=t[r];if(sa(a)&&bs(a)&&!bs(i))return!1;if(!s&&!sa(i)&&(_g(i)||(i=Y(i),a=Y(a)),!st(t)&&bs(a)&&!bs(i)))return a.value=i,!0;let o=st(t)&&si(r)?Number(r)<t.length:er(t,r),c=Reflect.set(t,r,i,n);return t===Y(n)&&(o?ii(i,a)&&At(t,"set",r,i,a):At(t,"add",r,i)),c}}function gg(s,e){let t=er(s,e),r=s[e],i=Reflect.deleteProperty(s,e);return i&&t&&At(s,"delete",e,void 0,r),i}function xg(s,e){let t=Reflect.has(s,e);return(!ti(e)||!nl.has(e))&&Ge(s,"has",e),t}function Pg(s){return Ge(s,"iterate",st(s)?"length":Vt),Reflect.ownKeys(s)}var ol={get:hg,set:mg,deleteProperty:gg,has:xg,ownKeys:Pg},Tg={get:fg,set(s,e){return process.env.NODE_ENV!=="production"&&Kc(`Set operation on key "${String(e)}" failed: target is readonly.`,s),!0},deleteProperty(s,e){return process.env.NODE_ENV!=="production"&&Kc(`Delete operation on key "${String(e)}" failed: target is readonly.`,s),!0}},bg=ei({},ol,{get:pg,set:yg});var aa=s=>s,hi=s=>Reflect.getPrototypeOf(s);function ni(s,e,t=!1,r=!1){s=s.__v_raw;let i=Y(s),n=Y(e);e!==n&&!t&&Ge(i,"get",e),!t&&Ge(i,"get",n);let{has:a}=hi(i),o=r?aa:t?ua:ir;if(a.call(i,e))return o(s.get(e));if(a.call(i,n))return o(s.get(n));s!==i&&s.get(e)}function ai(s,e=!1){let t=this.__v_raw,r=Y(t),i=Y(s);return s!==i&&!e&&Ge(r,"has",s),!e&&Ge(r,"has",i),s===i?t.has(s):t.has(s)||t.has(i)}function oi(s,e=!1){return s=s.__v_raw,!e&&Ge(Y(s),"iterate",Vt),Reflect.get(s,"size",s)}function Yc(s){s=Y(s);let e=Y(this);return hi(e).has.call(e,s)||(e.add(s),At(e,"add",s,s)),this}function Qc(s,e){e=Y(e);let t=Y(this),{has:r,get:i}=hi(t),n=r.call(t,s);n?process.env.NODE_ENV!=="production"&&cl(t,r,s):(s=Y(s),n=r.call(t,s));let a=i.call(t,s);return t.set(s,e),n?ii(e,a)&&At(t,"set",s,e,a):At(t,"add",s,e),this}function Zc(s){let e=Y(this),{has:t,get:r}=hi(e),i=t.call(e,s);i?process.env.NODE_ENV!=="production"&&cl(e,t,s):(s=Y(s),i=t.call(e,s));let n=r?r.call(e,s):void 0,a=e.delete(s);return i&&At(e,"delete",s,void 0,n),a}function el(){let s=Y(this),e=s.size!==0,t=process.env.NODE_ENV!=="production"?Ps(s)?new Map(s):new Set(s):void 0,r=s.clear();return e&&At(s,"clear",void 0,void 0,t),r}function ci(s,e){return function(r,i){let n=this,a=n.__v_raw,o=Y(a),c=e?aa:s?ua:ir;return!s&&Ge(o,"iterate",Vt),a.forEach((l,u)=>r.call(i,c(l),c(u),n))}}function li(s,e,t){return function(...r){let i=this.__v_raw,n=Y(i),a=Ps(n),o=s==="entries"||s===Symbol.iterator&&a,c=s==="keys"&&a,l=i[s](...r),u=t?aa:e?ua:ir;return!e&&Ge(n,"iterate",c?ea:Vt),{next(){let{value:h,done:p}=l.next();return p?{value:h,done:p}:{value:o?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function wt(s){return function(...e){if(process.env.NODE_ENV!=="production"){let t=e[0]?`on key "${e[0]}" `:"";console.warn(`${Yn(s)} operation ${t}failed: target is readonly.`,Y(this))}return s==="delete"?!1:this}}function Eg(){let s={get(n){return ni(this,n)},get size(){return oi(this)},has:ai,add:Yc,set:Qc,delete:Zc,clear:el,forEach:ci(!1,!1)},e={get(n){return ni(this,n,!1,!0)},get size(){return oi(this)},has:ai,add:Yc,set:Qc,delete:Zc,clear:el,forEach:ci(!1,!0)},t={get(n){return ni(this,n,!0)},get size(){return oi(this,!0)},has(n){return ai.call(this,n,!0)},add:wt("add"),set:wt("set"),delete:wt("delete"),clear:wt("clear"),forEach:ci(!0,!1)},r={get(n){return ni(this,n,!0,!0)},get size(){return oi(this,!0)},has(n){return ai.call(this,n,!0)},add:wt("add"),set:wt("set"),delete:wt("delete"),clear:wt("clear"),forEach:ci(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=li(n,!1,!1),t[n]=li(n,!0,!1),e[n]=li(n,!1,!0),r[n]=li(n,!0,!0)}),[s,t,e,r]}var[wg,Sg,vg,Ag]=Eg();function oa(s,e){let t=e?s?Ag:vg:s?Sg:wg;return(r,i,n)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?r:Reflect.get(er(t,i)&&i in r?t:r,i,n)}var Cg={get:oa(!1,!1)},Ng={get:oa(!1,!0)},Ig={get:oa(!0,!1)};function cl(s,e,t){let r=Y(t);if(r!==t&&e.call(s,r)){let i=Jn(s);console.warn(`Reactive ${i} contains both the raw and reactive versions of the same object${i==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ll=new WeakMap,ul=new WeakMap,hl=new WeakMap,kg=new WeakMap;function Lg(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Og(s){return s.__v_skip||!Object.isExtensible(s)?0:Lg(Jn(s))}function pi(s){return sa(s)?s:la(s,!1,ol,Cg,ll)}function ca(s){return la(s,!1,bg,Ng,ul)}function pl(s){return la(s,!0,Tg,Ig,hl)}function la(s,e,t,r,i){if(!tr(s))return process.env.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(s)}`),s;if(s.__v_raw&&!(e&&s.__v_isReactive))return s;let n=i.get(s);if(n)return n;let a=Og(s);if(a===0)return s;let o=new Proxy(s,a===2?r:t);return i.set(s,o),o}function sa(s){return!!(s&&s.__v_isReadonly)}function _g(s){return!!(s&&s.__v_isShallow)}function Y(s){let e=s&&s.__v_raw;return e?Y(e):s}var ir=s=>tr(s)?pi(s):s,ua=s=>tr(s)?pl(s):s;function fl(s){St&&ve&&(s=Y(s),process.env.NODE_ENV!=="production"?ta(s.dep||(s.dep=rr()),{target:s,type:"get",key:"value"}):ta(s.dep||(s.dep=rr())))}function dl(s,e){s=Y(s),s.dep&&(process.env.NODE_ENV!=="production"?Ts(s.dep,{target:s,type:"set",key:"value",newValue:e}):Ts(s.dep))}function bs(s){return!!(s&&s.__v_isRef===!0)}function ws(s){return yl(s,!1)}function ml(s){return yl(s,!0)}function yl(s,e){return bs(s)?s:new ra(s,e)}var ra=class{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Y(e),this._value=t?e:ir(e)}get value(){return fl(this),this._value}set value(e){e=this.__v_isShallow?e:Y(e),ii(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:ir(e),dl(this,e))}};var ia=class{constructor(e,t,r,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ui(e,()=>{this._dirty||(this._dirty=!0,dl(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){let e=Y(this);return fl(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}};function gl(s,e,t=!1){let r,i,n=Gc(s);n?(r=s,i=process.env.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:zc):(r=s.get,i=s.set);let a=new ia(r,i,n||!i,t);return process.env.NODE_ENV!=="production"&&e&&!t&&(a.effect.onTrack=e.onTrack,a.effect.onTrigger=e.onTrigger),a}var Dg;Dg="__v_isReadonly";d();d();var at=ne(require("vscode")),Df=ne(fh());d();var Re=require("fs"),_s=ne(ja());d();var Sr=require("child_process"),Fe=ne(require("path")),Gi=ne(Wa()),ss=ne(ja());d();var qi="en",Vi=!1,Ga=!1,Wi=!1,ob=!1,cb=!1,lb=!1,ub=!1,hb=!1,ji,Va=qi,pb,es,ts=typeof self=="object"?self:typeof global=="object"?global:{},me;typeof ts.vscode<"u"&&typeof ts.vscode.process<"u"?me=ts.vscode.process:typeof process<"u"&&(me=process);var vf,Af=typeof((vf=me==null?void 0:me.versions)==null?void 0:vf.electron)=="string",Cf=Af&&(me==null?void 0:me.type)==="renderer",xA=Cf&&(me==null?void 0:me.sandboxed);if(typeof navigator=="object"&&!Cf)es=navigator.userAgent,Vi=es.includes("Windows"),Ga=es.includes("Macintosh"),hb=(es.includes("Macintosh")||es.includes("iPad")||es.includes("iPhone"))&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Wi=es.includes("Linux"),lb=!0,ji=navigator.language,Va=ji;else if(typeof me=="object"){Vi=me.platform==="win32",Ga=me.platform==="darwin",Wi=me.platform==="linux",ob=Wi&&!!me.env.SNAP&&!!me.env.SNAP_REVISION,ub=Af,ji=qi,Va=qi;let s=me.env.VSCODE_NLS_CONFIG;if(s)try{let e=JSON.parse(s),t=e.availableLanguages["*"];ji=e.locale,Va=t||qi,pb=e._translationsConfigFile}catch{}cb=!0}else console.error("Unable to resolve platform.");var za=0;Ga?za=1:Vi?za=3:Wi&&(za=2);var zi=Vi;var PA=(()=>{if(typeof ts.postMessage=="function"&&!ts.importScripts){let s=[];ts.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let r=0,i=s.length;r<i;r++){let n=s[r];if(n.id===t.data.vscodeScheduleAsyncWork){s.splice(r,1),n.callback();return}}});let e=0;return t=>{let r=++e;s.push({id:r,callback:t}),ts.postMessage({vscodeScheduleAsyncWork:r},"*")}}return s=>setTimeout(s)})();function vr(s){let e=Fe.resolve(s,"node_modules");if(!(0,ss.existsSync)(e))return;if((0,ss.existsSync)(Fe.resolve(e,"vitest","vitest.mjs")))return nt(Fe.resolve(e,"vitest","vitest.mjs"),!1);let t=[".js","",".cmd"];for(let r of t)if((0,ss.existsSync)(Fe.resolve(e,".bin",`vitest${r}`)))return nt(Fe.resolve(e,".bin",`vitest${r}`),!1)}function Dt(s){if(!s||s.length<5)return;let e=Fe.resolve(s,"node_modules");try{if(!(0,ss.existsSync)(e))return Dt(Fe.dirname(s));let t=[""];zi&&t.unshift(".cmd",".CMD");for(let r of t)if((0,ss.existsSync)(Fe.resolve(e,".bin",`vitest${r}`)))return{cmd:Fe.resolve(e,".bin",`vitest${r}`),args:[]};return(0,ss.existsSync)(Fe.resolve(e,"vitest","vitest.mjs"))?{cmd:"node",args:[nt(Fe.resolve(e,"vitest","vitest.mjs"),!1)]}:Dt(Fe.dirname(s))}catch(t){console.error(t)}}async function If(s,e){let t;s==null?t=(0,Sr.spawn)("npx",["vitest","-v"],{stdio:["ignore","pipe","pipe"],env:k(k({},process.env),e)}):t=(0,Sr.spawn)(s.cmd,[...s.args,"-v"],{stdio:["ignore","pipe","pipe"],env:k(k({},process.env),e)});for await(let r of(0,Gi.chunksToLinesAsync)(t.stdout))return t.kill(),r.match(/vitest\/(\d+.\d+.\d+)/)[1];throw new Error(`Cannot get vitest version from "${JSON.stringify(s)}"`)}function kf(s){let e=(0,Sr.spawn)("node",{env:k(k({},process.env),s)});return new Promise(t=>{e.on("error",()=>t(!1)),setTimeout(()=>{t(!0),e.kill()},1e3)})}var fb=s=>s.match(/^[a-zA-Z]:/)?s.slice(2):s,Nf=s=>s.replace(/\\/g,"/");function nt(s,e){return zi?Nf(e?fb(s):s):s}function rs(s){return s.replace(/\u001B\[\d+m/g,"")}function Hi(s,e,t={},r,i){let n=(0,Sr.spawn)(s,e,k({stdio:["ignore","pipe","pipe"],shell:zi,detached:process.platform!=="win32"},t)),a=Promise.allSettled([(async()=>{for await(let o of(0,Gi.chunksToLinesAsync)(n.stdout))r&&r(o)})(),(async()=>{for await(let o of(0,Gi.chunksToLinesAsync)(n.stderr))i&&i(o)})()]);return{child:n,promise:a}}var ke=require("path");async function Ki(s){if(typeof s!="string")return Ki(s.uri.fsPath);if(vr(s))return!0;if(!(0,Re.existsSync)(ke.join(s,"package.json")))return!1;let e=ke.join(s,"package.json"),t=JSON.parse(await(0,_s.readFile)(e,"utf-8"));if((0,Re.existsSync)(t)&&(t.devDependencies&&t.devDependencies.vitest||t.dependencies&&t.dependencies.vitest)||(0,Re.existsSync)(ke.join(s,"vitest.config.js"))||(0,Re.existsSync)(ke.join(s,"vitest.config.ts")))return!0;if((0,Re.existsSync)(ke.join(s,"packages"))){let r=await(0,_s.readdir)(ke.join(s,"packages"));for(let i of r)if(await Ki(i))return!0}return!1}async function Xi(s){if(typeof s!="string")return Xi(s.uri.fsPath);if(vr(s))return!0;if(!(0,Re.existsSync)(ke.join(s,"package.json")))return!1;let e=ke.join(s,"package.json"),t=JSON.parse(await(0,_s.readFile)(e,"utf-8"));if((0,Re.existsSync)(t)){if(t.devDependencies&&t.devDependencies.vitest||t.dependencies&&t.dependencies.vitest)return!0;if(t.devDependencies&&t.devDependencies.jest)return!1}if((0,Re.existsSync)(ke.join(s,"vite.config.js"))||(0,Re.existsSync)(ke.join(s,"vite.config.ts"))||(0,Re.existsSync)(ke.join(s,"vitest.config.js"))||(0,Re.existsSync)(ke.join(s,"vitest.config.ts")))return!0;if((0,Re.existsSync)(ke.join(s,"jest.config.js")))return!1;if((0,Re.existsSync)(ke.join(s,"packages"))){let r=await(0,_s.readdir)(ke.join(s,"packages"));for(let i of r)if(await Xi(i))return!0}return!1}d();var Of=require("vscode"),Lf=Of.window.createOutputChannel("Vitest"),D={info:(...s)=>{console.log(...s);let e=new Date().toLocaleTimeString();Lf.appendLine(`[INFO ${e}] ${s.join(" ")}`)},error:(...s)=>{console.error(...s);let e=new Date().toLocaleTimeString();for(let t=0;t<s.length;t++)if(s[t]instanceof Error){let r=s[t];s[t]=`[Error ${r.name}] ${r.message}
${r.stack}`}Lf.appendLine(`[Error ${e}] ${s.join(" ")}`)},workspaceInfo:(s,...e)=>{D.info(`[Workspace ${s}]`,...e)},workspaceError:(s,...e)=>{D.error(`[Workspace ${s}]`,...e)}};var Mf="zxch3n.vitest-explorer";function db(s,e,t,r){var i,n;return(n=(i=e.get(t))!=null?i:s.get(t))!=null?n:r}function le(s){let e;typeof s=="string"?e=at.Uri.from({scheme:"file",path:s}):e=s;let t=at.workspace.getConfiguration("vitest",e),r=at.workspace.getConfiguration("vitest"),i=(n,a)=>db(r,t,n,a);return{env:i("nodeEnv",null),commandLine:i("commandLine",void 0),include:i("include",[]),exclude:i("exclude",[]),enable:i("enable",!1)}}function Ds(){let s=at.workspace.getConfiguration("vitest");return{showFailMessages:s.get("showFailMessages",!1),changeBackgroundColor:s.get("changeBackgroundColor",!0),disabledWorkspaceFolders:s.get("disabledWorkspaceFolders",[])}}var is=[];async function Ff(){let s=is;if(s.splice(0,s.length),!(at.workspace.workspaceFolders==null||at.workspace.workspaceFolders.length===0))for(let e of at.workspace.workspaceFolders)(await Xi(e)||le(e).enable)&&!Ds().disabledWorkspaceFolders.includes(e.name)&&s.push(e)}async function Rf(){return await Promise.all(is.map(async s=>{let e=Dt(s.uri.fsPath),t=le(s).enable||await Ki(s)||!!e,r=e==null?void 0:await If(e,le(s).env||void 0).catch(async a=>{D.info(a.toString()),D.info(`process.env.PATH = ${process.env.PATH}`),D.info(`vitest.nodeEnv = ${JSON.stringify(le(s).env)}`);let o=a.toString();kf(le(s).env||void 0)||(D.info("Cannot spawn node process"),o+='Cannot spawn node process. Please try setting vitest.nodeEnv as {"PATH": "/path/to/node"} in your settings.'),D.error(o)}),i=Ds().disabledWorkspaceFolders;return e?{workspace:s,version:r,isUsingVitestForSure:t,cmd:e.cmd,args:e.args,isCompatible:_f({version:r,workspace:s}),isDisabled:i.includes(s.name)}:{version:r,workspace:s,isUsingVitestForSure:t,cmd:"npx",args:["vitest"],isCompatible:_f({version:r,workspace:s}),isDisabled:i.includes(s.name)}}))}function _f(s){return!!(s.version&&Df.default.gte(s.version,"0.12.0")||le(s.workspace).commandLine)}d();var ds=ne(require("path")),he=ne(require("vscode")),Zo=ne(Qa());d();d();var Gd=require("fs"),Hd=ne(zd());d();var yn=class{constructor(e,t,r,i){this.start={column:t,line:e},this.end={column:i,line:r}}},us={describe:"describe",expect:"expect",it:"it",root:"root"},Br=class{constructor(e,t){this.type=e,this.file=t}addChild(e){let t;switch(e){case us.describe:t=new Pn(this.file);break;case us.it:t=new xn(this.file);break;case us.expect:t=new gn(this.file);break;default:throw new TypeError(`unexpected child node type: ${e}`)}return this.children?this.children.push(t):this.children=[t],t}filter(e,t=!1){let r=[],i=(n,a)=>{a&&e(n)&&r.push(n),n.children&&n.children.forEach(o=>i(o,!0))};return i(this,t),r}},gn=class extends Br{constructor(e){super(us.expect,e)}},hs=class extends Br{constructor(t,r,i){super(t,r);i&&(this.name=i)}},xn=class extends hs{constructor(e,t){super(us.it,e,t)}},Pn=class extends hs{constructor(e,t){super(us.describe,e,t)}},Tn=class{constructor(e){this.file=e,this.root=new Br(us.root,e),this.describeBlocks=[],this.expects=[],this.itBlocks=[]}addNode(e,t=!1){if(e instanceof Pn)this.describeBlocks.push(e);else if(e instanceof xn)this.itBlocks.push(e);else if(e instanceof gn){if(t&&this.expects.some(r=>{var i,n,a,o;return((i=r.start)==null?void 0:i.line)===((n=e.start)==null?void 0:n.line)&&((a=r.start)==null?void 0:a.column)===((o=e.start)==null?void 0:o.column)}))return;this.expects.push(e)}else throw new TypeError(`unexpected node class '${typeof e}': ${JSON.stringify(e)}`)}};d();var Ko=["asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","estree","exportDefaultFrom","exportNamespaceFrom","functionBind","functionSent","importMeta","logicalAssignment","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","partialApplication","throwExpressions","topLevelAwait",["pipelineOperator",{proposal:"smart"}]],dw=[...Ko,["decorators",{decoratorsBeforeExport:!0}],"flow","jsx"],mw=[...Ko,"decorators-legacy","typescript"],yw=[...Ko,"decorators-legacy","typescript","jsx"],Xo=(s,e=!1)=>{if(s.match(/\.ts$/i))return{plugins:[...mw]};if(s.match(/\.tsx$/i))return{plugins:[...yw]};if(!e||s.match(/\.m?jsx?$/i))return{plugins:[...dw]};throw new TypeError(`unable to find parser options for unrecognized file extension: ${s}`)};var gw=(s,e,t)=>{let r=e||(0,Gd.readFileSync)(s).toString(),i=Se(k({},t),{sourceType:"module"});return[Hd.parse(r,i),r]};var Kd=(s,e,t)=>{let r=new Tn(s),[i,n]=gw(s,e,t),a=(x,...S)=>S.reduce((A,C)=>{for(;A[C];)A=A[C];return A},x),o=(x,S,A)=>{let C=S.expression.arguments[0],j=C.value;if(!j)switch(C.type){case"TemplateLiteral":j=n.substring(C.start+1,C.end-1);break;default:j=n.substring(C.start,C.end);break}x.name=j,x.nameType=C.type,x.lastProperty=A,x.nameRange=new yn(C.loc.start.line,C.loc.start.column+2,C.loc.end.line,C.loc.end.column-1)},c=(x,S,A)=>{x.start=S.loc.start,x.end=S.loc.end,x.start.column+=1,r.addNode(x),x instanceof hs&&o(x,S,A)},l=x=>x&&x.type==="ExpressionStatement"&&x.expression&&x.expression.type==="CallExpression",u=x=>x==="ArrowFunctionExpression"||x==="FunctionExpression",h=x=>{var S,A;if(l(x)&&x.expression.callee){let C=a(x.expression,"callee"),j=((S=C.property)==null?void 0:S.name)||((A=a(C,"tag").property)==null?void 0:A.name);return[C.name||a(C,"object").name||a(C,"tag","object").name||a(C,"object","callee","object").name,j]}return[]},p=x=>x==="it"||x==="fit"||x==="test",f=x=>x==="describe",y=x=>{if(!l(x))return!1;let S="",A=x&&x.expression?x.expression.callee:void 0;for(;!S&&A;)S=A.name,A=A.object||A.callee;return S==="expect"},g=(x,S,A,C)=>{let j=S.addChild(x);return c(j,A,C),j instanceof hs&&j.name==null&&console.warn(`block is missing name: ${JSON.stringify(A)}`),j},b=(x,S)=>{let A;!x.body||!Array.isArray(x.body)||x.body.forEach(C=>{var X;A=void 0;let[j,z]=h(C);f(j)?A=g("describe",S,C,z):p(j)?A=g("it",S,C,z):y(C)?A=g("expect",S,C):C&&C.type==="VariableDeclaration"?C.declarations.filter(w=>w.init&&u(w.init.type)).forEach(w=>b(w.init.body,S)):C&&C.type==="ExpressionStatement"&&C.expression&&C.expression.type==="AssignmentExpression"&&C.expression.right&&u(C.expression.right.type)?b(C.expression.right.body,S):C.type==="ReturnStatement"&&((X=C.argument)==null?void 0:X.arguments)&&C.argument.arguments.filter(w=>u(w.type)).forEach(w=>b(w.body,S)),l(C)&&C.expression.arguments.filter(w=>u(w.type)).forEach(w=>b(w.body,A||S))})},{program:T}=i;return b(T,r.root),r};function Jo(s,e,t=!1){return Kd(s,e,Xo(s,t))}d();d();var Xd=require("util"),Jd=require("vscode"),Yo=ne(Qa());var xw=new Xd.TextDecoder("utf-8"),Yd=async s=>{try{let e=await Jd.workspace.fs.readFile(s);return xw.decode(e)}catch(e){return console.warn(`Error providing tests for ${s.fsPath}`,e),""}};function Qd(s){let{include:e,exclude:t}=le();return e.some(r=>(0,Yo.default)(s,r))&&t.every(r=>!(0,Yo.default)(s,r,{dot:!0}))}var je=new WeakMap,Gs=new WeakMap;function bn(s,e=[]){return s.children.size?s.children.forEach(t=>{bn(t,e)}):je.get(s)instanceof fs&&e.push(s),e}var ps=class{constructor(e,t,r,i){this.pattern=e;this.fileItem=t;this.item=r;this.parent=i;this.children=[]}getFullPattern(){return Zd(this)}getFilePath(){return this.fileItem.uri.fsPath}},fs=class{constructor(e,t,r,i,n){this.pattern=e;this.fileItem=t;this.item=r;this.parent=i;this.index=n}getFullPattern(){return Zd(this)}getFilePath(){return this.fileItem.uri.fsPath}},gt=class{constructor(e){this.item=e;this.resolved=!1;this.pattern="";this.children=[]}async updateFromDisk(e){let t=this.item;try{let r=await Yd(t.uri);this.item.error=void 0,Qo(e,r,t,this),this.resolved=!0}catch(r){this.item.error=r.stack}}load(e){if(!this.resolved)return this.updateFromDisk(e)}getFullPattern(){return""}getFilePath(){return this.item.uri.fsPath}};function Zd(s){let e=[],t=s.parent;for(;t&&t instanceof ps;)e.push(t),t=t.parent;return e.reverse(),e.length?e.reduce((r,i)=>`${r+i.pattern} `,"")+s.pattern:s.pattern}var En=class extends he.Disposable{constructor(){var t;super(()=>{for(let r of this.lastWatches)r.dispose();this.lastWatches=[],this.workspaceItems.clear(),this.pathToFileItem.clear(),this.workspaceCommonPrefix.clear()});this.lastWatches=[];this.workspacePaths=[];this.workspaceCommonPrefix=new Map;this.workspaceItems=new Map;this.pathToFileItem=new Map;this.workspacePaths=((t=he.workspace.workspaceFolders)==null?void 0:t.map(r=>r.uri.fsPath))||[]}async watchAllTestFilesInWorkspace(t){for(let i of this.lastWatches)i.dispose();if(!is)return[];let r=[];return await Promise.all(is.map(async i=>{let n=le(i).exclude;for(let a of le(i).include){let o=new he.RelativePattern(i.uri,a),c=i.uri.fsPath,l=he.workspace.createFileSystemWatcher(o),u=h=>n.every(p=>!(0,Zo.default)(ds.default.relative(c,h.fsPath),p,{dot:!0}));l.onDidCreate(h=>u(h)&&this.getOrCreateFile(t,h)),l.onDidChange(h=>{if(!u(h))return;let{data:p}=this.getOrCreateFile(t,h);!p.resolved||p.updateFromDisk(t)}),l.onDidDelete(h=>t.items.delete(h.toString()));for(let h of await he.workspace.findFiles(o))u(h)&&this.getOrCreateFile(t,h).data.updateFromDisk(t);r.push(l)}return r})),this.lastWatches=r.concat(),r}async discoverAllTestFilesInWorkspace(t){!he.workspace.workspaceFolders||await Promise.all(he.workspace.workspaceFolders.map(async r=>{let i=le(r).exclude;for(let n of le(r).include){let a=new he.RelativePattern(r.uri,n),o=c=>i.every(l=>!(0,Zo.default)(c.fsPath,l,{dot:!0}));for(let c of await he.workspace.findFiles(a))o(c)&&this.getOrCreateFile(t,c).data.updateFromDisk(t)}}))}discoverTestFromDoc(t,r){if(r.uri.scheme!=="file"||!Qd(r.uri.fsPath))return;let{file:i,data:n}=this.getOrCreateFile(t,r.uri);Qo(t,r.getText(),i,n)}discoverTestFromPath(t,r,i=!1){let{data:n}=this.getOrCreateFile(t,he.Uri.file(r));return(!n.resolved||i)&&n.updateFromDisk(t),n}getOrCreateFile(t,r){let i=t.items.get(r.toString());if(i)return{file:i,data:je.get(i)};let n=this.workspacePaths.find(l=>r.fsPath.startsWith(l)),a;if(n){if(!this.workspaceCommonPrefix.has(n)){let u=r.fsPath.split(ds.sep);this.workspaceCommonPrefix.set(n,u.slice(0,-1).join(ds.sep)+ds.sep),this.workspaceItems.set(n,new Set)}let l=this.workspaceCommonPrefix.get(n);if(!r.fsPath.startsWith(l)){let u=r.fsPath;for(let p=0;p<l.length;p++)if(u[p]!==l[p]){l=l.slice(0,p);break}this.workspaceCommonPrefix.set(n,l),this.workspaceItems.get(n).forEach(p=>{p.label=p.uri.fsPath.substring(l.length)})}a=r.fsPath.substring(l.length)}else a=r.fsPath.split(ds.sep).pop();let o=t.createTestItem(r.toString(),a,r);n&&this.workspaceItems.get(n).add(o),t.items.add(o);let c=new gt(o);return je.set(o,c),this.pathToFileItem.set(r.fsPath,c),o.canResolveChildren=!0,{file:o,data:c}}};function Qo(s,e,t,r){Gs.get(s)==null&&Gs.set(s,new Map);let i=Gs.get(s);i.set(t.id,t);let n=[{item:t,block:void 0,children:[],dataChildren:[],data:r}];function a(h){let p=n[n.length-1];if(p.block==null)return p;for(;p.block&&h.start.line>=p.block.end.line;){let f=n.pop();f&&(f.item.children.replace(f.children),f.data.children=[...f.dataChildren]),p=n[n.length-1]}return p}let o;try{o=Jo(t.id,e)}catch{D.error("parse error");return}let c=[...o.describeBlocks,...o.itBlocks];c.sort((h,p)=>{var f,y;return(((f=h.start)==null?void 0:f.line)||0)-(((y=p.start)==null?void 0:y.line)||0)});let l=0,u=0;for(let h of c){let p=a(h),f=n.slice(1).map(b=>{var T;return((T=b.block)==null?void 0:T.name)||""}).concat([h.name]).join(" ").trim(),y=`${t.uri}/${f}@${u++}`,g=s.createTestItem(y,h.name,t.uri);if(i.set(y,g),g.range=new he.Range(new he.Position(h.start.line-1,h.start.column),new he.Position(h.end.line-1,h.end.column)),p.children.push(g),h.type==="describe"){let b=new ps(h.name,t,g,p.data);p.dataChildren.push(b),je.set(g,b),n.push({item:g,block:h,children:[],data:b,dataChildren:[]})}else if(h.type==="it"){let b=new fs(h.name,t,g,p.data,l++);p.dataChildren.push(b),je.set(g,b)}else throw new Error("unexpected block type")}for(;n.length;){let h=n.pop();h&&(h.item.children.replace(h.children),h.data.children=[...h.dataChildren])}}d();var zn=require("path"),ce=ne(require("vscode"));d();var Ty=require("child_process"),by=ne(Wa());d();d();var sm=ne(require("net"),1),rm=ne(require("os"),1),Sn=class extends Error{constructor(e){super(`${e} is locked`)}},Hs={old:new Set,young:new Set},Pw=1e3*15;var wn,Tw=()=>{let s=rm.default.networkInterfaces(),e=new Set([void 0,"0.0.0.0"]);for(let t of Object.values(s))for(let r of t)e.add(r.address);return e},em=s=>new Promise((e,t)=>{let r=sm.default.createServer();r.unref(),r.on("error",t),r.listen(s,()=>{let{port:i}=r.address();r.close(()=>{e(i)})})}),tm=async(s,e)=>{if(s.host||s.port===0)return em(s);for(let t of e)try{await em({port:s.port,host:t})}catch(r){if(!["EADDRNOTAVAIL","EINVAL"].includes(r.code))throw r}return s.port},bw=function*(s){s&&(yield*s),yield 0};async function $r(s){let e,t=new Set;if(s&&(s.port&&(e=typeof s.port=="number"?[s.port]:s.port),s.exclude)){let i=s.exclude;if(typeof i[Symbol.iterator]!="function")throw new TypeError("The `exclude` option must be an iterable.");for(let n of i){if(typeof n!="number")throw new TypeError("Each item in the `exclude` option must be a number corresponding to the port you want excluded.");if(!Number.isSafeInteger(n))throw new TypeError(`Number ${n} in the exclude option is not a safe integer and can't be used`)}t=new Set(i)}wn===void 0&&(wn=setInterval(()=>{Hs.old=Hs.young,Hs.young=new Set},Pw),wn.unref&&wn.unref());let r=Tw();for(let i of bw(e))try{if(t.has(i))continue;let n=await tm(Se(k({},s),{port:i}),r);for(;Hs.old.has(n)||Hs.young.has(n);){if(i!==0)throw new Sn(i);n=await tm(Se(k({},s),{port:i}),r)}return Hs.young.add(n),n}catch(n){if(!["EADDRINUSE","EACCES"].includes(n.code)&&!(n instanceof Sn))throw n}throw new Error("No available ports found")}d();d();var CS=ne(om(),1),NS=ne(cc(),1),IS=ne(lc(),1),ly=ne(yc(),1),kS=ne(cy(),1);var Pc=ly.default;d();d();function uy(s,e){let{post:t,on:r,eventNames:i=[],serialize:n=u=>u,deserialize:a=u=>u,timeout:o=6e4}=e,c=new Map,l=new Proxy({},{get(u,h){let p=(...y)=>{t(n({m:h,a:y,t:"q"}))};if(i.includes(h))return p.asEvent=p,p;let f=(...y)=>new Promise((g,b)=>{let T=OS();c.set(T,{resolve:g,reject:b}),t(n({m:h,a:y,i:T,t:"q"})),o>=0&&setTimeout(()=>{b(new Error(`[birpc] timeout on calling "${h}"`)),c.delete(T)},o)});return f.asEvent=p,f}});return r(async(u,...h)=>{let p=a(u);if(p.t==="q"){let{m:f,a:y}=p,g,b;try{g=await s[f].apply(l,y)}catch(T){b=T}p.i&&t(n({t:"s",i:p.i,r:g,e:b}),...h)}else{let{i:f,r:y,e:g}=p,b=c.get(f);g?b==null||b.reject(g):b==null||b.resolve(y),c.delete(f)}}),l}var LS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";function OS(s=21){let e="",t=s;for(;t--;)e+=LS[Math.random()*64|0];return e}d();var{parse:_S,stringify:DS}=JSON,{keys:MS}=Object,Xr=String,fy="string",hy={},_n="object",dy=(s,e)=>e,FS=s=>s instanceof Xr?Xr(s):s,RS=(s,e)=>typeof e===fy?new Xr(e):e,my=(s,e,t,r)=>{let i=[];for(let n=MS(t),{length:a}=n,o=0;o<a;o++){let c=n[o],l=t[c];if(l instanceof Xr){let u=s[l];typeof u===_n&&!e.has(u)?(e.add(u),t[c]=hy,i.push({k:c,a:[s,e,u,r]})):t[c]=r.call(t,c,u)}else t[c]!==hy&&(t[c]=r.call(t,c,l))}for(let{length:n}=i,a=0;a<n;a++){let{k:o,a:c}=i[a];t[o]=r.call(t,o,my.apply(null,c))}return t},py=(s,e,t)=>{let r=Xr(e.push(t)-1);return s.set(t,r),r},yy=(s,e)=>{let t=_S(s,RS).map(FS),r=t[0],i=e||dy,n=typeof r===_n&&r?my(t,new Set,r,i):r;return i.call({"":n},"",n)},gy=(s,e,t)=>{let r=e&&typeof e===_n?(u,h)=>u===""||-1<e.indexOf(u)?h:void 0:e||dy,i=new Map,n=[],a=[],o=+py(i,n,r.call({"":s},"",s)),c=!o;for(;o<n.length;)c=!0,a[o]=DS(n[o++],l,t);return"["+a.join(",")+"]";function l(u,h){if(c)return c=!c,h;let p=r.call(this,u,h);switch(typeof p){case _n:if(p===null)return p;case fy:return i.get(p)||py(i,n,p)}return p}};var Tc=class{constructor(){this.filesMap=new Map;this.idMap=new Map;this.taskFileMap=new WeakMap;this.errorsSet=new Set}catchError(e,t){e.type=t,this.errorsSet.add(e)}clearErrors(){this.errorsSet.clear()}getUnhandledErrors(){return Array.from(this.errorsSet.values())}getFiles(e){return e?e.map(t=>this.filesMap.get(t)):Array.from(this.filesMap.values())}getFilepaths(){return Array.from(this.filesMap.keys())}getFailedFilepaths(){return this.getFiles().filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="fail"}).map(e=>e.filepath)}collectFiles(e=[]){e.forEach(t=>{this.filesMap.set(t.filepath,t),this.updateId(t)})}updateId(e){this.idMap.get(e.id)!==e&&(this.idMap.set(e.id,e),e.type==="suite"&&e.tasks.forEach(t=>{this.updateId(t)}))}updateTasks(e){for(let[t,r]of e)this.idMap.has(t)&&(this.idMap.get(t).result=r)}updateUserLog(e){let t=e.taskId&&this.idMap.get(e.taskId);t&&(t.logs||(t.logs=[]),t.logs.push(e))}};function xy(s,e={}){let{handlers:t={},autoReconnect:r=!0,reconnectInterval:i=2e3,reconnectTries:n=10,reactive:a=T=>T,WebSocketConstructor:o=globalThis.WebSocket}=e,c=n,l=a({ws:ca(new o(s)),state:new Tc,waitForConnection:b,reconnect:()=>y(!0),dispose:()=>{c=0,l.ws.close()}});l.state.filesMap=a(l.state.filesMap),l.state.idMap=a(l.state.idMap);let u;l.rpc=uy({onCollected(T){var x;l.state.collectFiles(T),(x=t.onCollected)==null||x.call(t,T)},onTaskUpdate(T){var x;l.state.updateTasks(T),(x=t.onTaskUpdate)==null||x.call(t,T)},onUserConsoleLog(T){l.state.updateUserLog(T)},onFinished(T){var x;(x=t.onFinished)==null||x.call(t,T)}},{post:T=>l.ws.send(T),on:T=>u=T,serialize:gy,deserialize:yy});let h,p=new Promise(T=>{h=T}),f=!1;function y(T=!1){T&&(f=!1,c=n,p=new Promise(x=>{h=x})),!f&&(D.info("RECONNECT"),l.ws=ca(new o(s)),g())}function g(){l.ws.addEventListener("open",()=>{c=n,h()}),l.ws.addEventListener("message",T=>{u(T.data)}),l.ws.addEventListener("close",()=>{c-=1,!f&&r&&c>0&&setTimeout(y,i)})}g();function b(){return p}return l}globalThis.WebSocket=Pc;function Dn({port:s,url:e=`ws://localhost:${s}/__vitest_api__`,handlers:t,reconnectInterval:r,reconnectTries:i}){let n=xy(e,{handlers:t,WebSocketConstructor:Pc,reactive:pi,reconnectInterval:r,reconnectTries:i}),a=ml({}),o=ws("CONNECTING"),c=gl(()=>n.state.getFiles()),l=new WeakSet;Es(()=>{let h=n.ws;l.has(h)||(l.add(h),o.value="CONNECTING",h.addEventListener("open",()=>{D.info("WS Opened"),o.value="OPEN",n.state.filesMap.clear(),n.rpc.getFiles().then(p=>{var f;n.state.collectFiles(p),(f=t==null?void 0:t.onCollected)==null||f.call(t,p)}),n.rpc.getConfig().then(p=>a.value=p)}),h.addEventListener("error",p=>{console.error("WS ERROR",p)}),h.addEventListener("close",()=>{D.info("WS Close"),setTimeout(()=>{o.value==="CONNECTING"&&(o.value="CLOSED")},1e3)}))});let u=n.waitForConnection().then(async()=>{let h=await n.rpc.getFiles(),p=[],f=h.length===0;h&&y(h);function y(g){for(let b of g)b.type==="test"?b.result?p.push([b.id,b.result]):b.mode==="run"&&(f=!0):y(b.tasks)}return n.state.updateTasks(p),f});return{client:n,config:a,status:o,files:c,loadingPromise:u}}var bc=class{constructor(e,t,r={},i=!1,n){this.vitest=e;this.workspace=t;this.handlers=r;this.recordOutput=i;this.customStartProcess=n;this.started=!1;this.disposed=!1;this.output=[];if(this.handlers.log&&!this.handlers.onUserConsoleLog&&(this.handlers.onUserConsoleLog=({content:a})=>{var o,c;(c=(o=this.handlers).log)==null||c.call(o,a)}),this.handlers.onUpdate){let a=this.handlers.onTaskUpdate;this.handlers.onTaskUpdate=o=>{if(a&&a(o),!this.vitestState)return;let c=this.vitestState.client.state.idMap,l=new Set;for(let[u]of o){let h=c.get(u);!h||h.file&&l.add(h.file)}this.handlers.onUpdate&&this.handlers.onUpdate(Array.from(l))}}}async start(){if(this.started||this.disposed)return;this.started=!0;let e=await $r(),t=o=>{o=rs(o),D.info(o),this.handlers.log&&this.handlers.log(o)};D.info("Start api process at port",e),D.info("[RUN]",`${this.vitest.cmd} ${this.vitest.args.join(" ")}`);let r=nt(this.workspace,!1);D.info("[RUN.cwd]",r);let i=[],n,a=o=>{i.push(o),this.recordOutput&&this.output.push(o),clearTimeout(n),n=setTimeout(()=>{t(i.join(`\r
`)),i.length=0},200)};this.customStartProcess?this.customStartProcess({cmd:this.vitest.cmd,args:[...this.vitest.args,"--api.port",e.toString(),"--api.host","127.0.0.1"],cfg:{cwd:r,env:k(k({},process.env),le(this.workspace).env)},log:a,onProcessEnd:()=>{var o,c;D.info("API PROCESS EXIT"),(c=(o=this.handlers).onFinished)==null||c.call(o),this.dispose()},registerOnTestFinished:o=>{let c=this.handlers.onFinished;this.handlers.onFinished=(...l)=>{c==null||c(...l),o()}}}):this._start(a,e,r),setTimeout(()=>{this.vitestState=Dn({port:e,handlers:this.handlers,reconnectInterval:100,reconnectTries:10}),this.vitestState.loadingPromise.then(o=>{var c,l;if(!o){let u=this.vitestState.files.value;u&&((l=(c=this.handlers)==null?void 0:c.onFinished)==null||l.call(c,u))}})},50)}_start(e,t,r){this.process=Hi(this.vitest.cmd,[...this.vitest.args,"--api.port",t.toString(),"--api.host","127.0.0.1"],{cwd:r,env:k(k({},process.env),le(this.workspace).env)},e,e).child,this.process.on("error",i=>{D.error(`Process Error: ${i}`)}),this.process.on("exit",i=>{var n,a;if(i!==0){this.dispose(),D.error(`Process exited with code ${i}`);return}D.info("API PROCESS EXIT"),(a=(n=this.handlers).onFinished)==null||a.call(n),this.dispose()})}get client(){var e;return(e=this.vitestState)==null?void 0:e.client}dispose(){var e,t;this.disposed=!0,(e=this.vitestState)==null||e.client.dispose(),(t=this.process)==null||t.kill(),this.vitestState=void 0,this.process=void 0}};function Py(s,e,t,r){return D.info("[Execute Vitest]",s.cmd,s.args.join(" ")),new Promise(i=>{let n=new bc(s,e,Se(k({},t),{onFinished:a=>{D.info("Vitest api process finished");try{t.onFinished&&t.onFinished(a)}finally{n.dispose(),i(n.output.join(""))}}}),!0,r);n.start()})}var Qs=class{constructor(e,t){this.workspacePath=e;this.defaultVitestCommand=t}async scheduleRun(e,t,r={info:()=>{},error:console.error},i={},n=this.defaultVitestCommand?this.defaultVitestCommand:{cmd:"npx",args:["vitest"]},a=!1,o,c){let l=n.cmd,u=[...n.args,...e?e.map(T=>nt(T,!0)):[]];a&&u.push("--update"),t&&u.push("-t",t.replace(/[$^+?()[\]]/g,"\\$&"));let h=nt(this.workspacePath,!1),p=[],f=k(k({},process.env),i),y=[],g=await Py({cmd:nt(l,!1),args:u},this.workspacePath,{log:T=>{r.info(`${rs(T.trimEnd())}\r
`),p.push(rs(T))},onFinished:T=>{if(T==null){b();return}y=T},onCollected:T=>{T&&o&&o(T)},onUpdate:o},c);return{testResultFiles:y,output:g};async function b(){let T=`
Failed to get any result
( Vitest should be configured to be able to run from project root )

Error when running\r
    ${`${l} ${u.join(" ")}`}

cwd: ${h}\r
node: ${await BS()}\r
env.PATH: ${f.PATH}\r
`;r.error(T),r.error(p.join(`
`))}}};async function BS(){let s=(0,Ty.spawn)("node",["-v"],{stdio:["ignore","pipe","pipe"]});for await(let e of(0,by.chunksToLinesAsync)(s.stdout))return e}d();var My=ne(require("path"));d();var{parse:KC,stringify:XC}=JSON,{keys:JC}=Object;function $S(s){return s==null&&(s=[]),Array.isArray(s)?s:[s]}function Ec(s=[]){return $S(s).flatMap(e=>e.type==="test"?[e]:[e,...Ec(e.tasks)])}d();function bt(s){return Array.isArray?Array.isArray(s):Iy(s)==="[object Array]"}var US=1/0;function jS(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-US?"-0":e}function qS(s){return s==null?"":jS(s)}function et(s){return typeof s=="string"}function Cy(s){return typeof s=="number"}function WS(s){return s===!0||s===!1||VS(s)&&Iy(s)=="[object Boolean]"}function Ny(s){return typeof s=="object"}function VS(s){return Ny(s)&&s!==null}function qe(s){return s!=null}function wc(s){return!s.trim().length}function Iy(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}var zS="Incorrect 'index' type",GS=s=>`Invalid value for key ${s}`,HS=s=>`Pattern length exceeds max of ${s}.`,KS=s=>`Missing ${s} property in key`,XS=s=>`Property 'weight' in key '${s}' must be a positive integer`,Ey=Object.prototype.hasOwnProperty,Sc=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(r=>{let i=ky(r);t+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(r=>{r.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function ky(s){let e=null,t=null,r=null,i=1,n=null;if(et(s)||bt(s))r=s,e=wy(s),t=vc(s);else{if(!Ey.call(s,"name"))throw new Error(KS("name"));let a=s.name;if(r=a,Ey.call(s,"weight")&&(i=s.weight,i<=0))throw new Error(XS(a));e=wy(a),t=vc(a),n=s.getFn}return{path:e,id:t,weight:i,src:r,getFn:n}}function wy(s){return bt(s)?s:s.split(".")}function vc(s){return bt(s)?s.join("."):s}function JS(s,e){let t=[],r=!1,i=(n,a,o)=>{if(!!qe(n))if(!a[o])t.push(n);else{let c=a[o],l=n[c];if(!qe(l))return;if(o===a.length-1&&(et(l)||Cy(l)||WS(l)))t.push(qS(l));else if(bt(l)){r=!0;for(let u=0,h=l.length;u<h;u+=1)i(l[u],a,o+1)}else a.length&&i(l,a,o+1)}};return i(s,et(e)?e.split("."):e,0),r?t:t[0]}var YS={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},QS={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},ZS={location:0,threshold:.6,distance:100},ev={useExtendedSearch:!1,getFn:JS,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},M=k(k(k(k({},QS),YS),ZS),ev),tv=/[^ ]+/g;function sv(s=1,e=3){let t=new Map,r=Math.pow(10,e);return{get(i){let n=i.match(tv).length;if(t.has(n))return t.get(n);let a=1/Math.pow(n,.5*s),o=parseFloat(Math.round(a*r)/r);return t.set(n,o),o},clear(){t.clear()}}}var Jr=class{constructor({getFn:e=M.getFn,fieldNormWeight:t=M.fieldNormWeight}={}){this.norm=sv(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,r)=>{this._keysMap[t.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,et(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();et(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!qe(e)||wc(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((i,n)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!qe(a)){if(bt(a)){let o=[],c=[{nestedArrIndex:-1,value:a}];for(;c.length;){let{nestedArrIndex:l,value:u}=c.pop();if(!!qe(u))if(et(u)&&!wc(u)){let h={v:u,i:l,n:this.norm.get(u)};o.push(h)}else bt(u)&&u.forEach((h,p)=>{c.push({nestedArrIndex:p,value:h})})}r.$[n]=o}else if(et(a)&&!wc(a)){let o={v:a,n:this.norm.get(a)};r.$[n]=o}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Ly(s,e,{getFn:t=M.getFn,fieldNormWeight:r=M.fieldNormWeight}={}){let i=new Jr({getFn:t,fieldNormWeight:r});return i.setKeys(s.map(ky)),i.setSources(e),i.create(),i}function rv(s,{getFn:e=M.getFn,fieldNormWeight:t=M.fieldNormWeight}={}){let{keys:r,records:i}=s,n=new Jr({getFn:e,fieldNormWeight:t});return n.setKeys(r),n.setIndexRecords(i),n}function Mn(s,{errors:e=0,currentLocation:t=0,expectedLocation:r=0,distance:i=M.distance,ignoreLocation:n=M.ignoreLocation}={}){let a=e/s.length;if(n)return a;let o=Math.abs(r-t);return i?a+o/i:o?1:a}function iv(s=[],e=M.minMatchCharLength){let t=[],r=-1,i=-1,n=0;for(let a=s.length;n<a;n+=1){let o=s[n];o&&r===-1?r=n:!o&&r!==-1&&(i=n-1,i-r+1>=e&&t.push([r,i]),r=-1)}return s[n-1]&&n-r>=e&&t.push([r,n-1]),t}var gs=32;function nv(s,e,t,{location:r=M.location,distance:i=M.distance,threshold:n=M.threshold,findAllMatches:a=M.findAllMatches,minMatchCharLength:o=M.minMatchCharLength,includeMatches:c=M.includeMatches,ignoreLocation:l=M.ignoreLocation}={}){if(e.length>gs)throw new Error(HS(gs));let u=e.length,h=s.length,p=Math.max(0,Math.min(r,h)),f=n,y=p,g=o>1||c,b=g?Array(h):[],T;for(;(T=s.indexOf(e,y))>-1;){let z=Mn(e,{currentLocation:T,expectedLocation:p,distance:i,ignoreLocation:l});if(f=Math.min(z,f),y=T+u,g){let X=0;for(;X<u;)b[T+X]=1,X+=1}}y=-1;let x=[],S=1,A=u+h,C=1<<u-1;for(let z=0;z<u;z+=1){let X=0,w=A;for(;X<w;)Mn(e,{errors:z,currentLocation:p+w,expectedLocation:p,distance:i,ignoreLocation:l})<=f?X=w:A=w,w=Math.floor((A-X)/2+X);A=w;let F=Math.max(1,p-w+1),B=a?h:Math.min(p+w,h)+u,J=Array(B+2);J[B+1]=(1<<z)-1;for(let V=B;V>=F;V-=1){let G=V-1,Q=t[s.charAt(G)];if(g&&(b[G]=+!!Q),J[V]=(J[V+1]<<1|1)&Q,z&&(J[V]|=(x[V+1]|x[V])<<1|1|x[V+1]),J[V]&C&&(S=Mn(e,{errors:z,currentLocation:G,expectedLocation:p,distance:i,ignoreLocation:l}),S<=f)){if(f=S,y=G,y<=p)break;F=Math.max(1,2*p-y)}}if(Mn(e,{errors:z+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:l})>f)break;x=J}let j={isMatch:y>=0,score:Math.max(.001,S)};if(g){let z=iv(b,o);z.length?c&&(j.indices=z):j.isMatch=!1}return j}function av(s){let e={};for(let t=0,r=s.length;t<r;t+=1){let i=s.charAt(t);e[i]=(e[i]||0)|1<<r-t-1}return e}var Fn=class{constructor(e,{location:t=M.location,threshold:r=M.threshold,distance:i=M.distance,includeMatches:n=M.includeMatches,findAllMatches:a=M.findAllMatches,minMatchCharLength:o=M.minMatchCharLength,isCaseSensitive:c=M.isCaseSensitive,ignoreLocation:l=M.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;let u=(p,f)=>{this.chunks.push({pattern:p,alphabet:av(p),startIndex:f})},h=this.pattern.length;if(h>gs){let p=0,f=h%gs,y=h-f;for(;p<y;)u(this.pattern.substr(p,gs),p),p+=gs;if(f){let g=h-gs;u(this.pattern.substr(g),g)}}else u(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,includeMatches:r}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let y={isMatch:!0,score:0};return r&&(y.indices=[[0,e.length-1]]),y}let{location:i,distance:n,threshold:a,findAllMatches:o,minMatchCharLength:c,ignoreLocation:l}=this.options,u=[],h=0,p=!1;this.chunks.forEach(({pattern:y,alphabet:g,startIndex:b})=>{let{isMatch:T,score:x,indices:S}=nv(e,y,g,{location:i+b,distance:n,threshold:a,findAllMatches:o,minMatchCharLength:c,includeMatches:r,ignoreLocation:l});T&&(p=!0),h+=x,T&&S&&(u=[...u,...S])});let f={isMatch:p,score:p?h/this.chunks.length:1};return p&&r&&(f.indices=u),f}},tt=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Sy(e,this.multiRegex)}static isSingleMatch(e){return Sy(e,this.singleRegex)}search(){}};function Sy(s,e){let t=s.match(e);return t?t[1]:null}var Ac=class extends tt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Cc=class extends tt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}},Nc=class extends tt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Ic=class extends tt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},kc=class extends tt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Lc=class extends tt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Rn=class extends tt{constructor(e,{location:t=M.location,threshold:r=M.threshold,distance:i=M.distance,includeMatches:n=M.includeMatches,findAllMatches:a=M.findAllMatches,minMatchCharLength:o=M.minMatchCharLength,isCaseSensitive:c=M.isCaseSensitive,ignoreLocation:l=M.ignoreLocation}={}){super(e),this._bitapSearch=new Fn(e,{location:t,threshold:r,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},Bn=class extends tt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,r,i=[],n=this.pattern.length;for(;(r=e.indexOf(this.pattern,t))>-1;)t=r+n,i.push([r,t-1]);let a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}},Oc=[Ac,Bn,Nc,Ic,Lc,kc,Cc,Rn],vy=Oc.length,ov=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,cv="|";function lv(s,e={}){return s.split(cv).map(t=>{let r=t.trim().split(ov).filter(n=>n&&!!n.trim()),i=[];for(let n=0,a=r.length;n<a;n+=1){let o=r[n],c=!1,l=-1;for(;!c&&++l<vy;){let u=Oc[l],h=u.isMultiMatch(o);h&&(i.push(new u(h,e)),c=!0)}if(!c)for(l=-1;++l<vy;){let u=Oc[l],h=u.isSingleMatch(o);if(h){i.push(new u(h,e));break}}}return i})}var uv=new Set([Rn.type,Bn.type]),_c=class{constructor(e,{isCaseSensitive:t=M.isCaseSensitive,includeMatches:r=M.includeMatches,minMatchCharLength:i=M.minMatchCharLength,ignoreLocation:n=M.ignoreLocation,findAllMatches:a=M.findAllMatches,location:o=M.location,threshold:c=M.threshold,distance:l=M.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:r,minMatchCharLength:i,findAllMatches:a,ignoreLocation:n,location:o,threshold:c,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=lv(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let n=0,a=[],o=0;for(let c=0,l=t.length;c<l;c+=1){let u=t[c];a.length=0,n=0;for(let h=0,p=u.length;h<p;h+=1){let f=u[h],{isMatch:y,indices:g,score:b}=f.search(e);if(y){if(n+=1,o+=b,r){let T=f.constructor.type;uv.has(T)?a=[...a,...g]:a.push(g)}}else{o=0,n=0,a.length=0;break}}if(n){let h={isMatch:!0,score:o/n};return r&&(h.indices=a),h}}return{isMatch:!1,score:1}}},Dc=[];function hv(...s){Dc.push(...s)}function Mc(s,e){for(let t=0,r=Dc.length;t<r;t+=1){let i=Dc[t];if(i.condition(s,e))return new i(s,e)}return new Fn(s,e)}var $n={AND:"$and",OR:"$or"},Fc={PATH:"$path",PATTERN:"$val"},Rc=s=>!!(s[$n.AND]||s[$n.OR]),pv=s=>!!s[Fc.PATH],fv=s=>!bt(s)&&Ny(s)&&!Rc(s),Ay=s=>({[$n.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function Oy(s,e,{auto:t=!0}={}){let r=i=>{let n=Object.keys(i),a=pv(i);if(!a&&n.length>1&&!Rc(i))return r(Ay(i));if(fv(i)){let c=a?i[Fc.PATH]:n[0],l=a?i[Fc.PATTERN]:i[c];if(!et(l))throw new Error(GS(c));let u={keyId:vc(c),pattern:l};return t&&(u.searcher=Mc(l,e)),u}let o={children:[],operator:n[0]};return n.forEach(c=>{let l=i[c];bt(l)&&l.forEach(u=>{o.children.push(r(u))})}),o};return Rc(s)||(s=Ay(s)),r(s)}function dv(s,{ignoreFieldNorm:e=M.ignoreFieldNorm}){s.forEach(t=>{let r=1;t.matches.forEach(({key:i,norm:n,score:a})=>{let o=i?i.weight:null;r*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(e?1:n))}),t.score=r})}function mv(s,e){let t=s.matches;e.matches=[],qe(t)&&t.forEach(r=>{if(!qe(r.indices)||!r.indices.length)return;let{indices:i,value:n}=r,a={indices:i,value:n};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function yv(s,e){e.score=s.score}function gv(s,e,{includeMatches:t=M.includeMatches,includeScore:r=M.includeScore}={}){let i=[];return t&&i.push(mv),r&&i.push(yv),s.map(n=>{let{idx:a}=n,o={item:e[a],refIndex:a};return i.length&&i.forEach(c=>{c(n,o)}),o})}var Et=class{constructor(e,t={},r){this.options=k(k({},M),t),this.options.useExtendedSearch,this._keyStore=new Sc(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Jr))throw new Error(zS);this._myIndex=t||Ly(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!qe(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,i=this._docs.length;r<i;r+=1){let n=this._docs[r];e(n,r)&&(this.removeAt(r),r-=1,i-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:i,shouldSort:n,sortFn:a,ignoreFieldNorm:o}=this.options,c=et(e)?et(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return dv(c,{ignoreFieldNorm:o}),n&&c.sort(a),Cy(t)&&t>-1&&(c=c.slice(0,t)),gv(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){let t=Mc(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:n,i:a,n:o})=>{if(!qe(n))return;let{isMatch:c,score:l,indices:u}=t.searchIn(n);c&&i.push({item:n,idx:a,matches:[{score:l,value:n,norm:o,indices:u}]})}),i}_searchLogical(e){let t=Oy(e,this.options),r=(o,c,l)=>{if(!o.children){let{keyId:h,searcher:p}=o,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:p});return f&&f.length?[{idx:l,item:c,matches:f}]:[]}let u=[];for(let h=0,p=o.children.length;h<p;h+=1){let f=o.children[h],y=r(f,c,l);if(y.length)u.push(...y);else if(o.operator===$n.AND)return[]}return u},i=this._myIndex.records,n={},a=[];return i.forEach(({$:o,i:c})=>{if(qe(o)){let l=r(t,o,c);l.length&&(n[c]||(n[c]={idx:c,item:o,matches:[]},a.push(n[c])),l.forEach(({matches:u})=>{n[c].matches.push(...u)}))}}),a}_searchObjectList(e){let t=Mc(e,this.options),{keys:r,records:i}=this._myIndex,n=[];return i.forEach(({$:a,i:o})=>{if(!qe(a))return;let c=[];r.forEach((l,u)=>{c.push(...this._findMatches({key:l,value:a[u],searcher:t}))}),c.length&&n.push({idx:o,item:a,matches:c})}),n}_findMatches({key:e,value:t,searcher:r}){if(!qe(t))return[];let i=[];if(bt(t))t.forEach(({v:n,i:a,n:o})=>{if(!qe(n))return;let{isMatch:c,score:l,indices:u}=r.searchIn(n);c&&i.push({score:l,key:e,value:n,idx:a,norm:o,indices:u})});else{let{v:n,n:a}=t,{isMatch:o,score:c,indices:l}=r.searchIn(n);o&&i.push({score:c,key:e,value:n,norm:a,indices:l})}return i}};Et.version="6.6.2";Et.createIndex=Ly;Et.parseIndex=rv;Et.config=M;Et.parseQuery=Oy;hv(_c);var Be=require("vscode");d();function _y(s){return new Promise(e=>setTimeout(e,s))}d();var Un=class extends Error{constructor(){super(...arguments),this.name="TimeoutError"}};d();function Bc(s,e,t){if(e==null)return s;let r=!1;return s.then(()=>{r=!0}),Promise.race([s,_y(e).then(()=>{if(!r)throw new Un(t)})])}d();var jn=class{constructor(e){if(this.size=0,e&&e[Symbol.iterator])for(let t of e)this._push(t)}push(...e){for(let t of e)this._push(t)}get head(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get tail(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}_push(e){if(this.size+=1,!this._tail){this._head=this._tail={value:e};return}let t={value:e,prev:this._tail};this._tail.next=t,this._tail=t}pushFront(...e){for(let t of e)this._pushFront(t)}_pushFront(e){if(this.size+=1,!this._head){this._head=this._tail={value:e};return}let t={value:e,next:this._head};this._head.prev=t,this._head=t}pop(){if(!this._tail)return;this.size-=1;let e=this._tail;return this._tail=e.prev,this._updateHeadAndTail(),e.value}popFront(){if(!this._head)return;this.size-=1;let e=this._head;return this._head=e.next,this._updateHeadAndTail(),e.value}_updateHeadAndTail(){if(!this._head||!this._tail||this.size===0){this._head=this._tail=void 0,this.size=0;return}this._head.prev=void 0,this._tail.next=void 0}get empty(){return this.size===0}clear(){this._head=void 0,this._tail=void 0,this.size=0}*[Symbol.iterator](){if(!this._head)return;let e=this._head;for(;e;)yield e.value,e=e.next}toArray(){return Array.from(this)}};d();d();var qn=class{constructor(){this.list=new jn,this.running=!1,this.paused=!1}pushTask(){let e=Dy();return this.list.push(e),this.start(),e.promise}pushTaskFront(){let e=Dy();return this.list.pushFront(e),this.start(),e.promise}pause(){this.paused=!0}start(){this._run()}async _run(){if(this.paused=!1,!this.running){for(this.running=!0;this.list.size;){if(this.paused){this.running=!1;return}let e=this.list.popFront();await new Promise(t=>e.resolve(t))}this.running=!1}}destroy(){this.list.clear(),this.paused=!0}};function Dy(){let s,e;return{promise:new Promise((t,r)=>{e=r,s=t}),resolve:s,reject:e}}var Wn=class{constructor(){this.linkedPromise=new qn}acquire(e){return e?Bc(this.linkedPromise.pushTask(),e):this.linkedPromise.pushTask()}acquireImmediately(e){return e?Bc(this.linkedPromise.pushTaskFront(),e):this.linkedPromise.pushTaskFront()}};var Fy=ne(require("vscode"));var Yr=class extends Be.Disposable{constructor(t,r,i,n,a){super(()=>{this.dispose()});this.id=t;this.ctrl=r;this.discover=i;this.vitest=n;this.workspace=a;this.isWatching=ws(!1);this.isRunning=ws(!1);this.testStatus=ws({passed:0,failed:0,skipped:0});this.lock=new Wn;this.onFileUpdated=t=>{if(t==null)this.discover.watchAllTestFilesInWorkspace(this.ctrl);else for(let r of t)this.discover.discoverTestFromPath(this.ctrl,r.filepath)};this.onUpdated=(t,r)=>{if(!t)return;let i=!this.run;i&&(this.run=this.ctrl.createTestRun(new Be.TestRunRequest));let n=this.discover,a=this.ctrl,o=this.run;Vn(t,n,a,o,r,i)}}static isWatching(t){var r;return!!((r=this.cache[t])!=null&&r.isWatching.value)}static create(t,r,i,n,a){return this.cache[a]?this.cache[a]:(Yr.cache[a]=new Yr(a,t,r,i,n),Yr.cache[a])}async watch(){let t=await this.lock.acquire();try{if(this.isWatching.value)return;this.isRunning.value=!0,this.isWatching.value=!0;let r=[],i=await $r({port:51204}),n;return this.process=Hi(this.vitest.cmd,[...this.vitest.args,"--api.port",i.toString(),"--api.host","127.0.0.1"],{cwd:this.workspace.uri.fsPath,env:k(k({},process.env),le(this.workspace).env)},a=>{r.push(a),clearTimeout(n),n=setTimeout(()=>{D.info(r.join(`
`)),r.length=0},200)},a=>{r.push(a),clearTimeout(n),n=setTimeout(()=>{D.info(r.join(`
`)),r.length=0},200)}).child,this.process.on("exit",()=>{D.info("VITEST WATCH PROCESS EXIT")}),this.vitestState=Dn({port:i,handlers:{onTaskUpdate:a=>{try{if(!this.vitestState)return;this.isRunning.value=!0;let o=this.vitestState.client.state.idMap,c=new Set;for(let[l]of a){let u=o.get(l);!u||u.file&&c.add(u.file)}this.onUpdated(Array.from(c),!1)}catch(o){console.error(o)}},onFinished:a=>{try{if(this.isRunning.value=!1,this.onUpdated(a,!0),!this.run)return;this.run.end(),this.run=void 0,this.updateStatus()}catch(o){console.error(o)}}},reconnectInterval:200,reconnectTries:10}),Es(()=>{this.onFileUpdated(this.vitestState.files.value)}),this.vitestState.loadingPromise.then(()=>{this.updateStatus(),this.isRunning.value=!1})}finally{t()}}updateStatus(){if(!this.vitestState)return;let t=0,r=0,i=0,n=this.vitestState.client.state.idMap;for(let a of n.values())if(a.type==="test"){if(!a.result){i++;continue}a.result.state==="pass"&&t++,a.result.state==="fail"&&r++}this.testStatus.value={passed:t,failed:r,skipped:i},Ds().showFailMessages&&r>0&&Fy.window.showErrorMessage(`Vitest: You have ${r} failing Unit Test(s).`)}runTests(t){if(!!this.vitestState){if(t==null){let r=this.vitestState.files.value;this.runFiles(r);return}this.runFiles(this.vitestState.files.value.filter(r=>t.some(i=>je.get(i).getFilePath().includes(r.filepath))))}}runFiles(t){if(!this.vitestState)return;this.run||(this.run=this.ctrl.createTestRun(new Be.TestRunRequest));for(let i of t){let o=function(c){a.started(c),c.children&&c.children.forEach(l=>{o(l)})},n=this.discover.discoverTestFromPath(this.ctrl,i.filepath),a=this.run;o(n.item)}return t.forEach(i=>{delete i.result,Ec(i).forEach(n=>delete n.result)}),this.vitestState.client.rpc.rerun(t.map(i=>i.filepath))}async dispose(){var r,i;let t=await this.lock.acquire();try{D.info("Stop watch mode"),this.isWatching.value=!1,this.isRunning.value=!1,(r=this.vitestState)==null||r.client.dispose(),(i=this.process)==null||i.kill(),this.process=void 0,this.vitestState=void 0}finally{t()}}},xs=Yr;xs.cache={};function xv(s,e){var r;if(e.length===0)return;let t=s.uri.fsPath;for(let{sourcePos:i}of e){if(!i)continue;let n=(r=i.source)==null?void 0:r.replace(/\//g,My.default.sep);if(!(n!==t||isNaN(i.column)||isNaN(i.line)))return{path:n,line:i.line,column:i.column}}}function Pv(s,e){var i,n,a;let t;(e==null?void 0:e.actual)!=null&&(e==null?void 0:e.expected)!=null?t=Be.TestMessage.diff((i=e==null?void 0:e.message)!=null?i:"",e.expected,e.actual):t=new Be.TestMessage((n=e==null?void 0:e.message)!=null?n:"");let r=xv(s,(a=e==null?void 0:e.stacks)!=null?a:[]);if(r){let o=new Be.Position(r.line-1,r.column-1);t.location=new Be.Location(Be.Uri.file(r.path),o)}return t}function Vn(s,e,t,r,i,n,a=new Set){for(let o of s){let c=e.discoverTestFromPath(t,o.filepath);r&&Tv(r,c,o,i,n,a)}return a}function Tv(s,e,t,r,i,n){a(s,e.children,t.tasks);function a(c,l,u){var p;let h=new Set(l);for(let f of u){let y=o(f,h,f.type);if(f.type==="test")if(f.result==null)r?(n&&n.add(y.item),c.skipped(y.item)):i&&c.started(y.item);else{if(n&&n.has(y.item))continue;switch((p=f.result)==null?void 0:p.state){case"pass":c.passed(y.item,f.result.duration),n&&n.add(y.item);break;case"fail":c.failed(y.item,Pv(y.item,f.result.error),f.result.duration),n&&n.add(y.item);break;case"skip":case"todo":c.skipped(y.item),n&&n.add(y.item);break;case"run":c.started(y.item);break;case"only":break;default:console.error("unexpected result state",f.result)}}else a(c,y.children,f.tasks)}}function o(c,l,u){var p;let h;for(let f of l)if(!(u==="suite"&&!(f instanceof ps))&&!(u==="test"&&!(f instanceof fs))&&f.pattern===c.name){h=f;break}return h?l.delete(h):h=(p=new Et(Array.from(l),{keys:["pattern"]}).search(c.name)[0])==null?void 0:p.item,h}}async function Ry(s,e,t,r,i,n){if(r.length===0){D.info("ERROR: No workspace folder found"),ce.window.showErrorMessage("Cannot run tests: No workspace folder found");return}if(t.some(o=>xs.isWatching(o.id))&&t.length>0){D.info("Use watchers to run tests"),t.forEach(o=>{var c;o.runTests(Qr((c=i.include)!=null?c:[],o.workspace.uri.fsPath))});return}D.info("Tests run start");let a=s.createTestRun(i);n.onCancellationRequested(()=>{a.end()}),await Promise.allSettled(r.map(async o=>{var h;let c=new Qs(o.uri.fsPath,Dt(o.uri.fsPath)),l=(h=i.include)!=null?h:s.items,u=Qr(l,o.uri.fsPath);if(u.length!==0){D.info(`[Workspace "${o.name}] Run tests from workspace`);try{await $c(s,c,a,u,"run",e),D.info(`[Workspace "${o.name}] Test run finished`)}catch(p){if(D.error(`[Workspace "${o.name}] Run error`),p instanceof Error){let f=p;console.error(p),D.info(`[Workspace ${o.name}] Error: ${p.toString()}`),u.forEach(y=>a.errored(y,new ce.TestMessage(f.toString())))}}}})),a.end(),D.info("Tests run end")}async function By(s,e,t){if(ce.workspace.workspaceFolders===void 0||ce.workspace.workspaceFolders.length===0)return;t=Gs.get(s).get(t.id);let r=qy([t],ce.workspace.workspaceFolders),i=new Qs(r.uri.fsPath,Dt(r.uri.fsPath)),n=new ce.TestRunRequest([t]),a=[t],o=s.createTestRun(n);o.started(t),await $c(s,i,o,a,"update",e),o.end()}async function $y(s,e,t,r,i){var a;if(t.length===0)return;let n=s.createTestRun(r);i.onCancellationRequested(()=>{n.end()});for(let o of t){let c=(a=r.include)!=null?a:s.items,l=Qr(c,o.uri.fsPath);if(l.length!==0)try{let u=new Qs(o.uri.fsPath,Dt(o.uri.fsPath));await $c(s,u,n,l,"debug",e)}catch(u){if(u instanceof Error){let h=u;console.error(u),D.info(`Error in ${o.name}: ${u.toString()}`),l.forEach(p=>n.errored(p,new ce.TestMessage(h.toString())))}}}n.end()}function Uy(s){if(Array.isArray(s))return s;let e=[];return s.forEach(t=>e.push(t)),e}function jy(s,e){let t=(0,zn.relative)(s,e);return!t.startsWith("..")&&!(0,zn.isAbsolute)(t)}function Qr(s,e){return Uy(s).filter(t=>t.uri&&jy(e,t.uri.fsPath))}function qy(s,e){if(e.length===1)return e[0];let t=Uy(s);if(t.length<1)return e[0];let r=e.find(i=>t[0].uri&&jy(i.uri.fsPath,t[0].uri.fsPath));if(!r)throw new Error("Multiple workspace roots are found; cannot deduce workspace to which these tests belong to");return r}var bv="Test result not found. \r\nIf you set `vitest.commandLine` please check: \r\n    Did you set `vitest.commandLine` to `run` mode? (This extension requires `watch` mode to get the results from Vitest api)\r\n    Does it have the ability to append extra arguments? (For example it should be `yarn test --` rather than `yarn test`)\r\nAre there tests with the same name?\r\nCan you run vitest successfully on this file? Does it need custom option to run?\r\n";async function $c(s,e,t,r,i,n){var b,T;if(i!=="debug"&&e===void 0)throw new Error("should provide runner if not debug");let a=qy(r,ce.workspace.workspaceFolders),o=le(a),c=new Set,l=new Map,u=[];for(let x of r){let S=je.get(x);if(!S){D.workspaceError(a.name,`Item not found ${(b=x.uri)==null?void 0:b.fsPath}`),t.errored(x,new ce.TestMessage("Item not found"));continue}S instanceof gt&&await S.load(s);let A;if(S instanceof gt)A=x;else if(A=S.fileItem,!A){D.workspaceError(a.name,`File item not found for item ${(T=x.uri)==null?void 0:T.fsPath}`),t.errored(x,new ce.TestMessage("Item not found"));continue}u.push(A);let C=bn(A);for(let j of C)l.set(j.id.replace(/@\d+$/g,""),j);for(let j of bn(x))c.add(j)}c.forEach(x=>{t.started(x)});let h;if(o.commandLine){let x=o.commandLine.trim();h={cmd:x.split(" ")[0],args:x.split(" ").slice(1)}}let p=async({args:x,cfg:S,log:A,onProcessEnd:C,registerOnTestFinished:j})=>{let z,X=ce.debug.onDidStartDebugSession(F=>{z=F,X.dispose()}),w=ce.debug.onDidTerminateDebugSession(F=>{if(z!==F)return;let B=!1,J=!1,se=ce.debug.onDidStartDebugSession(V=>{se.dispose(),!B&&(J=!0,z=V)});setTimeout(()=>{J||(B=!0,C(),w.dispose(),se.dispose())},200)});j(()=>{ce.debug.stopDebugging(z)}),ce.debug.startDebugging(a,{type:"pwa-node",request:"launch",name:"Debug Current Test File",autoAttachChildProcesses:!0,skipFiles:["<node_internals>/**","**/node_modules/**"],program:vr(a.uri.fsPath),args:x,smartStep:!0,env:S.env}).then(()=>{A("Debugging started")},F=>{A("Start debugging failed"),A(F.toString()),X.dispose(),w.dispose()})},f=new Set,{output:y,testResultFiles:g}=await e.scheduleRun(u.map(x=>x.uri.fsPath),r.length===1?je.get(r[0]).getFullPattern():"",{info:x=>{r.length===1?t.appendOutput(x,void 0,r[0]):t.appendOutput(x)},error:D.error},o.env||void 0,h,i==="update",x=>{Vn(x,n,s,t,!1,!1,f)},i==="debug"?p:void 0);if(Vn(g,n,s,t,!0,!1,f),i!=="debug")for(let x of c)f.has(x)||(t.errored(x,new ce.TestMessage(`${bv}\r
\r
Vitest output:\r
${rs(y)}`)),D.error(`Test not found: ${x.id}`))}d();var Wt=ne(require("vscode"));var Gn=class extends Wt.Disposable{constructor(){super(()=>{this.item.dispose()});this.item=Wt.window.createStatusBarItem(Wt.StatusBarAlignment.Left,5);this.toDefaultMode()}toDefaultMode(){this.item.command="vitest.startWatching",this.item.text="$(test-view-icon) Vitest",this.item.tooltip="Click to start watch mode",this.setBackgroundColor(!1),this.item.show()}hide(){this.item.hide()}toWatchMode({passed:t,failed:r,skipped:i}){this.item.command="vitest.stopWatching";let n=t+r;this.item.text=`$(eye-watch) ${t}/${n} passed (${(t/n*100).toFixed(0)}%, ${i} skipped)`,this.item.tooltip="Vitest is watching. Click to stop.",this.setBackgroundColor(r>0),this.item.show()}toRunningMode(){this.item.command="vitest.stopWatching",this.item.text="$(loading~spin) Vitest is running",this.item.tooltip="Click to stop watching",this.setBackgroundColor(!1),this.item.show()}setBackgroundColor(t){Ds().changeBackgroundColor&&(this.item.backgroundColor=t?new Wt.ThemeColor("statusBarItem.errorBackground"):void 0)}};async function wv(s){if(await Ff(),is.length===0){D.info("The extension is not activated because no Vitest environment was detected.");return}let e=ie.tests.createTestController(`${Mf}`,"Vitest"),t=vv(e,s),r=await Rf();if(!Sv(r)){let i=`Because Vitest version < 0.12.0 for every workspace folder, run/debug/watch tests from Vitest extension disabled.
`;D.error(i),r.some(n=>n.isUsingVitestForSure)&&ie.window.showWarningMessage(i),s.subscriptions.push(ie.commands.registerCommand("vitest.toggleWatching",()=>{ie.window.showWarningMessage(i)}),ie.commands.registerCommand("vitest.updateSnapshot",()=>{ie.window.showWarningMessage(i)}));return}Nv(e,r,t,s),s.subscriptions.push(e,t,ie.commands.registerCommand("vitest.updateSnapshot",i=>{By(e,t,i)}),ie.workspace.onDidOpenTextDocument(i=>{t.discoverTestFromDoc(e,i)}),ie.workspace.onDidChangeTextDocument(i=>t.discoverTestFromDoc(e,i.document)))}function Sv(s){return s.forEach(e=>{D.info(`Vitest Workspace [${e.workspace.name}]: Vitest version = ${e.version}`)}),s.filter(e=>!e.isCompatible&&e.isUsingVitestForSure).forEach(e=>{ie.window.showWarningMessage(`Because Vitest version < 0.12.0, run/debug/watch tests are disabled in workspace "${e.workspace.name}" 
`)}),!s.every(e=>!e.isCompatible)}function vv(s,e){let t=new En;return s.refreshHandler=async()=>{await t.discoverAllTestFilesInWorkspace(s)},s.resolveHandler=async r=>{if(!r)e.subscriptions.push(...await t.watchAllTestFilesInWorkspace(s));else{let i=je.get(r);i instanceof gt&&await i.updateFromDisk(s)}},ie.window.visibleTextEditors.forEach(r=>t.discoverTestFromDoc(s,r.document)),t}function Av(s){return s.reduce((e,t)=>({passed:e.passed+t.testStatus.value.passed,failed:e.failed+t.testStatus.value.failed,skipped:e.skipped+t.testStatus.value.skipped}),{passed:0,failed:0,skipped:0})}var Zr;function Cv(s,e,t,r){var c;let i=(c=s.map((l,u)=>xs.create(e,t,l,l.workspace,u)))!=null?c:[];Zr=new Gn,Es(()=>{if(i.some(l=>l.isRunning.value)){Zr.toRunningMode();return}else if(i.some(l=>l.isWatching.value)){Zr.toWatchMode(Av(i));return}Zr.toDefaultMode()});let n=()=>{i.forEach(l=>l.dispose()),ie.workspace.getConfiguration("testing").update("automaticallyOpenPeekView",void 0)},a=()=>{i.forEach(l=>l.watch()),ie.workspace.getConfiguration("testing").update("automaticallyOpenPeekView","never")};r.subscriptions.push({dispose:n},...i,Zr,ie.commands.registerCommand("vitest.startWatching",a),ie.commands.registerCommand("vitest.stopWatching",n),ie.commands.registerCommand("vitest.toggleWatching",()=>{i.some(u=>u.isWatching.value)?n():a()})),e.createRunProfile("Run Tests (Watch Mode)",ie.TestRunProfileKind.Run,o,!1);async function o(l,u){ie.workspace.workspaceFolders===void 0||ie.workspace.workspaceFolders.length===0||(await Promise.all(i.map(h=>h.watch())),i.forEach(h=>{var p;h.runTests(Qr((p=l.include)!=null?p:[],h.workspace.uri.fsPath))}))}return i}function Nv(s,e,t,r){var a;let i=(a=Cv(e.filter(o=>o.isCompatible&&!o.isDisabled),s,t,r))!=null?a:[],n=e.filter(o=>o.isCompatible&&!o.isDisabled).map(o=>o.workspace);s.createRunProfile("Run Tests",ie.TestRunProfileKind.Run,Ry.bind(null,s,t,i,n),!0),s.createRunProfile("Debug Tests",ie.TestRunProfileKind.Debug,$y.bind(null,s,t,n),!0)}function Iv(){}0&&(module.exports={activate,deactivate});
/*! (c) 2020 Andrea Giammarchi */
